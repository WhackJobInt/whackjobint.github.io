{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"What is Postal3Script? Postal3Script, or P3S, is a scripting language developed for Postal 3, designed to handle most of the NPC AI and mission scripting. It allows for a much easier and faster time doing missions and AI rather than messing around in C++ and doing logic entirely through map entities in Hammer. With Postal3Script, you can easily do many things that you normally would not be able to do without the source code of the game due to the many useful functions and attributes that are interfaced. P3S script files are located in \"/Postal III/p3/scripts\" and use the \".p3s\" file extension. To load and be able to use a p3s script, you must add it to a manifest, in \"ai_scripts.txt\", found in the previously mentioned folder. Changes to p3s scripts will automatically hotload when the map restarts, so you can just use the \"restart\" console command without ever having to exit and reload the game. Postal3Script Example Constants { Const DONUTS_INCR,1 Const SOMEBODY_STOLE_MY_DONUTS,15 Const YES,1 Const NO,0 } behavior { name bh_evensuperioractor inherited bh_mysuperioractor States { st_mycustomstate { Group Alert Patterns { pt_default { // Only executes when on Alert } } } st_nowyallgonnapay { Group Combat Patterns { pt_default { // Only executes when in Combat SetAttr \"veryverypissedoff YES\" Pattern pt_donuts } pt_donuts { IfAttr \"veryverypissedoff == YES Pattern st_nowyallgonnapay.pt_allgood\" } pt_allgood { SetAttr \"veryverypissedoff NO\" } } } events { OnDeath \"ExecutePattern st_OnDeath.pt_default\" OnTimer_tUnstun \"Pattern pt_end\" OnUnconscious \"Pattern pt_unconscious\" OnHostaged \"Pattern pt_hostaged\" OnSprayStunned \"Timer tUnstun,SPRAY_UNSTUN_TIMER\" OnTimer_tScream \"ExecutePattern .xpt_SayScream\" OnUnstunned \"Pattern pt_end\" OnStandUpEnd \"Pattern pt_end\" } // Sets on spawn st_init { Group Neutral Patterns { pt_default { actions { Senses false } } } } // Called continously st_start { Group Neutral Patterns { pt_default { actions { // tick } } } } } } Limitations Each state can hold events, which in turn can execute patterns. Patterns can be inherited from other P3S actors, as well as Attributes. * In Postal3Script, Attributes can only be whole numbers/integers, attributes can't be floats, doubles and strings. * An Attribute must have a value initialized before checking it's value using CheckAttr, meaning an attribute that doesn't exist will never return a valid value. (Checking if it's zero/null doesn't work). * You can only have a limited number of if statements in a single state or pattern. Debugging code Normally the game doesn't print out any errors, you need to have the \"developer\" and \"p3_fsm_spew\" console commands enabled. Scrolling around in the console should show you which script and what lines have errors if there are any. If you want to print out your own debug messages, You'll have to settle for doing EntFireInput on the point_clientcommand in the map via \"EntFireInput pcc,Command: echo yourmessagehere\". Debug channel specific ShowMessages are broken it seems. Unused Postal3Script files Trashmasters have left many p3s scripts that were used during the development of Postal III just sitting around. Many of them contain cut features, unused logic, and various tests. 'ai_badger_test.p3s' - Badger testing 'ai_cashmart.p3s' - Earlier version of Cashmart (ai_cashmart_npc.p3s is not unused) 'ai_gameplay.p3s' - Intended for Open World gameplay 'ai_patrol1_citizen_fight.p3s' - Unknown 'ai_st1_common.p3s' - Contains various old code 'ai_st2_states.p3s' - Contains various old code 'ai_st3_social.p3s' - Contains experimental old code 'ai_st4_queuie.p3s' - Queue testing 'ai_st5_temp.p3s' - Contains test code, scrapped features 'ai_st6_missions.p3s' - Test code related to missions 'ai_st7_environment.p3s' - Code related to cut environment behavior 'ai_st8_items.p3s' - Code related to cut inventory items 'ai_st9_animals.p3s' - Animals test 'ai_st10_temp.p3s' - Test script, contains code related to Traffic lights 'ai_st11_urza.p3s' - Contains scrapped features, old code 'ai_st12_urza.p3s' - Contains scrapped features, old code 'ai_st98_helicopter.p3s' - Code that's identical to today's Helicopter AI 'ai_st_utilities.p3s' - Various code related to NPCs 'ai_test_babuska.p3s' - Test script 'lean_test.p3s' - Test script","title":"What is Postal3Script?"},{"location":"#what-is-postal3script","text":"Postal3Script, or P3S, is a scripting language developed for Postal 3, designed to handle most of the NPC AI and mission scripting. It allows for a much easier and faster time doing missions and AI rather than messing around in C++ and doing logic entirely through map entities in Hammer. With Postal3Script, you can easily do many things that you normally would not be able to do without the source code of the game due to the many useful functions and attributes that are interfaced. P3S script files are located in \"/Postal III/p3/scripts\" and use the \".p3s\" file extension. To load and be able to use a p3s script, you must add it to a manifest, in \"ai_scripts.txt\", found in the previously mentioned folder. Changes to p3s scripts will automatically hotload when the map restarts, so you can just use the \"restart\" console command without ever having to exit and reload the game.","title":"What is Postal3Script?"},{"location":"TBD/","text":"Unfinished! This page of Postal3Script has not worked on yet! Sorry! We're working on it!","title":"AddFluid (TBD)"},{"location":"TBD/#unfinished","text":"This page of Postal3Script has not worked on yet! Sorry! We're working on it!","title":"Unfinished!"},{"location":"attributeprogressbar/","text":"AttributeProgressBar Adds a HUD on the screen with name, and value Mainly used for displaying Health for Bosses, Allies from missions Uses .res files from \"Postal III/p3/resource/UI/Hud/\" folder Syntax AttributeProgressBar \"[panel], show, [attribute]\" -- Shows or creates Progress Bar AttributeProgressBar \"[panel], show, [attribute], show_value\" -- Shows or creates Progress Bar with Attribute's value shown AttributeProgressBar \"[panel], hide\" -- Hides Progress Bar Example // from ai_cashmart_npc.p3s, Helicopter from Cashmart SetAttr \"flag_zombie 1\" TargetEntByName gameplay TargetToMem msGP SetAttr \"ea_dmg_absorb 95\" TargetPlayer 1 FireInput self,StartHunt // Show the Panel on spawn // \"./Postal III/p3/resource/UI/Hud/HeliHealthPanel.res\" AttributeProgressBar \"HeliHealthPanel,show,ea_health\" Timer tShout,5:2","title":"AttributeProgressBar"},{"location":"attributeprogressbar/#attributeprogressbar","text":"Adds a HUD on the screen with name, and value Mainly used for displaying Health for Bosses, Allies from missions Uses .res files from \"Postal III/p3/resource/UI/Hud/\" folder","title":"AttributeProgressBar"},{"location":"attributes/","text":"Attributes In Postal3Script you are able to set or check Attributes, and execute states according to the results. All attributes in Postal3Script are integers only. When checking against multiple attributes at once you can use 'and' IfAttr Checks an Attribute or Object. The Attribute or Object MUST exist. st_IfAttrTutorial { Group Neutral Patterns { pt_default { actions { // Check for my faction, if it's Zealots then I love animals IfAttr \"ea_faction == Faction:Zealots SetAttr LoveAnimals 1\" // My target is the player, so I will hate them IfAttr \"Object:target == Object:player SetAttr HatesPlayer 1\" // I have no ranged weapon, but I do have a melee weapon, then I'll bring up my weapon IfAttr \"HasWeapon:Ranged == 0 and HasWeapon:melee > 0 Block begin\" IfAttr \"HasWeapon:melee != 2 SetAttr WeaponChanged 1\" Weapon select,melee SetAttr \"ea_status sPUNISHER\" Block end // Player is forgiven according to the timer IfAttr \"Timer:tForgivePlayer < = 0 Pattern pt_end\" // State didn't execute from the Player, returning from this point IfAttr \"Object:caller != Object:player Return 1\" // My target loves animals?? No way! IfAttr \"target.LoveAnimals == 1 Return 1\" // My enemy of my enemy... is my enemy now! IfAttr \"target.Object:target != Object:null Block begin\" AssistTarget 1 Block end // My target is the Player, and they have their python out IfAttr \"Object:target == Object:player and target.ea_games == 1 State so_seepiss\" } } } } SetAttr Creates and sets a new attribute's value Constants { Const YES,1 Const NO,0 } st_SetAttrTutorial { Group Neutral Patterns { pt_default { actions { SetAttr \"IamTheDevil 666\" // Supports constants SetAttr \"y_Yes YES\" SetAttr \"n_No NO\" SetAttr \"ea_status sNEUTRAL\" SetAttr \"reaction RE_NONE\" // Randomize non-existent attributes // Maximum possible is 100 // Second value should always be zero SetAttr \"rnd 0,0,100\" SetAttr \"rndtwo 25,0,75\" // Sets other object's attribute SetAttr \"target.cr_demo YES\" SetAttr \"caller.cr_demo NO\" } } } } CheckAttr Checks if an Attribute is equal to or greater than 1 st_CheckAttrTutorial { Group Neutral Patterns { pt_default { actions { CheckAttr \"flag_static Return 1\" CheckAttr \"greet_sleazy Say SLEEZ\" CheckAttr \"AnimalNotCat Say LIKESANIMAL\" CheckAttr \"AnimalCat Say LIKESANIMAL,LIKESCAT\" } } } } ChangeAttr Changes an already existing Attribute's value, increasing, decreasing, multiplying, or by halving Halving will clamp the value to integer (5 / 2 wouldn't be '2.5', but '3') st_ChangeAttrTutorial { Group Neutral Patterns { pt_default { actions { // Randomization ChangeAttr \"poo_rnd 0:100\" ChangeAttr \"combat_rnd 0:1\" ChangeAttr \"DonutsIHave +1\" ChangeAttr \"PooIGive -1\" ChangeAttr \"Multiply *5\" ChangeAttr \"Halve /5\" // Change Health on the fly ChangeAttr \"ea_health +25\" } } } } RemoveAttr Removes an already existing Attribute from existence st_RemoveAttrTutorial { Group Neutral Patterns { pt_default { actions { RemoveAttr \"flag_PlayerFriendly\" RemoveAttr \"poo_rnd\" RemoveAttr \"IamTheDevil\" } } } }","title":"IfAttr, SetAttr, CheckAttr, ChangeAttr, RemoveAttr"},{"location":"attributes/#attributes","text":"In Postal3Script you are able to set or check Attributes, and execute states according to the results. All attributes in Postal3Script are integers only. When checking against multiple attributes at once you can use 'and'","title":"Attributes"},{"location":"distto/","text":"DistTo Check the distance between one entity to another // ENEMY DISTANCE CONSTANTS // Const ED_VERY_CLOSE,32 // Const ED_CLOSE,160 // Const ED_MIDDLE,320 // Const ED_FAR,768 // Const ED_FURTHER,1280 // Const ED_VERY_FAR,2048 // Turn to face the target if we're SUPER close to them // You may use any integer or one of the above specified constants instead... IfAttr \"DistTo:target < 16 Pattern pt_face\" // Caller is pretty far, so bombard them IfAttr \"DistTo:caller > ED_FAR Pattern pt_bombard\"","title":"DistTo"},{"location":"distto/#distto","text":"Check the distance between one entity to another // ENEMY DISTANCE CONSTANTS // Const ED_VERY_CLOSE,32 // Const ED_CLOSE,160 // Const ED_MIDDLE,320 // Const ED_FAR,768 // Const ED_FURTHER,1280 // Const ED_VERY_FAR,2048 // Turn to face the target if we're SUPER close to them // You may use any integer or one of the above specified constants instead... IfAttr \"DistTo:target < 16 Pattern pt_face\" // Caller is pretty far, so bombard them IfAttr \"DistTo:caller > ED_FAR Pattern pt_bombard\"","title":"DistTo"},{"location":"embedattributes/","text":"Embedded Attributes Instead of unexposed C++ variables in the source code, there are attributes that are already \"embedded\" and read from a related Postal3Script for given entities. For example, \"ea_health\" is the health of the entity that uses the assigned p3s behaviour, or the health of a set target, and can be read, changed, and set using the various \"Attr\" statements. Embedded Attributes are have the \"ea_\" prefix. There are a variety of attributes and they each serve their own purposes. Embedded Attribute Example st_EmbeddedAttrTutorial { Group Neutral Patterns { pt_default { actions { // Embedded damage absorptions SetAttr \"ea_dmg_absorb 70\" SetAttr \"ea_bulletdmg_absorb 90\" SetAttr \"ea_clubdmg_absorb 70\" SetAttr \"ea_flamedmg_absorb 20\" SetAttr \"ea_blastdmg_absorb 30\" SetAttr \"ea_krotchydmg_absorb 100\" SetAttr \"ea_flamedmg_absorb 100\" SetAttr \"ea_physdmg_absorb 90\" SetAttr \"ea_blast_immune 1\" // NPC cannot do crit damage (kinda like in TF2) SetAttr \"ea_crit_disabled 1\" // NPC Faction check, please look at Factions IfAttr \"ea_faction == Faction:Police SetAttr tutorial_imacop 1\" // Health, if set to 0 NPC or Player will die IfAttr \"ea_health < 55 SetAttr tutorial_imwounded 1\" // NPC cannot be picked up (mainly used by Cats) SetAttr \"ea_takeable 0\" // NPC is no longer tased SetAttr \"ea_tased 0\" // NPC Manner, please look at Manners IfAttr \"ea_Manner == Manner:JusticeMan State bh_human:st_attack_melee\" // NPC Status, mainly used to determine if they are holding dangerous weapons SetAttr \"ea_status sNEUTRAL\" IfAttr \"ea_armed == WPN_M16 SetAttr NumAmmo AMMO_M16_MAX\" IfAttr \"ea_ActiveWeapon == Weapon:Ranged Aim true,false\" IfAttr \"ea_NumEnemies == 0 and ea_NumFear == 0 SetAttr tutorial_calm 1\" IfAttr \"ea_NumVisibleEnemy == 0 SetAttr TaskCombat TC_SEARCH\" // NPC will disappear if Player is too far away SetAttr \"ea_autokill 0\" // No gibbing SetAttr \"ea_no_gibs 1\" // Used for Segways IfAttr \"ea_lean != 1 Pattern pt_lean_in\" // NPC's Hammer name IfAttr \"ea_name == String:npc_pizza_vendor SetAttr cr_vendor 1\" // Ammo IfAttr \"ea_HaveAmmo == 0 Pattern pt_reload\" // Gibs CheckAttr \"ea_gibs\" } } } }","title":"Embedded Attributes"},{"location":"embedattributes/#embedded-attributes","text":"Instead of unexposed C++ variables in the source code, there are attributes that are already \"embedded\" and read from a related Postal3Script for given entities. For example, \"ea_health\" is the health of the entity that uses the assigned p3s behaviour, or the health of a set target, and can be read, changed, and set using the various \"Attr\" statements. Embedded Attributes are have the \"ea_\" prefix. There are a variety of attributes and they each serve their own purposes.","title":"Embedded Attributes"},{"location":"endmission/","text":"EndMission Ends the level, and proceeds to the next level (if possible) Equivalent to \"p3_end_mission\" console command Example // from ai_mission_daveland.p3s st_end { Group Neutral Patterns { pt_default { actions { EntFireInput lpp,Say:ENDEVENTINSANE Wait 1 EntFireInput muzak.mission,FadeOut:1 MissionLog done,escape EndMission 1 // Alternative way to end a mission EntFireInput \"pcc,Command:p3_end_mission\" } } } }","title":"EndMission"},{"location":"endmission/#endmission","text":"Ends the level, and proceeds to the next level (if possible) Equivalent to \"p3_end_mission\" console command","title":"EndMission"},{"location":"faction/","text":"Faction Factions/Squads in Postal III are Half-Life 2 squads One Squad can hold 32 NPCs in one map, if it's higher than 32, problems might occur. st_FactionTutorial { Group Neutral Patterns { pt_default { actions { // Here you can find all the Factions defined in Vanilla Postal III IfAttr \"ea_faction == Faction:Police Return 1\" IfAttr \"ea_faction == Faction:Zealots Return 1\" IfAttr \"ea_faction == Faction:Citizens Return 1\" IfAttr \"ea_faction == Faction:Hobos Return 1\" IfAttr \"ea_faction == Faction:Animals Return 1\" IfAttr \"ea_faction == Faction:Player Return 1\" IfAttr \"ea_faction == Faction:LaserDot Return 1\" IfAttr \"ea_faction == Faction:Effects Return 1\" IfAttr \"ea_faction == Faction:Items Return 1\" IfAttr \"ea_faction == Faction:Taliban Return 1\" IfAttr \"ea_faction == Faction:Venezuela Return 1\" IfAttr \"ea_faction == Faction:ZombieBoss Return 1\" // used by flag_zombie (Boss NPCs) // Factions are independent from Squads // Setting a Squad in an NPC SetSquad tutorial_squad // Making another Squad an enemy SetSquadRelation player_squad:enemy // You can also do value after declaring enemy (todo: what does it do?) SetSquadRelation player_squad:enemy:4 } } } }","title":"Faction"},{"location":"faction/#faction","text":"Factions/Squads in Postal III are Half-Life 2 squads One Squad can hold 32 NPCs in one map, if it's higher than 32, problems might occur. st_FactionTutorial { Group Neutral Patterns { pt_default { actions { // Here you can find all the Factions defined in Vanilla Postal III IfAttr \"ea_faction == Faction:Police Return 1\" IfAttr \"ea_faction == Faction:Zealots Return 1\" IfAttr \"ea_faction == Faction:Citizens Return 1\" IfAttr \"ea_faction == Faction:Hobos Return 1\" IfAttr \"ea_faction == Faction:Animals Return 1\" IfAttr \"ea_faction == Faction:Player Return 1\" IfAttr \"ea_faction == Faction:LaserDot Return 1\" IfAttr \"ea_faction == Faction:Effects Return 1\" IfAttr \"ea_faction == Faction:Items Return 1\" IfAttr \"ea_faction == Faction:Taliban Return 1\" IfAttr \"ea_faction == Faction:Venezuela Return 1\" IfAttr \"ea_faction == Faction:ZombieBoss Return 1\" // used by flag_zombie (Boss NPCs) // Factions are independent from Squads // Setting a Squad in an NPC SetSquad tutorial_squad // Making another Squad an enemy SetSquadRelation player_squad:enemy // You can also do value after declaring enemy (todo: what does it do?) SetSquadRelation player_squad:enemy:4 } } } }","title":"Faction"},{"location":"manner/","text":"Manner Manner alters the behavior of NPCs heavily, for e.g. they are less likely to attack a Cop than the Player. Manner bias towards other NPC must be researched to fully understand it st_MannerTutorial { Group Neutral Patterns { pt_default { actions { // Here you can find all the Manners defined in Vanilla Postal III IfAttr \"ea_Manner == Manner:Player Return 1\" IfAttr \"ea_Manner == Manner:StreetBro Return 1\" IfAttr \"ea_Manner == Manner:JusticeMan Return 1\" IfAttr \"ea_Manner == Manner:StGranny Return 1\" IfAttr \"ea_Manner == Manner:LameWanker Return 1\" IfAttr \"ea_Manner == Manner:SoccerMom Return 1\" IfAttr \"ea_Manner == Manner:CuteGirl Return 1\" IfAttr \"ea_Manner == Manner:Vendor Return 1\" IfAttr \"ea_Manner == Manner:RedNeck Return 1\" IfAttr \"ea_Manner == Manner:SushiNinja Return 1\" IfAttr \"ea_Manner == Manner:Girl Return 1\" IfAttr \"ea_Manner == Manner:MedicDoc Return 1\" IfAttr \"ea_Manner == Manner:StrayDog Return 1\" IfAttr \"ea_Manner == Manner:MonkeyApe Return 1\" IfAttr \"ea_Manner == Manner:PussyCat Return 1\" IfAttr \"ea_Manner == Manner:JihadBeard Return 1\" IfAttr \"ea_Manner == Manner:RhinoCow Return 1\" IfAttr \"ea_Manner == Manner:LaserDot Return 1\" IfAttr \"ea_Manner == Manner:Mission Return 1\" IfAttr \"ea_Manner == Manner:Pigeon Return 1\" IfAttr \"ea_Manner == Manner:GayGuy Return 1\" IfAttr \"ea_Manner == Manner:NerdyNerd Return 1\" IfAttr \"ea_Manner == Manner:Bystander Return 1\" } } } }","title":"Manner"},{"location":"manner/#manner","text":"Manner alters the behavior of NPCs heavily, for e.g. they are less likely to attack a Cop than the Player. Manner bias towards other NPC must be researched to fully understand it st_MannerTutorial { Group Neutral Patterns { pt_default { actions { // Here you can find all the Manners defined in Vanilla Postal III IfAttr \"ea_Manner == Manner:Player Return 1\" IfAttr \"ea_Manner == Manner:StreetBro Return 1\" IfAttr \"ea_Manner == Manner:JusticeMan Return 1\" IfAttr \"ea_Manner == Manner:StGranny Return 1\" IfAttr \"ea_Manner == Manner:LameWanker Return 1\" IfAttr \"ea_Manner == Manner:SoccerMom Return 1\" IfAttr \"ea_Manner == Manner:CuteGirl Return 1\" IfAttr \"ea_Manner == Manner:Vendor Return 1\" IfAttr \"ea_Manner == Manner:RedNeck Return 1\" IfAttr \"ea_Manner == Manner:SushiNinja Return 1\" IfAttr \"ea_Manner == Manner:Girl Return 1\" IfAttr \"ea_Manner == Manner:MedicDoc Return 1\" IfAttr \"ea_Manner == Manner:StrayDog Return 1\" IfAttr \"ea_Manner == Manner:MonkeyApe Return 1\" IfAttr \"ea_Manner == Manner:PussyCat Return 1\" IfAttr \"ea_Manner == Manner:JihadBeard Return 1\" IfAttr \"ea_Manner == Manner:RhinoCow Return 1\" IfAttr \"ea_Manner == Manner:LaserDot Return 1\" IfAttr \"ea_Manner == Manner:Mission Return 1\" IfAttr \"ea_Manner == Manner:Pigeon Return 1\" IfAttr \"ea_Manner == Manner:GayGuy Return 1\" IfAttr \"ea_Manner == Manner:NerdyNerd Return 1\" IfAttr \"ea_Manner == Manner:Bystander Return 1\" } } } }","title":"Manner"},{"location":"missionlog_save_briefing/","text":"- MissionLog Adds missions/jobs/objectives on the Player's mission log Syntax MissionLog clear_all -- Clears all objectives from the log MissionLog add_primary, [obj], [text/string] -- Adds primary objective to the log MissionLog add_secondary, [obj], [text/string] -- Adds secondary objective to the log MissionLog done, [obj1], [obj2], .. -- Objective(s) marked as done MissionLog fail, [obj1], [obj2], .. -- Objective(s) marked as failed MissionLog removed, [obj1], [obj2], .. -- Objective(s) removed without a trace MissionLog disable -- Mission log is disabled MissionLog enable -- Mission log is enabled Example // from ai_mission_jwb.p3s st_start { group Neutral patterns { pt_default { actions { PlayerKarma hide EntFireInput \"lpp,GiveWeapon:p3_weapon_taser\" EntFireInput \"pcc,Command:use p3_weapon_taser\" ExecutePattern .xpt_show_momleft ExecutePattern st_util.xpt_ShowMissionDesc // Adds the objective to the Player's log \"Jen must survive\" MissionLog add_primary,JenSurvive,#P3_JWB_PRIMARY_JEN ExecutePattern .xpt_secondary ShowMessage #P3_JWB_START ShowMessage #P3_JWB_HELPER01 Pattern pt_loop } } // All Soccer Moms have left pt_end { actions { // Objectives marked as done MissionLog done,MomsLeft MissionLog done,JenSurvive SetAttr \"NonLethalDone 1\" IfAttr \"PoliceIsHere == 1 RemoveAttr NonLethalDone\" // Player didn't harm anyone CheckAttr \"NonLethalDone MissionLog done,NonLethal\" EntFireInput fade_in,fade Wait 1 EntFireInput \"pcc,Command:video_exitcmd jwb_3 p3_end_mission\" } } } } - MissionSave Unused Postal3Script function Not recommended to use Syntax MissionSave [string] -- Saves the game Technical Details When \"MissionSave\" is called in p3s, it will do \"save P3M_[string] mission [string]\" in console, where [string] is replaced with the parameter. It was to be used or related to 'MissionLog', but it looks like it's underdeveloped. Example // This will create a p3m_b4_zombie_ambush.sav and .tga file in the SAVE folder MissionSave b4_zombie_ambush - MissionBriefing Unused Postal3Script function Shows a message on the screen with black background, with a \"Press ENTER to continue\" prompt. Equivalent to \"gameui_show_p3_briefdlg [string]\" console command, which was also used ONLY in the Paradise Bridge level. Example // This will show the very first text screen of Paradise Bridge level MissionBriefing \"#P3_PDB_T01_ONSCREEN\" // This will do the same, but after the pdb_00.bik stopped playing after execution EntFireInput \"pcc,Command:video_exitcmd pdb_00 gameui_show_p3_briefdlg #P3_PDB_T01_ONSCREEN\"","title":"MissionLog, MissionSave, MissionBriefing"},{"location":"missionlog_save_briefing/#-missionlog","text":"Adds missions/jobs/objectives on the Player's mission log","title":"- MissionLog"},{"location":"name/","text":"Name The name of a specified entity, set via Hammer It is case-insensitive // If the name of our targeted entity is \"npc_jen\" IfAttr \"Name:target == String:npc_jen Block begin\" // Set jen's health to zero SetAttr \"target.ea_health 0\" Block end","title":"Name"},{"location":"name/#name","text":"The name of a specified entity, set via Hammer It is case-insensitive // If the name of our targeted entity is \"npc_jen\" IfAttr \"Name:target == String:npc_jen Block begin\" // Set jen's health to zero SetAttr \"target.ea_health 0\" Block end","title":"Name"},{"location":"object/","text":"Object In Postal3Script you have access to certain pointers which helps you with targeting the correct actor. // In P3S you can check for the following objects: // 'Object:Caller' ; 'Object:Target' ; 'Object:Player' // 'Object:slot#0' ; 'Object:null' ; 'Object:self' // 'Object:item' ; 'Object:anchor' // You don't always have a pointer to the Caller, as it's // heavily dependent on the Event which caused the NPC to enter this state // Meaning, there's something or someone that forced the NPC to enter this state // Check if our caller exists (null means zero) IfAttr \"Object:caller != Object:null Block Begin\" // Was it the Player who forced us into this state? IfAttr \"Object:caller == Object:player Block Begin\" // Well then we are going to run to them, endlessly TargetPlayer 1 // or TargetCaller 1 MoveToTarget run,1,0 Block End Block End // Check if our target isn't the Player IfAttr \"Object:target != Object:null and Object:target != Object:Player Block Begin\" // Bad day for our enemy, though, because they are going to die instantly ChangeAttr \"target.ea_health -target.ea_health\" Block End // Object:self and Object:item are barely used, the latter is used by Motorhead // It's a pointer to the NPC's held item // Check out ai_motorhead.p3s, ai_st1_common.p3s, ai_st2_states.p3s // and ai_st7_environment.p3s // Object:anchor is used only in ai_mission_jwb.p3s (todo: what the hell it is?) Memory Objects An actor is capable of saving a pointer to memory, up to 10 slots. It's mostly used for mission making, counting, or logic in Postal III. 6 and the 7 memory slot was never used by Trashmasters. It cannot be higher than 10 or lower than 0. // (from ai_st_init.p3s) // Const msTEMP,0 // Const msOWNER,1 // Const msTARGET,2 // Const msENEMY,3 // Const msSUSPECTED,4 // Const msLEADER,5 ////Const msDRIVEN,6 ////Const msINTEREST,7 // Const msKILLER,8 // Const msGP,9 // Get entity named 'gameplay' and set it as target TargetEntByName gameplay // Save the target to memory TargetToMem msGP // Set the MathLogic's attribute ChangeAttr \"slot#msGP.MoneyGiven +5\" // Reset the target ResetTarget 1","title":"Object"},{"location":"object/#object","text":"In Postal3Script you have access to certain pointers which helps you with targeting the correct actor. // In P3S you can check for the following objects: // 'Object:Caller' ; 'Object:Target' ; 'Object:Player' // 'Object:slot#0' ; 'Object:null' ; 'Object:self' // 'Object:item' ; 'Object:anchor' // You don't always have a pointer to the Caller, as it's // heavily dependent on the Event which caused the NPC to enter this state // Meaning, there's something or someone that forced the NPC to enter this state // Check if our caller exists (null means zero) IfAttr \"Object:caller != Object:null Block Begin\" // Was it the Player who forced us into this state? IfAttr \"Object:caller == Object:player Block Begin\" // Well then we are going to run to them, endlessly TargetPlayer 1 // or TargetCaller 1 MoveToTarget run,1,0 Block End Block End // Check if our target isn't the Player IfAttr \"Object:target != Object:null and Object:target != Object:Player Block Begin\" // Bad day for our enemy, though, because they are going to die instantly ChangeAttr \"target.ea_health -target.ea_health\" Block End // Object:self and Object:item are barely used, the latter is used by Motorhead // It's a pointer to the NPC's held item // Check out ai_motorhead.p3s, ai_st1_common.p3s, ai_st2_states.p3s // and ai_st7_environment.p3s // Object:anchor is used only in ai_mission_jwb.p3s (todo: what the hell it is?)","title":"Object"},{"location":"opendialog/","text":"OpenDialog Opens the Yes/No dialog Unused/Unfinished Postal3Script function Technical Details Executes \"gameui_show_p3_yes_no_dialog\" console command with parameters // The console command will ignore any parameter OpenDialog 0 Events followed by Answer Depending on the answer, it will fire the event called \"OnDialogNo\" or \"OnDialogYes\" for the Actor that executed it. Normally it would mean the executed Actor would be the Player, but in this function there's no hardcoded check for the Player.","title":"OpenDialog"},{"location":"opendialog/#opendialog","text":"Opens the Yes/No dialog Unused/Unfinished Postal3Script function","title":"OpenDialog"},{"location":"playerkarma/","text":"PlayerKarma Sets the Player's karma globally Syntax (from ai_st_init.p3s) // KARMA AMOUNTS Const KARMA_LOW,5 Const KARMA_MED,10 Const KARMA_HIGH,25 Const KARMA_HALF,50 Const KARMA_FULL,100 PlayerKarma hide -- Hides the karma icon PlayerKarma show -- Shows the karma icon PlayerKarma good -- Player is now on good path (unused) PlayerKarma evil -- Player is now on evil path (unused) PlayerKarma +-*/=[value] -- Modifies the karma's value Example // from ai_mission_sbe.p3s xpt_OnPaparazziEscaped { actions { SetAttr \"PhotoTaken 1\" MissionLog fail,photos // Player lost some good guy points CheckAttr \"PhotoTaken PlayerKarma -KARMA_HIGH\" } }","title":"PlayerKarma"},{"location":"playerkarma/#playerkarma","text":"Sets the Player's karma globally","title":"PlayerKarma"},{"location":"playvideo/","text":"PlayVideo Plays a .bik movie from \"Postal III/p3/media\" folder Syntax PlayVideo 'filename', 'fade_in_time', 'fade_out_time', 'console_command(s) to execute after Video finished playing' Technical Details Will execute \"p3_playvideo\" or \"p3_playvideo_exitcommand\" console commands Syntax for \"p3_playvideo_exitcommand\" is 'filename', 'exitcommand', 'fadein', 'fadeout' Syntax for \"p3_playvideo\" is 'filename', 'fadein', 'fadeout' Example // Fades in and fades out in 1.5 seconds PlayVideo placeholder, 1.5, 1.5 // Fades in and fades out in 1 second PlayVideo thebigrevenge, 1, 1 // Alternative (requires pcc entity in the level) EntFireInput \"pcc,Command:playvideo thebigrevenge\" // Another alternative // Will play music, and text after video had ended EntFireInput \"pcc,Command:playgamesound Music.IntroStinger\" EntFireInput \"pcc,Command:video_exitcmd notimportant gameui_show_p3_briefdlg #CR_MONDAY_BRIEFING\" Issues * Depending on which command will you use for video playing, it will become unskippable. * Postal3Script is too slow to play an intro movie on the beginning of a map, causing it you to see the map for a brief second before eventually playing the movie.","title":"PlayVideo"},{"location":"playvideo/#playvideo","text":"Plays a .bik movie from \"Postal III/p3/media\" folder","title":"PlayVideo"},{"location":"say/","text":"Say Make an NPC say a specified \"sentence\" type voice line Uses the name of the sentence in the related NPC's sentence script located in \"Postal III\\p3\\scripts\\Sentences\". The voice prefix is not required, \"GAY_ONFIRE\" can lose the \"GAY_\" part and instead just be \"ONFIRE\" for example... If you want the player to say something you must EntFireInput logic_playerproxy to do a generic say instead, like this: \"EntFireInput proxy,Say:SENTENCENAME\". // Say a voice line... Say ZOMB_MOAN // Pick and say one of these voice lines randomly... Say ZOMB_MOAN,ZOMB_CURSE,ZOMB_HIT // Pick and say one of these voice lines randomly, and specify the optional sentence // priority parameter (TODO: Need to make sure that is actually what that parameter even is) - Tim // SENTENCE PRIORITY PARAMETERS // SENTENCE_PRIORITY_NORMAL = 0, // SENTENCE_PRIORITY_MEDIUM = 1, // SENTENCE_PRIORITY_HIGH = 2, Say ZOMB_MOAN,ZOMB_CURSE,ZOMB_HIT,0","title":"Say"},{"location":"say/#say","text":"Make an NPC say a specified \"sentence\" type voice line Uses the name of the sentence in the related NPC's sentence script located in \"Postal III\\p3\\scripts\\Sentences\". The voice prefix is not required, \"GAY_ONFIRE\" can lose the \"GAY_\" part and instead just be \"ONFIRE\" for example... If you want the player to say something you must EntFireInput logic_playerproxy to do a generic say instead, like this: \"EntFireInput proxy,Say:SENTENCENAME\". // Say a voice line... Say ZOMB_MOAN // Pick and say one of these voice lines randomly... Say ZOMB_MOAN,ZOMB_CURSE,ZOMB_HIT // Pick and say one of these voice lines randomly, and specify the optional sentence // priority parameter (TODO: Need to make sure that is actually what that parameter even is) - Tim // SENTENCE PRIORITY PARAMETERS // SENTENCE_PRIORITY_NORMAL = 0, // SENTENCE_PRIORITY_MEDIUM = 1, // SENTENCE_PRIORITY_HIGH = 2, Say ZOMB_MOAN,ZOMB_CURSE,ZOMB_HIT,0","title":"Say"},{"location":"showmessage_showhint/","text":"- ShowMessage Prints out message to the screen Supports strings from \"Postal III/p3/resource/p3_english.txt\" (or from any other file that contains valid strings) Equivalent to Half-Life 2's UserMessageBegin Uses data from \"Postal III/p3/scripts/HudLayout.res\" (Plus \"channels_manifest.txt\" and \"HudAnimations.txt\") Example // This will print on the screen ShowMessage \"#P3_CM_INSANE1\" // This will print on the P3Karma channel ShowMessage \"[Ja-ja, nat\u00fcrlich!], $P3Karma\" // This will print on the P3Mission channel ShowMessage \"[Puff! Puff! Puff!], $P3Mission\" // This will print on the P3Debug channel ShowMessage \"[Meow!... I'm on Fear!!!], $P3Debug\" // You have arrested 0-3 of 3 hobos ChangeAttr \"HoboArrested 1\" ShowMessage \"[You have arrested {0:v} of 3 hobos], $P3Mission, HoboArrested\" // Slightly more complex syntax IfAttr \"caller.ea_Manner == Manner:PussyCat and mis_004 >= 0 Block begin,execute\" TargetEntByName mg_004 SetAttr \"mis_004 cat_counter\" IfAttr \"mis_004 >= target.condition SetAttr mis_004 target.condition\" ShowMessage \"[ {0:v} of {1:v} deceased cats have been obtained], $P3Mission, mis_004, target.condition\" Block end - ShowHint Unused Postal3Script function Karma hinting is done automatically, so this has been left completely unused Uses data from \"Postal III/p3/scripts/hints_manifest.txt\" Example // First found in 'ai_st1_common.p3s' Line 954 ShowHint hintCat // First found in 'ai_st6_missions.p3s' Line 528 ShowHint hintKarmaDown ShowHint hintKarmaUp","title":"ShowMessage, ShowHint"},{"location":"showmessage_showhint/#-showmessage","text":"Prints out message to the screen Supports strings from \"Postal III/p3/resource/p3_english.txt\" (or from any other file that contains valid strings) Equivalent to Half-Life 2's UserMessageBegin Uses data from \"Postal III/p3/scripts/HudLayout.res\" (Plus \"channels_manifest.txt\" and \"HudAnimations.txt\")","title":"- ShowMessage"},{"location":"visible/","text":"Visible Check if a specified entity is visible If 'Senses' is turned off, the NPC will never be able to \"see\" the target. // Make sure we are able to see Senses true // If we can fire our weapon and we can see the targeted entity... IfAttr \"Timer:tCanFire == 0 and Visible:target == true Block begin\" // Try to shoot at the target, say we're shooting, and reset our fire timer ExecutePattern st_combat_logic.xpt_TryShoot ExecutePattern .xpt_SayShoot ExecutePattern .xpt_SetFireTimer Block end","title":"Visible"},{"location":"visible/#visible","text":"Check if a specified entity is visible If 'Senses' is turned off, the NPC will never be able to \"see\" the target. // Make sure we are able to see Senses true // If we can fire our weapon and we can see the targeted entity... IfAttr \"Timer:tCanFire == 0 and Visible:target == true Block begin\" // Try to shoot at the target, say we're shooting, and reset our fire timer ExecutePattern st_combat_logic.xpt_TryShoot ExecutePattern .xpt_SayShoot ExecutePattern .xpt_SetFireTimer Block end","title":"Visible"},{"location":"voiceprefix/","text":"VoicePrefix Check the prefix of an NPC's voice The voice prefix can be found in the related NPC's sentence script located in \"Postal III\\p3\\scripts\\Sentences\". Everything before the underscore is the voice prefix. // If we don't use the \"whore\" npc voice prefix // say a \"sentence\" type voice line about a cop going crazy // (whore npc's don't have any lines recorded for this scenario) IfAttr \"VoicePrefix:self != String:WHR Say MADCOP\"","title":"VoicePrefix"},{"location":"voiceprefix/#voiceprefix","text":"Check the prefix of an NPC's voice The voice prefix can be found in the related NPC's sentence script located in \"Postal III\\p3\\scripts\\Sentences\". Everything before the underscore is the voice prefix. // If we don't use the \"whore\" npc voice prefix // say a \"sentence\" type voice line about a cop going crazy // (whore npc's don't have any lines recorded for this scenario) IfAttr \"VoicePrefix:self != String:WHR Say MADCOP\"","title":"VoicePrefix"}]}