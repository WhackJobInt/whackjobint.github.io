{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Home \uf0c1 Note This site is a Work in Progress! Many functions are still not covered yet, or those that are already covered, their documentation are subject to change! Last Update: 01.11.2024 ( Changelog ) Did You Know? There are a total of 125 Postal3Script functions. NPCs/Entities with no P3S behavior defined will fallback to the default_behavior behavior Postal3Script \uf0c1 What is Postal3Script? Debugging Postal3Script Development/WIP Files Syntax Highlighter Embedded (Hardcoded)/Engine \uf0c1 Embedded Attributes Embedded Events Embedded Behaviors Animation Events Input Functions Tutorials \uf0c1 Events Blocks, Conditional States, Patterns, Execution Patterns Randomization Attribute Checking \uf0c1 IfAttr, SetAttr, CheckAttr, ChangeAttr, RemoveAttr Object Categories \uf0c1 Manner Faction ItemType String Timer Object DistTo AngleTo Visible HasWeapon RelationTo Relation Name Ammo Ignore Karma VoicePrefix State Functions \uf0c1 State, Pattern, ExecutePattern Wait, WaitForEnd, Repeat, Return StateMatrix CallState, CallPattern StoreActivityPattern, ExecuteActivityPattern, ClearActivityPattern SendState, SendPattern Misc Functions \uf0c1 AreaEvent Effect FireEvent, FireEventEx, FireUser, OnUser, FireInput, EntFireUser, EntFireInput Item, SpawnItem AddFluid Anchor, TargetAnchor NPC Functions \uf0c1 Say EmitSound Gesture, ResetGesture, Sequence, ResetSequence Headblob NPC NPC Behavior Functions \uf0c1 Aim, Face Snatch, Unsnatch Senses, LookAt, LookOut Crouch, Lean Busy, Hate Follow, PlayerFriendly CatDervish StunOut EnableGibs EnterVehicle Squad Functions \uf0c1 SetSquad, SetSquadRelation, RemoveSquadRelation RallySquad Targeting Functions \uf0c1 TargetEntByName SendTarget2Caller, SendCaller CheckTarget, CheckLOS ResetTarget, IgnoreTarget, SetTarget TargetEnemy, TargetPlayer, TargetCaller, TargetItem, TargetVehicle, TargetHostage, TargetCrosshair TargetToMem, TargetFromMem, CallerToMem, ClearMem AssistTarget, AssistEnemy, ArrestTarget, BusyTarget Relationship Movement Functions \uf0c1 Move, MoveToLean, MoveToTarget, MoveToTargetLKP FreeMovement, FreeMovementParams TravelByPathTrack SetHintGroup, SetAreaGroup, SetLeanGroup, AvoidProhibitedArea Turn, TurnSpeed SetActPack Attack Functions \uf0c1 Hit Push Weapon, Reload, ThrowGrenade Mission Functions \uf0c1 AttributeProgressBar MissionLog, MissionSave, MissionBriefing ShowMessage, ShowHint EndMission PlayerKarma PlayVideo OpenDialog Deleted Functions \uf0c1 ActBusy Arm HolsterWeapon DesertSquad Fear Mission Script Files (Pre-Path) \uf0c1 Paradise Bridge PDB Porn World PW Diseased Cat Roundup DCR Jen Walcotts Bodyguard JWB Cash Mart Robbery CM Mission Script Files (Good Path) \uf0c1 Note Work in Progress Mission Script Files (Evil Path) \uf0c1 Note Work in Progress","title":"Index"},{"location":"#home","text":"Note This site is a Work in Progress! Many functions are still not covered yet, or those that are already covered, their documentation are subject to change! Last Update: 01.11.2024 ( Changelog ) Did You Know? There are a total of 125 Postal3Script functions. NPCs/Entities with no P3S behavior defined will fallback to the default_behavior behavior","title":"Home"},{"location":"#postal3script","text":"What is Postal3Script? Debugging Postal3Script Development/WIP Files Syntax Highlighter","title":"Postal3Script"},{"location":"#embedded-hardcodedengine","text":"Embedded Attributes Embedded Events Embedded Behaviors Animation Events Input Functions","title":"Embedded (Hardcoded)/Engine"},{"location":"#tutorials","text":"Events Blocks, Conditional States, Patterns, Execution Patterns Randomization","title":"Tutorials"},{"location":"#attribute-checking","text":"IfAttr, SetAttr, CheckAttr, ChangeAttr, RemoveAttr","title":"Attribute Checking"},{"location":"#object-categories","text":"Manner Faction ItemType String Timer Object DistTo AngleTo Visible HasWeapon RelationTo Relation Name Ammo Ignore Karma VoicePrefix","title":"Object Categories"},{"location":"#state-functions","text":"State, Pattern, ExecutePattern Wait, WaitForEnd, Repeat, Return StateMatrix CallState, CallPattern StoreActivityPattern, ExecuteActivityPattern, ClearActivityPattern SendState, SendPattern","title":"State Functions"},{"location":"#misc-functions","text":"AreaEvent Effect FireEvent, FireEventEx, FireUser, OnUser, FireInput, EntFireUser, EntFireInput Item, SpawnItem AddFluid Anchor, TargetAnchor","title":"Misc Functions"},{"location":"#npc-functions","text":"Say EmitSound Gesture, ResetGesture, Sequence, ResetSequence Headblob NPC","title":"NPC Functions"},{"location":"#npc-behavior-functions","text":"Aim, Face Snatch, Unsnatch Senses, LookAt, LookOut Crouch, Lean Busy, Hate Follow, PlayerFriendly CatDervish StunOut EnableGibs EnterVehicle","title":"NPC Behavior Functions"},{"location":"#squad-functions","text":"SetSquad, SetSquadRelation, RemoveSquadRelation RallySquad","title":"Squad Functions"},{"location":"#targeting-functions","text":"TargetEntByName SendTarget2Caller, SendCaller CheckTarget, CheckLOS ResetTarget, IgnoreTarget, SetTarget TargetEnemy, TargetPlayer, TargetCaller, TargetItem, TargetVehicle, TargetHostage, TargetCrosshair TargetToMem, TargetFromMem, CallerToMem, ClearMem AssistTarget, AssistEnemy, ArrestTarget, BusyTarget Relationship","title":"Targeting Functions"},{"location":"#movement-functions","text":"Move, MoveToLean, MoveToTarget, MoveToTargetLKP FreeMovement, FreeMovementParams TravelByPathTrack SetHintGroup, SetAreaGroup, SetLeanGroup, AvoidProhibitedArea Turn, TurnSpeed SetActPack","title":"Movement Functions"},{"location":"#attack-functions","text":"Hit Push Weapon, Reload, ThrowGrenade","title":"Attack Functions"},{"location":"#mission-functions","text":"AttributeProgressBar MissionLog, MissionSave, MissionBriefing ShowMessage, ShowHint EndMission PlayerKarma PlayVideo OpenDialog","title":"Mission Functions"},{"location":"#deleted-functions","text":"ActBusy Arm HolsterWeapon DesertSquad Fear","title":"Deleted Functions"},{"location":"#mission-script-files-pre-path","text":"Paradise Bridge PDB Porn World PW Diseased Cat Roundup DCR Jen Walcotts Bodyguard JWB Cash Mart Robbery CM","title":"Mission Script Files (Pre-Path)"},{"location":"#mission-script-files-good-path","text":"Note Work in Progress","title":"Mission Script Files (Good Path)"},{"location":"#mission-script-files-evil-path","text":"Note Work in Progress","title":"Mission Script Files (Evil Path)"},{"location":"2009/","text":"Postal III Beta 2009 P3S Files \uf0c1 2009 \uf0c1 The following files are from the leaked 2009 Xbox 360 build, they will not work with the retail version of Postal III. 2009 Postal3Script Files TODO The test files ai_st1_ -> ai_st9_ might contain interesting tidbits when compared to retail. Differences from Retail \uf0c1 General \uf0c1 Player's karma value was held inside the karma attribute inside the Player's P3S AI ea_armed was always initialized for the AI on spawn The distance for checking hint nodes for NPCs was increased from 3000 to 5000 NPCs free movement param was set to hint_all ai_matrix.p3s \uf0c1 The Player Faction index was 5, while Animals was 4, in retail the Player is index 6 and Animals is index 5 Factions that were not defined yet: Items Taliban Venezuela ZombieBoss Anchor Manners that were not defined yet: GayGuy NerdyNerd Bystander Lowlife Anchor Manners that were redefined: Wanker -> LameWanker Medic -> MedicDoc Dog -> StrayDog Cat -> PussyCat Rhino -> RhinoCow Manners that were deleted: Boy Types that were not declared yet for item_types : fxTaserBeam Catnip Acid Anchor Item and social matrix definitions for Pigeons and Rhinos were removed. Events declared are different (testing used by TM) ai_st_init.p3s \uf0c1 Tip States declared here will become states of default_behavior Missing constant declarations st_player was declared here st_p3_init_common is missing st_p3_init_weapon is missing st_pl is missing ai_st_utilities.p3s \uf0c1 Too much removals(-184) and additions(+474) to list. ai_activities.p3s \uf0c1 Missing declarations (movement_activities_packs): melee_idle melee_box_idle civil_idle idle idle_handsback idle_zombie test_Rhino_Jog test_Rhino_Walk default_run walk_zombie walk_slow walk_funny walk_joggy run_wounded Missing declarations (activities): combat_melee combat_animal combat_melee_feedback melee_attack g_greet_normal g_greet_sleazy g_reaction_excited g_reaction_pissing g_dialogue_point reaction_shocked g_emote_shakeoff g_emote_lol g_emote_bow g_emote_afraid_slave g_onfire arguing idle_shopkeeper melee_idle g_cellphone melee_attack (declared again) g_cat_Tail_lie g_rhino_unspit zomb_eat_corpse mth_idle_actions mth_agro_actions g_mth_hold_item Missing declarations (sounds): pigeon_meow male_blame male_cop_warn female_blame female_cop_warn","title":"2009 P3S Files"},{"location":"2009/#postal-iii-beta-2009-p3s-files","text":"","title":"Postal III Beta 2009 P3S Files"},{"location":"2009/#2009","text":"The following files are from the leaked 2009 Xbox 360 build, they will not work with the retail version of Postal III. 2009 Postal3Script Files TODO The test files ai_st1_ -> ai_st9_ might contain interesting tidbits when compared to retail.","title":"2009"},{"location":"2009/#differences-from-retail","text":"","title":"Differences from Retail"},{"location":"2009/#general","text":"Player's karma value was held inside the karma attribute inside the Player's P3S AI ea_armed was always initialized for the AI on spawn The distance for checking hint nodes for NPCs was increased from 3000 to 5000 NPCs free movement param was set to hint_all","title":"General"},{"location":"2009/#ai_matrixp3s","text":"The Player Faction index was 5, while Animals was 4, in retail the Player is index 6 and Animals is index 5 Factions that were not defined yet: Items Taliban Venezuela ZombieBoss Anchor Manners that were not defined yet: GayGuy NerdyNerd Bystander Lowlife Anchor Manners that were redefined: Wanker -> LameWanker Medic -> MedicDoc Dog -> StrayDog Cat -> PussyCat Rhino -> RhinoCow Manners that were deleted: Boy Types that were not declared yet for item_types : fxTaserBeam Catnip Acid Anchor Item and social matrix definitions for Pigeons and Rhinos were removed. Events declared are different (testing used by TM)","title":"ai_matrix.p3s"},{"location":"2009/#ai_st_initp3s","text":"Tip States declared here will become states of default_behavior Missing constant declarations st_player was declared here st_p3_init_common is missing st_p3_init_weapon is missing st_pl is missing","title":"ai_st_init.p3s"},{"location":"2009/#ai_st_utilitiesp3s","text":"Too much removals(-184) and additions(+474) to list.","title":"ai_st_utilities.p3s"},{"location":"2009/#ai_activitiesp3s","text":"Missing declarations (movement_activities_packs): melee_idle melee_box_idle civil_idle idle idle_handsback idle_zombie test_Rhino_Jog test_Rhino_Walk default_run walk_zombie walk_slow walk_funny walk_joggy run_wounded Missing declarations (activities): combat_melee combat_animal combat_melee_feedback melee_attack g_greet_normal g_greet_sleazy g_reaction_excited g_reaction_pissing g_dialogue_point reaction_shocked g_emote_shakeoff g_emote_lol g_emote_bow g_emote_afraid_slave g_onfire arguing idle_shopkeeper melee_idle g_cellphone melee_attack (declared again) g_cat_Tail_lie g_rhino_unspit zomb_eat_corpse mth_idle_actions mth_agro_actions g_mth_hold_item Missing declarations (sounds): pigeon_meow male_blame male_cop_warn female_blame female_cop_warn","title":"ai_activities.p3s"},{"location":"2010/","text":"Postal III Beta \"GameCom\" 2010 P3S Files \uf0c1 2010 \uf0c1 The following files are from the leaked 2010 \"GamesCom\" Xbox 360 build, they will not work with the retail version of Postal III. 2010 \"GameScom\" Postal3Script Files","title":"2010 \"GamesCom\" P3S Files"},{"location":"2010/#postal-iii-beta-gamecom-2010-p3s-files","text":"","title":"Postal III Beta \"GameCom\" 2010 P3S Files"},{"location":"2010/#2010","text":"The following files are from the leaked 2010 \"GamesCom\" Xbox 360 build, they will not work with the retail version of Postal III. 2010 \"GameScom\" Postal3Script Files","title":"2010"},{"location":"TBD/","text":"Unfinished! \uf0c1 This page of Postal3Script has not worked on yet! Sorry! We're working on it!","title":"PA (Police Academy) TBD"},{"location":"TBD/#unfinished","text":"This page of Postal3Script has not worked on yet! Sorry! We're working on it!","title":"Unfinished!"},{"location":"animationevents/","text":"Animation Events \uf0c1 Character models' animation files have embedded/scripted events in them, which call P3S events. Unlike every other engine attributes or events, these ones can be edited by decompiling animation files. Note Animation Events will always be called on the host. Animation Events are animation frame specific. The syntax for calling a P3S event on a frame is: { event AE_P3_SCRIPTED_ANIM_EVENT 33 \"EVENTNAMEGOESHERE\" } This would call OnAnimEVENTNAMEGOESHERE P3S event on frame 33 Not all models/animations have script events Warning Human models do not share animations, they have individual animation files, if you edit one, you MUST edit the rest of them to be consistent! Due to Postal 3 having a different MDL format, it's not possible to decompile animation files and then recompile them back again, you will have to use a custom MDL file to create new or override animations. Cat (cat.mdl/cat_animations.mdl) \uf0c1 Sequence/Gesture Name Postal3Script Event idle_take OnAnimTake Dog (champ.mdl/champ_animations.mdl) \uf0c1 Sequence/Gesture Name Postal3Script Event idle_poo OnAnimPOO idle_take OnAnimTAKE idle_give OnAnimGIVE idle_bark_1 OnAnimBARK idle_eat_out OnAnimYUMMY Rhino (rhino.mdl) \uf0c1 Warning Rhino calls multiple P3S events in one sequence! Sequence/Gesture Name Postal3Script Event Run_Gallop OnAnimRhinoStompFR Run_Gallop OnAnimRhinoStompBR Run_Gallop OnAnimRhinoStompBL Run_Gallop OnAnimRhinoStompFL All Human Models \uf0c1 Warning Some scripted events are missing from certain NPCs (i.e. KrotchyNPC), the events below are extracted from M_Avg and F_Avg anims (which are copy pasted onto other NPC models)! Sequence/Gesture Name Postal3Script Event dialogue_no OnAnimHEY env_lifting OnAnimTAKE env_discard OnAnimDROP env_throw OnAnimTHROW env_phone_in OnAnimTAKE env_phone_out OnAnimDROP melee_attack2 OnAnimHIT melee_attack3 OnAnimHIT melee_attack4 OnAnimPUSH_MEDIUM melee_attack5 OnAnimHIT melee_attack6 OnAnimHIT melee_attack7 OnAnimHIT melee_push2 OnAnimPUSH_HEAVY melee_box_01_L OnAnimHIT (Male only) melee_box_01_R OnAnimHIT (Male only) melee_box_02_L OnAnimHIT (Male only) melee_box_02_R OnAnimHIT (Male only) melee_box_03 OnAnimHIT (Male only) melee_push OnAnimPUSH_HEAVY melee_push_easy OnAnimPUSH_EASY melee_kick1 OnAnimPUSH_HEAVY melee_kick2 OnAnimKICK zombie_barf OnAnimBARF g_idle_Drinking OnAnimYUM (Male only) g_idle_Feeding OnAnimYUM (Male only)","title":"Animation Events"},{"location":"animationevents/#animation-events","text":"Character models' animation files have embedded/scripted events in them, which call P3S events. Unlike every other engine attributes or events, these ones can be edited by decompiling animation files. Note Animation Events will always be called on the host. Animation Events are animation frame specific. The syntax for calling a P3S event on a frame is: { event AE_P3_SCRIPTED_ANIM_EVENT 33 \"EVENTNAMEGOESHERE\" } This would call OnAnimEVENTNAMEGOESHERE P3S event on frame 33 Not all models/animations have script events Warning Human models do not share animations, they have individual animation files, if you edit one, you MUST edit the rest of them to be consistent! Due to Postal 3 having a different MDL format, it's not possible to decompile animation files and then recompile them back again, you will have to use a custom MDL file to create new or override animations.","title":"Animation Events"},{"location":"animationevents/#cat-catmdlcat_animationsmdl","text":"Sequence/Gesture Name Postal3Script Event idle_take OnAnimTake","title":"Cat (cat.mdl/cat_animations.mdl)"},{"location":"animationevents/#dog-champmdlchamp_animationsmdl","text":"Sequence/Gesture Name Postal3Script Event idle_poo OnAnimPOO idle_take OnAnimTAKE idle_give OnAnimGIVE idle_bark_1 OnAnimBARK idle_eat_out OnAnimYUMMY","title":"Dog (champ.mdl/champ_animations.mdl)"},{"location":"animationevents/#rhino-rhinomdl","text":"Warning Rhino calls multiple P3S events in one sequence! Sequence/Gesture Name Postal3Script Event Run_Gallop OnAnimRhinoStompFR Run_Gallop OnAnimRhinoStompBR Run_Gallop OnAnimRhinoStompBL Run_Gallop OnAnimRhinoStompFL","title":"Rhino (rhino.mdl)"},{"location":"animationevents/#all-human-models","text":"Warning Some scripted events are missing from certain NPCs (i.e. KrotchyNPC), the events below are extracted from M_Avg and F_Avg anims (which are copy pasted onto other NPC models)! Sequence/Gesture Name Postal3Script Event dialogue_no OnAnimHEY env_lifting OnAnimTAKE env_discard OnAnimDROP env_throw OnAnimTHROW env_phone_in OnAnimTAKE env_phone_out OnAnimDROP melee_attack2 OnAnimHIT melee_attack3 OnAnimHIT melee_attack4 OnAnimPUSH_MEDIUM melee_attack5 OnAnimHIT melee_attack6 OnAnimHIT melee_attack7 OnAnimHIT melee_push2 OnAnimPUSH_HEAVY melee_box_01_L OnAnimHIT (Male only) melee_box_01_R OnAnimHIT (Male only) melee_box_02_L OnAnimHIT (Male only) melee_box_02_R OnAnimHIT (Male only) melee_box_03 OnAnimHIT (Male only) melee_push OnAnimPUSH_HEAVY melee_push_easy OnAnimPUSH_EASY melee_kick1 OnAnimPUSH_HEAVY melee_kick2 OnAnimKICK zombie_barf OnAnimBARF g_idle_Drinking OnAnimYUM (Male only) g_idle_Feeding OnAnimYUM (Male only)","title":"All Human Models"},{"location":"blocksconditional/","text":"Blocks, Conditional \uf0c1 In Postal3Script instead of brackets, you use blocks, this is similar to how LUA does it. Rules A block always begins with Block begin and ends with Block end Functions that support Blocks in conditionals: - IfAttr - CheckAttr TODO (?) Block seem to support Execute , what does it actually do? Begins with Block Begin,Execute and ends with Block End , in between can be placed code. Is it still working or is it a remnant from the past? Note this is only found in test scripts left by TM devs, it's not in any release scripts. Examples \uf0c1 pt_example { actions { // Let's randomize this attribute from 0 to 100.. SetAttr \"rnd 0:100\" // AND Keyword can be useful here too! IfAttr \"rnd < 9 AND ea_health < 100 Block begin\" // Code below will never run because we enter into another pattern. Pattern pt_secret Block end // You can also use blocks with CheckAttr CheckAttr \"myspecialattribute Block begin\" SetAttr \"rnd 45:100\" Block end // Let's check if it's higher than 50 // Pay attention to the block function! IfAttr \"rnd > 50 Block begin\" // Now here press tab once and start putting code in here! SetAttr \"rnd 50:100\" // By putting 'Return 1' here, this will return from the entire pattern! // Code below will never execute! Return 1 Block end // It wasn't over 50... so let's just enter another pattern. Pattern pt_fail } } You can also put blocks inside blocks, but sooner or later it'll be a mangled spaghetti. // from ai_mission_bdk.p3s, snipped pt_example { actions { IfAttr \"TaskCombat == TC_SHOOT Block begin\" IfAttr \"TaskLogicPath < 7 Block begin\" Timer tTaskCombat,5:5 IfAttr \"ThrownGrenade < MAX_LIVE_GRENADE SetAttr TaskCombat TC_THROW\" IfAttr \"ThrownGrenade >= MAX_LIVE_GRENADE SetAttr TaskCombat TC_MOVETO\" Block end IfAttr \"TaskLogicPath >= 7 Block begin\" Timer tTaskCombat,3:2 SetAttr \"TaskCombat TC_MOVETO\" Block end Block end } }","title":"Blocks, Conditional"},{"location":"blocksconditional/#blocks-conditional","text":"In Postal3Script instead of brackets, you use blocks, this is similar to how LUA does it. Rules A block always begins with Block begin and ends with Block end Functions that support Blocks in conditionals: - IfAttr - CheckAttr TODO (?) Block seem to support Execute , what does it actually do? Begins with Block Begin,Execute and ends with Block End , in between can be placed code. Is it still working or is it a remnant from the past? Note this is only found in test scripts left by TM devs, it's not in any release scripts.","title":"Blocks, Conditional"},{"location":"blocksconditional/#examples","text":"pt_example { actions { // Let's randomize this attribute from 0 to 100.. SetAttr \"rnd 0:100\" // AND Keyword can be useful here too! IfAttr \"rnd < 9 AND ea_health < 100 Block begin\" // Code below will never run because we enter into another pattern. Pattern pt_secret Block end // You can also use blocks with CheckAttr CheckAttr \"myspecialattribute Block begin\" SetAttr \"rnd 45:100\" Block end // Let's check if it's higher than 50 // Pay attention to the block function! IfAttr \"rnd > 50 Block begin\" // Now here press tab once and start putting code in here! SetAttr \"rnd 50:100\" // By putting 'Return 1' here, this will return from the entire pattern! // Code below will never execute! Return 1 Block end // It wasn't over 50... so let's just enter another pattern. Pattern pt_fail } } You can also put blocks inside blocks, but sooner or later it'll be a mangled spaghetti. // from ai_mission_bdk.p3s, snipped pt_example { actions { IfAttr \"TaskCombat == TC_SHOOT Block begin\" IfAttr \"TaskLogicPath < 7 Block begin\" Timer tTaskCombat,5:5 IfAttr \"ThrownGrenade < MAX_LIVE_GRENADE SetAttr TaskCombat TC_THROW\" IfAttr \"ThrownGrenade >= MAX_LIVE_GRENADE SetAttr TaskCombat TC_MOVETO\" Block end IfAttr \"TaskLogicPath >= 7 Block begin\" Timer tTaskCombat,3:2 SetAttr \"TaskCombat TC_MOVETO\" Block end Block end } }","title":"Examples"},{"location":"changelog/","text":"Changelog for Postal3Script Docs \uf0c1 This is the changelog for Postal3Script docs. If you have any issues related to Postal3Script Docs, let us know here by opening a new issue. 01.11.2024 \uf0c1 Removed old Postal 3 Angel mentions Up to date with Postal III Ultrapatch and Ultrapatch Angel Added Postal III Beta P3S files 16.06.2024 \uf0c1 Added Postal 3 Angel-relevant information all over the docs 28.01.2024 \uf0c1 Added Bug section for Manner and Faction . Removed mentions of Catharsis Reborn fixing Postal 3 bugs Renamed Ammo 's Warning section to Broken Feature , so it makes more sense and no one will attempt using it Added more possible State parameters Fixed the index page being outdated when compared to the sidebar Few grammar/formatting fixes (english is hard!), some explanations rewritten 21.07.2023 \uf0c1 Added Randomization tutorial. Finished all tutorials. Added a warning for Follow function. Finished FireEvent page. Updated Input Functions page to include functions other than void types. 20.07.2023 \uf0c1 Updated Animation Events page, now it uses a table. Updated the formatting of main pages, they should now look much nicer. Updated Embedded Behaviors page, the explanations should be now less confusing than before. Added Input Functions page We are in 2023 now... welcome back 8 months later! 28.11.2022 \uf0c1 Added scripts.zip to \"What is Postal3Script?\" page, contains the content of P3's scripts folder Updated descriptions of embedded events 16.11.2022 \uf0c1 Added \"Animation Events\" page Added \"Embedded Behaviors\" page, all hardcoded Postal3Script scripting have now been documented. 14.11.2022 \uf0c1 Fixed invalid parameter on \"Timer\" page Updated \"Item\" page, expanded Warning Updated Debugging page, added one more console command which might be useful Updated \"What is Postal3Script?\" page, P3S is a finite state machine Updated Events page, gave an explanation to callers Reorganized subcategories, added new planned ones Updated Embedded Events, categorized them and gave confusing events an explanation what they do 17.10.2022 \uf0c1 Rewrote \"Ignore\" page, it checks if a pointer was already ignored, and not that it sets ignoring. Added \"Anchor, TargetAnchor\" page. Updated the Gestures page to have \"Sequence\" function Updated \"Wait, WaitForEnd, Repeat\" page to have \"Return\" function Added \"ea_gibs\" to \"Embedded Attributes\" page Updated \"AreaEvent\" note 07.10.2022 \uf0c1 Description of CheckAttr corrected, it checks if an attribute exists or not (was created via SetAttr before), and not if it's 0 or 1. Added AreaEvent page, seperated it from Fire functions in Misc functions. Added Call to \"CallState, CallPattern, Call\" page, marking the whole page as complete. Added \"SendState, SendPattern\" page, it is complete. Updated \"StateMatrix\" page to have example code from ai_matrix.p3s. Updated \"Embedded Attributes\" page to be much more precise in terms of descriptions. 30.08.2022 \uf0c1 Added Debugging page, which explains debugging Postal3Script. Corrected ChangeAttr description, working between 0-100 values is not a bug , minimum and maximum values need to be set via SetAttr. Corrected Postal3Script limitation explanations. Fixed missing href for \"Gesture, ResetGesture, ResetSequence\" on index page.","title":"Changelog"},{"location":"changelog/#changelog-for-postal3script-docs","text":"This is the changelog for Postal3Script docs. If you have any issues related to Postal3Script Docs, let us know here by opening a new issue.","title":"Changelog for Postal3Script Docs"},{"location":"changelog/#01112024","text":"Removed old Postal 3 Angel mentions Up to date with Postal III Ultrapatch and Ultrapatch Angel Added Postal III Beta P3S files","title":"01.11.2024"},{"location":"changelog/#16062024","text":"Added Postal 3 Angel-relevant information all over the docs","title":"16.06.2024"},{"location":"changelog/#28012024","text":"Added Bug section for Manner and Faction . Removed mentions of Catharsis Reborn fixing Postal 3 bugs Renamed Ammo 's Warning section to Broken Feature , so it makes more sense and no one will attempt using it Added more possible State parameters Fixed the index page being outdated when compared to the sidebar Few grammar/formatting fixes (english is hard!), some explanations rewritten","title":"28.01.2024"},{"location":"changelog/#21072023","text":"Added Randomization tutorial. Finished all tutorials. Added a warning for Follow function. Finished FireEvent page. Updated Input Functions page to include functions other than void types.","title":"21.07.2023"},{"location":"changelog/#20072023","text":"Updated Animation Events page, now it uses a table. Updated the formatting of main pages, they should now look much nicer. Updated Embedded Behaviors page, the explanations should be now less confusing than before. Added Input Functions page We are in 2023 now... welcome back 8 months later!","title":"20.07.2023"},{"location":"changelog/#28112022","text":"Added scripts.zip to \"What is Postal3Script?\" page, contains the content of P3's scripts folder Updated descriptions of embedded events","title":"28.11.2022"},{"location":"changelog/#16112022","text":"Added \"Animation Events\" page Added \"Embedded Behaviors\" page, all hardcoded Postal3Script scripting have now been documented.","title":"16.11.2022"},{"location":"changelog/#14112022","text":"Fixed invalid parameter on \"Timer\" page Updated \"Item\" page, expanded Warning Updated Debugging page, added one more console command which might be useful Updated \"What is Postal3Script?\" page, P3S is a finite state machine Updated Events page, gave an explanation to callers Reorganized subcategories, added new planned ones Updated Embedded Events, categorized them and gave confusing events an explanation what they do","title":"14.11.2022"},{"location":"changelog/#17102022","text":"Rewrote \"Ignore\" page, it checks if a pointer was already ignored, and not that it sets ignoring. Added \"Anchor, TargetAnchor\" page. Updated the Gestures page to have \"Sequence\" function Updated \"Wait, WaitForEnd, Repeat\" page to have \"Return\" function Added \"ea_gibs\" to \"Embedded Attributes\" page Updated \"AreaEvent\" note","title":"17.10.2022"},{"location":"changelog/#07102022","text":"Description of CheckAttr corrected, it checks if an attribute exists or not (was created via SetAttr before), and not if it's 0 or 1. Added AreaEvent page, seperated it from Fire functions in Misc functions. Added Call to \"CallState, CallPattern, Call\" page, marking the whole page as complete. Added \"SendState, SendPattern\" page, it is complete. Updated \"StateMatrix\" page to have example code from ai_matrix.p3s. Updated \"Embedded Attributes\" page to be much more precise in terms of descriptions.","title":"07.10.2022"},{"location":"changelog/#30082022","text":"Added Debugging page, which explains debugging Postal3Script. Corrected ChangeAttr description, working between 0-100 values is not a bug , minimum and maximum values need to be set via SetAttr. Corrected Postal3Script limitation explanations. Fixed missing href for \"Gesture, ResetGesture, ResetSequence\" on index page.","title":"30.08.2022"},{"location":"debugging/","text":"Debugging \uf0c1 Normally the game doesn't print out any errors, you need to have the developer 1 and p3_fsm_spew 1 console commands enabled. Doesn't require full game restart, only map change. Scrolling around in the console should show you which script are loaded and what lines have errors if there are any, like here so: If you want to print out your own debug messages, you'll have to settle for doing EntFireInput on the point_clientcommand entity in the map by doing EntFireInput pcc,Command: echo yourmessagehere in p3s. Here's an example: pt_mypattern { actions { // do stuff EntFireInput pcc,Command:echo pattern is pt_mypattern State st_start } } Visual Debugging \uf0c1 With npc_fsminfo you can display an NPC's attributes with values, timers, events, last executed action, and many more: You should point at an NPC before executing it. Here are a list of console commands that can be used in combination with that: // Related to P3S debugging p3_npc_show_mp p3_npc_draw_target p3_squad_debug p3_npc_draw_squad_relations p3_range_debug // Specifically for npc_fsminfo npc_show_memslots (default is 1) npc_show_attr (default is 1) npc_show_events (default is 0) npc_show_actions (default is 1) npc_show_timers (default is 0) npc_show_ea_attr (default is 0) External Execution / Help Guide \uf0c1 With p3_fsm_execute or p3_fsm_execute_ex you can execute any Postal3Script function for the Player or an NPC with name externally. Same rules apply here for P3S limitations! It will also display EVERY Postal3Script function you can use in a script file, so it is extremely useful. Must have p3_fsm_spew 1 enabled to display use examples! Note: Sometimes the console commands will not do anything, if that happens you need to load a different map! Syntax \uf0c1 p3_fsm_execute [P3S function] [command] -- Will always execute for Players p3_fsm_execute_ex [entity name] [P3S function] [command] -- Will always execute for named NPCs Examples \uf0c1 // Players p3_fsm_execute State st_mytestingstate // This will print out tutorials how to use it p3_fsm_execute SetAttr ? p3_fsm_execute IfAttr ? p3_fsm_execute ExecutePattern ? // Headblob for a named NPC p3_fsm_execute_ex someguy Headblob 1,HappyCat // This will kill every someguy NPC p3_fsm_execute_ex someguy SetAttr \"ea_health 0\" High Level Debugging \uf0c1 This one is not really useful to most people, it requires p3_fsm_spew , developer , and the use of npc_fsminfo in combination. Enable these 3 commands, then set npc_fsm_log to 1, this will print out the currently under debugging NPC's P3S executions at high level onto the console. General Advice \uf0c1 If you are not sure how Postal3Script works you can always check the functions on the left, every one of them have examples on their usage and how they work. Alternatively, like we sometimes do, search through TM's Postal3Script files for a function and try to understand how they work. I highly recommend to use a program like Notepad++ which is capable of searching through mass of files: That being said, hopefully this will give you less headache in understanding Postal3Script, and may help you modding the game. Make sure to keep Postal3Script's limitations in mind!","title":"Debugging Postal3Script"},{"location":"debugging/#debugging","text":"Normally the game doesn't print out any errors, you need to have the developer 1 and p3_fsm_spew 1 console commands enabled. Doesn't require full game restart, only map change. Scrolling around in the console should show you which script are loaded and what lines have errors if there are any, like here so: If you want to print out your own debug messages, you'll have to settle for doing EntFireInput on the point_clientcommand entity in the map by doing EntFireInput pcc,Command: echo yourmessagehere in p3s. Here's an example: pt_mypattern { actions { // do stuff EntFireInput pcc,Command:echo pattern is pt_mypattern State st_start } }","title":"Debugging"},{"location":"debugging/#visual-debugging","text":"With npc_fsminfo you can display an NPC's attributes with values, timers, events, last executed action, and many more: You should point at an NPC before executing it. Here are a list of console commands that can be used in combination with that: // Related to P3S debugging p3_npc_show_mp p3_npc_draw_target p3_squad_debug p3_npc_draw_squad_relations p3_range_debug // Specifically for npc_fsminfo npc_show_memslots (default is 1) npc_show_attr (default is 1) npc_show_events (default is 0) npc_show_actions (default is 1) npc_show_timers (default is 0) npc_show_ea_attr (default is 0)","title":"Visual Debugging"},{"location":"debugging/#external-execution-help-guide","text":"With p3_fsm_execute or p3_fsm_execute_ex you can execute any Postal3Script function for the Player or an NPC with name externally. Same rules apply here for P3S limitations! It will also display EVERY Postal3Script function you can use in a script file, so it is extremely useful. Must have p3_fsm_spew 1 enabled to display use examples! Note: Sometimes the console commands will not do anything, if that happens you need to load a different map!","title":"External Execution / Help Guide"},{"location":"debugging/#syntax","text":"p3_fsm_execute [P3S function] [command] -- Will always execute for Players p3_fsm_execute_ex [entity name] [P3S function] [command] -- Will always execute for named NPCs","title":"Syntax"},{"location":"debugging/#examples","text":"// Players p3_fsm_execute State st_mytestingstate // This will print out tutorials how to use it p3_fsm_execute SetAttr ? p3_fsm_execute IfAttr ? p3_fsm_execute ExecutePattern ? // Headblob for a named NPC p3_fsm_execute_ex someguy Headblob 1,HappyCat // This will kill every someguy NPC p3_fsm_execute_ex someguy SetAttr \"ea_health 0\"","title":"Examples"},{"location":"debugging/#high-level-debugging","text":"This one is not really useful to most people, it requires p3_fsm_spew , developer , and the use of npc_fsminfo in combination. Enable these 3 commands, then set npc_fsm_log to 1, this will print out the currently under debugging NPC's P3S executions at high level onto the console.","title":"High Level Debugging"},{"location":"debugging/#general-advice","text":"If you are not sure how Postal3Script works you can always check the functions on the left, every one of them have examples on their usage and how they work. Alternatively, like we sometimes do, search through TM's Postal3Script files for a function and try to understand how they work. I highly recommend to use a program like Notepad++ which is capable of searching through mass of files: That being said, hopefully this will give you less headache in understanding Postal3Script, and may help you modding the game. Make sure to keep Postal3Script's limitations in mind!","title":"General Advice"},{"location":"embeddedbehaviors/","text":"Embedded Behaviors \uf0c1 Embedded Behaviors are the default hardcoded AIs which Postal 3 sets to certain entities on map load. These behaviors can be given an AI (if they are unused) providing an actual script file with the behavior name. Tip The ' ? ' symbol in the tables mean they can be overridden by the entity's existing key values. If there are no hardcoded default values, it'll fallback to the Default AI 's values. Default AI (Error/Missing Behavior) \uf0c1 Note Postal 3 will fallback to this behavior if a behavior name couldn't be found, or it has too many errors in them. Warning default_behavior won't override init and start states if they were pre-defined in some way. Manner and Faction will re-use parameters from the entity. Behavior Name Init State Start State Manner Faction default_behavior st_def_init (?) st_default (?) ? ? Anchor AI \uf0c1 Note Anchor function will spawn an entity with this AI. Unused. Behavior Name Init State Start State Manner Faction Anchor st_def_init st_default Anchor Anchor Weapon AI \uf0c1 Note All weapons in the game have this AI. Unused. Broken Feature Scriptable weapons are not possible, weapons will not have any working P3S scripting attached to them. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Ultrapatch has fixed this AI, and is working correctly. Behavior Name Init State Start State Manner Faction itmWeapon itm_weapon st_default itmWeapon Items Flame FX AI \uf0c1 Note Any entity on fire will have a second entity spawned on them with this AI. Behavior Name Init State Start State Manner Faction Flame fx_init_flame fx_flame Flame Effects Catnip Mark AI \uf0c1 Note Spraying catnip will spawn an entity with this AI. Behavior Name Init State Start State Manner Faction bh_catnip_dot catnip_init catnip Catnip Effects Catnip AI \uf0c1 Note Catnip on the ground. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init itm_catnip itmCatnip Items Laserdot AI \uf0c1 Note The Laser's AI that comes out from the Player's laserpen. Behavior Name Init State Start State Manner Faction bh_laserdot st_init_laserdot st_laserdot LaserDot LaserDot Player AI \uf0c1 Note The Player's AI. Behavior Name Init State Start State Manner Faction bh_player st_player_init st_player Player Player Corpse AI \uf0c1 Note The corpse's AI. Reuses the victim's behavior, manner, and faction. Behavior Name Init State Start State Manner Faction ? st_init_corpse st_corpse ? ? Motorhead AI \uf0c1 Note Motorhead's AI. Behavior Name Init State Start State Manner Faction bh_motorhead st_init st_start MonkeyApe Animals Monkey AI \uf0c1 Note Monkey's AI (not Motorhead). Start and init states won't be overridden if they were already defined in the map. If there's no pre-defined behavior name then it'll fallback to default_behavior . Behavior Name Init State Start State Manner Faction ? p3_wild_monkey_init (?) p3_wild_monkey (?) MonkeyApe Animals Krotchy Grenade AI \uf0c1 Note Krotchy Grenade's AI. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init itm_toy itmKrotchyToy Items Seed AI \uf0c1 Note Leftover from unfinished Seed weapon. The projectile's AI. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init itm_seed itmSeed Items Taser FX AI \uf0c1 Note Taser's beam AI. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init fx_taserbeam fxTaserBeam Effects","title":"Embedded Behaviors"},{"location":"embeddedbehaviors/#embedded-behaviors","text":"Embedded Behaviors are the default hardcoded AIs which Postal 3 sets to certain entities on map load. These behaviors can be given an AI (if they are unused) providing an actual script file with the behavior name. Tip The ' ? ' symbol in the tables mean they can be overridden by the entity's existing key values. If there are no hardcoded default values, it'll fallback to the Default AI 's values.","title":"Embedded Behaviors"},{"location":"embeddedbehaviors/#default-ai-errormissing-behavior","text":"Note Postal 3 will fallback to this behavior if a behavior name couldn't be found, or it has too many errors in them. Warning default_behavior won't override init and start states if they were pre-defined in some way. Manner and Faction will re-use parameters from the entity. Behavior Name Init State Start State Manner Faction default_behavior st_def_init (?) st_default (?) ? ?","title":"Default AI (Error/Missing Behavior)"},{"location":"embeddedbehaviors/#anchor-ai","text":"Note Anchor function will spawn an entity with this AI. Unused. Behavior Name Init State Start State Manner Faction Anchor st_def_init st_default Anchor Anchor","title":"Anchor AI"},{"location":"embeddedbehaviors/#weapon-ai","text":"Note All weapons in the game have this AI. Unused. Broken Feature Scriptable weapons are not possible, weapons will not have any working P3S scripting attached to them. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Ultrapatch has fixed this AI, and is working correctly. Behavior Name Init State Start State Manner Faction itmWeapon itm_weapon st_default itmWeapon Items","title":"Weapon AI"},{"location":"embeddedbehaviors/#flame-fx-ai","text":"Note Any entity on fire will have a second entity spawned on them with this AI. Behavior Name Init State Start State Manner Faction Flame fx_init_flame fx_flame Flame Effects","title":"Flame FX AI"},{"location":"embeddedbehaviors/#catnip-mark-ai","text":"Note Spraying catnip will spawn an entity with this AI. Behavior Name Init State Start State Manner Faction bh_catnip_dot catnip_init catnip Catnip Effects","title":"Catnip Mark AI"},{"location":"embeddedbehaviors/#catnip-ai","text":"Note Catnip on the ground. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init itm_catnip itmCatnip Items","title":"Catnip AI"},{"location":"embeddedbehaviors/#laserdot-ai","text":"Note The Laser's AI that comes out from the Player's laserpen. Behavior Name Init State Start State Manner Faction bh_laserdot st_init_laserdot st_laserdot LaserDot LaserDot","title":"Laserdot AI"},{"location":"embeddedbehaviors/#player-ai","text":"Note The Player's AI. Behavior Name Init State Start State Manner Faction bh_player st_player_init st_player Player Player","title":"Player AI"},{"location":"embeddedbehaviors/#corpse-ai","text":"Note The corpse's AI. Reuses the victim's behavior, manner, and faction. Behavior Name Init State Start State Manner Faction ? st_init_corpse st_corpse ? ?","title":"Corpse AI"},{"location":"embeddedbehaviors/#motorhead-ai","text":"Note Motorhead's AI. Behavior Name Init State Start State Manner Faction bh_motorhead st_init st_start MonkeyApe Animals","title":"Motorhead AI"},{"location":"embeddedbehaviors/#monkey-ai","text":"Note Monkey's AI (not Motorhead). Start and init states won't be overridden if they were already defined in the map. If there's no pre-defined behavior name then it'll fallback to default_behavior . Behavior Name Init State Start State Manner Faction ? p3_wild_monkey_init (?) p3_wild_monkey (?) MonkeyApe Animals","title":"Monkey AI"},{"location":"embeddedbehaviors/#krotchy-grenade-ai","text":"Note Krotchy Grenade's AI. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init itm_toy itmKrotchyToy Items","title":"Krotchy Grenade AI"},{"location":"embeddedbehaviors/#seed-ai","text":"Note Leftover from unfinished Seed weapon. The projectile's AI. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init itm_seed itmSeed Items","title":"Seed AI"},{"location":"embeddedbehaviors/#taser-fx-ai","text":"Note Taser's beam AI. Unused. Behavior Name Init State Start State Manner Faction default_behavior st_def_init fx_taserbeam fxTaserBeam Effects","title":"Taser FX AI"},{"location":"embeddedevents/","text":"Embedded Events \uf0c1 These are all Events that are highly embedded into the engine. Note If you see a typo, it's not a typo , it's how they were programmed into the game. \ud83c\udd99\ud83e\udebd Ultrapatch Embedded Events \uf0c1 \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature These embedded events below will only work with Postal III Ultrapatch. OnHit -- Helicopter OnDeath -- Helicopter OnTargetKilled -- Fixed buggy event OnApplyCatnip -- Applied for all NPCs when using catnip weapon OnBlinded -- Applied for all NPCs when using Laserpen OnPlayerCrosshairFocus -- (inside entity) Called when Player is focusing on this entity OnPlayerCrosshairLeft -- (inside entity) Called when Player is no longer focusing the entity \ud83e\udebd Angel Embedded Events \uf0c1 \ud83e\udebd Postal III Ultrapatch Angel-only feature These embedded events below will only work with Postal III Ultrapatch Angel. OnUseCommand -- Interactable prop OnHurt -- Interactable prop OnTouch -- Interactable prop, touch must be setup OnStartTriggerTouch -- Interactable prop, touch must be setup OnEndTriggerTouch -- Interactable prop, touch must be setup OnASRestore -- Fired on save game load for restorable entities OnASTransition -- Fired on transition for restorable entities Act Busy (unused) \uf0c1 OnStartBusyNode -- completely unused OnFinishBusyNode -- completely unused OnNoActiveNode -- completely unused Fear (unused) \uf0c1 FearHide -- completely unused Move Planning \uf0c1 OnInvalidRoute OnPathTrackUnresolved -- unused, is in test script files OnPathTrackFailed -- unused, is in test script files OnTargetReach OnTargetClose OnLeanFailed Sight \uf0c1 OnSeeFlame OnSawEnemyEnt OnSawFearEnt -- completely unused OnSawNeutralEnt -- completely unused OnLostEnemyEnt OnLostFearEnt -- completely unused OnLostNeutralEnt -- completely unused OnVisible OnLOS OnLost Hearing \uf0c1 OnHear OnHearCombat OnHearDanger Targeting \uf0c1 OnTargetReset OnEnemiesDead OnNewEnemy -- Note: This does not execute instantly OnNewFear -- Note: This does not execute instantly OnTargetKilled -- completely unused, Note: buggy, acts like 'OnDeath' OnTargetArrested OnEnemySpoted -- unused, is in test script files OnTargetResistArrest -- unused, is in test script files (ArrestTarget, beta cop leftover) OnTargetUnconscious Damage \uf0c1 OnIgnite OnAcid -- Zombie projectile OnKrotchyDamage -- unused (commented out in ai_mission_bdk.p3s), Player only with Krotchy costume OnDamaged OnHit OnDeath OnBeeSting Stimuli \uf0c1 OnSuperNasty -- Urinated/Got poop OnNasty -- Urinated/Got poop (no difference from SuperNasty) OnPaint OnTasingStart OnBatonShocked OnUnstunned OnBump OnTased OnKicked OnSprayStunned OnStunnedOut -- completely unused OnBlind -- completely unused (used by Laserpen, spray weapons) OnInFlame OnExtinguish OnPlayerPush -- unused (commented out in ai_npc_social.p3s) OnStandUpBegin OnStandUpEnd OnUnconscious OnFallToGround OnRecover OnThreatOfVehicleHit -- completely unused OnStun OnHostaged OnResque -- Player releases hostage OnArrested OnTasingFinish Items (prop_p3_fsmitem) \uf0c1 OnUse -- unused, is in test script files OnDrop -- unused, is in test script files OnTake -- unused, is in test script files OnIgnite OnAcid Items (prop_p3_fsmitem) & Cat \uf0c1 OnUseCommand -- Will only execute inside the item if item type is not pizza Cat \uf0c1 OnLand OnDervishBegin OnDervishEnd OnGrenadeAttached -- completely unused Animals \uf0c1 OnSnatch OnUnsnatch Driver \uf0c1 OnFailedToEnterVehicle OnEnteredVehicle OnLeaveVehicle Tank \uf0c1 OnCannonShoot OnCannonDestroyed OnGatlingShoot -- unused, commented out in ai_tank.p3s OnGatlingDestroyed OnLauncherShoot OnLauncherLeftDestroyed OnLauncherRightDestroyed Weapons \uf0c1 OnThrowGrenadeFailed -- Human NPCs ONLY OnPrimaryAttack -- Player only OnSecondaryAttack -- Player only OnSucked -- Player only Other \uf0c1 OnEnd -- unused, is in test script files (calls when Pattern reached end) OnUser1 -- Hammer OnUser2 -- Hammer OnUser3 -- Hammer OnUser4 -- Hammer OnDialogNo -- completely unused OnDialogYes -- completely unused OnFinaleWin -- Executed inside Player's behavior","title":"Embedded Events"},{"location":"embeddedevents/#embedded-events","text":"These are all Events that are highly embedded into the engine. Note If you see a typo, it's not a typo , it's how they were programmed into the game.","title":"Embedded Events"},{"location":"embeddedevents/#ultrapatch-embedded-events","text":"\ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature These embedded events below will only work with Postal III Ultrapatch. OnHit -- Helicopter OnDeath -- Helicopter OnTargetKilled -- Fixed buggy event OnApplyCatnip -- Applied for all NPCs when using catnip weapon OnBlinded -- Applied for all NPCs when using Laserpen OnPlayerCrosshairFocus -- (inside entity) Called when Player is focusing on this entity OnPlayerCrosshairLeft -- (inside entity) Called when Player is no longer focusing the entity","title":"\ud83c\udd99\ud83e\udebd Ultrapatch Embedded Events"},{"location":"embeddedevents/#angel-embedded-events","text":"\ud83e\udebd Postal III Ultrapatch Angel-only feature These embedded events below will only work with Postal III Ultrapatch Angel. OnUseCommand -- Interactable prop OnHurt -- Interactable prop OnTouch -- Interactable prop, touch must be setup OnStartTriggerTouch -- Interactable prop, touch must be setup OnEndTriggerTouch -- Interactable prop, touch must be setup OnASRestore -- Fired on save game load for restorable entities OnASTransition -- Fired on transition for restorable entities","title":"\ud83e\udebd Angel Embedded Events"},{"location":"embeddedevents/#act-busy-unused","text":"OnStartBusyNode -- completely unused OnFinishBusyNode -- completely unused OnNoActiveNode -- completely unused","title":"Act Busy (unused)"},{"location":"embeddedevents/#fear-unused","text":"FearHide -- completely unused","title":"Fear (unused)"},{"location":"embeddedevents/#move-planning","text":"OnInvalidRoute OnPathTrackUnresolved -- unused, is in test script files OnPathTrackFailed -- unused, is in test script files OnTargetReach OnTargetClose OnLeanFailed","title":"Move Planning"},{"location":"embeddedevents/#sight","text":"OnSeeFlame OnSawEnemyEnt OnSawFearEnt -- completely unused OnSawNeutralEnt -- completely unused OnLostEnemyEnt OnLostFearEnt -- completely unused OnLostNeutralEnt -- completely unused OnVisible OnLOS OnLost","title":"Sight"},{"location":"embeddedevents/#hearing","text":"OnHear OnHearCombat OnHearDanger","title":"Hearing"},{"location":"embeddedevents/#targeting","text":"OnTargetReset OnEnemiesDead OnNewEnemy -- Note: This does not execute instantly OnNewFear -- Note: This does not execute instantly OnTargetKilled -- completely unused, Note: buggy, acts like 'OnDeath' OnTargetArrested OnEnemySpoted -- unused, is in test script files OnTargetResistArrest -- unused, is in test script files (ArrestTarget, beta cop leftover) OnTargetUnconscious","title":"Targeting"},{"location":"embeddedevents/#damage","text":"OnIgnite OnAcid -- Zombie projectile OnKrotchyDamage -- unused (commented out in ai_mission_bdk.p3s), Player only with Krotchy costume OnDamaged OnHit OnDeath OnBeeSting","title":"Damage"},{"location":"embeddedevents/#stimuli","text":"OnSuperNasty -- Urinated/Got poop OnNasty -- Urinated/Got poop (no difference from SuperNasty) OnPaint OnTasingStart OnBatonShocked OnUnstunned OnBump OnTased OnKicked OnSprayStunned OnStunnedOut -- completely unused OnBlind -- completely unused (used by Laserpen, spray weapons) OnInFlame OnExtinguish OnPlayerPush -- unused (commented out in ai_npc_social.p3s) OnStandUpBegin OnStandUpEnd OnUnconscious OnFallToGround OnRecover OnThreatOfVehicleHit -- completely unused OnStun OnHostaged OnResque -- Player releases hostage OnArrested OnTasingFinish","title":"Stimuli"},{"location":"embeddedevents/#items-prop_p3_fsmitem","text":"OnUse -- unused, is in test script files OnDrop -- unused, is in test script files OnTake -- unused, is in test script files OnIgnite OnAcid","title":"Items (prop_p3_fsmitem)"},{"location":"embeddedevents/#items-prop_p3_fsmitem-cat","text":"OnUseCommand -- Will only execute inside the item if item type is not pizza","title":"Items (prop_p3_fsmitem) &amp; Cat"},{"location":"embeddedevents/#cat","text":"OnLand OnDervishBegin OnDervishEnd OnGrenadeAttached -- completely unused","title":"Cat"},{"location":"embeddedevents/#animals","text":"OnSnatch OnUnsnatch","title":"Animals"},{"location":"embeddedevents/#driver","text":"OnFailedToEnterVehicle OnEnteredVehicle OnLeaveVehicle","title":"Driver"},{"location":"embeddedevents/#tank","text":"OnCannonShoot OnCannonDestroyed OnGatlingShoot -- unused, commented out in ai_tank.p3s OnGatlingDestroyed OnLauncherShoot OnLauncherLeftDestroyed OnLauncherRightDestroyed","title":"Tank"},{"location":"embeddedevents/#weapons","text":"OnThrowGrenadeFailed -- Human NPCs ONLY OnPrimaryAttack -- Player only OnSecondaryAttack -- Player only OnSucked -- Player only","title":"Weapons"},{"location":"embeddedevents/#other","text":"OnEnd -- unused, is in test script files (calls when Pattern reached end) OnUser1 -- Hammer OnUser2 -- Hammer OnUser3 -- Hammer OnUser4 -- Hammer OnDialogNo -- completely unused OnDialogYes -- completely unused OnFinaleWin -- Executed inside Player's behavior","title":"Other"},{"location":"events/","text":"Events \uf0c1 What are Postal3Script events? \uf0c1 Events are essentially \"signals\" triggered by an outside source while the entity is in a state or pattern. Types of Events Events can be Global , State , or Pattern only. Tip Events that were called successfully will always override the caller , if that happens you can do TargetCaller 1 or access Object:caller or do conditional checks like IfAttr \"caller.ea_health > 0 ...\" in the same pattern. Global Events Example Warning Must be placed before or after the States bracket! behavior { name bh_Postal3ScriptDocs inherited bh_npc // Placing the events bracket here will make them global! events { OnHit \"ExecutePattern st_util.xpt_ThatHurtYouKnow\" OnISmellFood \"State st_food\" } States { st_init { Group Neutral Patterns { pt_default { actions { ExecutePattern bh_base:st_init.pt_default } } } } } // It works here too! events { OnTimer_tPoop \"State st_poop\" } } State Events Example Warning Must be placed after the State's 'Patterns' bracket! behavior { name bh_Postal3ScriptDocs inherited bh_npc States { st_idle { Group Neutral Patterns { pt_default { actions { Timer tResting,60 Pattern pt_rest } } pt_rest { actions { // Note: this animation doesn't exists in Postal 3 Sequence seq.IDLE_SLEEP,999 } } pt_wakeup { actions { // Note: this animation doesn't exists in Postal 3 Sequence seq.IDLE_WAKEUP WaitForEnd 1 Wait 2 State st_start } } } // Events will execute in any of the patterns above! events { // After 60 seconds this executes OnTimer_tResting \"Pattern pt_wakeup\" // I was hit by someone... OnHit \"Pattern pt_wakeup\" // I'm now pissed, literally OnNasty \"Pattern pt_wakeup\" } } } } Pattern Events Example Warning Must be placed after the Pattern's 'actions' bracket! behavior { name bh_Postal3ScriptDocs inherited bh_npc States { st_idle { Group Neutral Patterns { pt_default { actions { Timer tResting,60 Pattern pt_rest } } pt_rest { actions { // Note: this animation doesn't exists in Postal 3 Sequence seq.IDLE_SLEEP,999 } // These events will now only execute in pt_rest events { // After 60 seconds this executes OnTimer_tResting \"Pattern pt_wakeup\" // I'm now pissed, literally OnNasty \"Pattern pt_wakeup\" // I was hit by someone... OnHit \"Pattern pt_wakeup\" } } pt_wakeup { actions { // Note: this animation doesn't exists in Postal 3 Sequence seq.IDLE_WAKEUP WaitForEnd 1 Wait 2 State st_start } } } } } } Automatically Created Events \uf0c1 There are several Postal3Script functions that automatically create Events, here you can find all of them below, and the correspending functions: OnAE_[name] -- AreaEvent OnTimer_[name] -- Timer OnAnim[animevent] -- Sequence (Note: Model animations need to have an anim event embedded) OnAttrMin_[attribute] -- ChangeAttr OnAttrMax_[attribute] -- ChangeAttr OnAttrChange_[attribute] -- ChangeAttr OnAttrRemove_[attribute] -- RemoveAttr OnFire_[name] -- Fire Functions","title":"Events"},{"location":"events/#events","text":"","title":"Events"},{"location":"events/#what-are-postal3script-events","text":"Events are essentially \"signals\" triggered by an outside source while the entity is in a state or pattern. Types of Events Events can be Global , State , or Pattern only. Tip Events that were called successfully will always override the caller , if that happens you can do TargetCaller 1 or access Object:caller or do conditional checks like IfAttr \"caller.ea_health > 0 ...\" in the same pattern.","title":"What are Postal3Script events?"},{"location":"events/#automatically-created-events","text":"There are several Postal3Script functions that automatically create Events, here you can find all of them below, and the correspending functions: OnAE_[name] -- AreaEvent OnTimer_[name] -- Timer OnAnim[animevent] -- Sequence (Note: Model animations need to have an anim event embedded) OnAttrMin_[attribute] -- ChangeAttr OnAttrMax_[attribute] -- ChangeAttr OnAttrChange_[attribute] -- ChangeAttr OnAttrRemove_[attribute] -- RemoveAttr OnFire_[name] -- Fire Functions","title":"Automatically Created Events"},{"location":"inputfunctions/","text":"Input Functions \uf0c1 These are all the input functions implemented which can be invoked via FireInput (only void functions) or EntFireInput . Player All Entities IgnoreFallDamage (float) SetTeam (int) IgnoreFallDamageWithoutReset (float) Kill (void) OnSquadMemberKilled (void) KillHierarchy (void) DisableFlashlight (void) Use (void) EnableFlashlight (void) Alpha (int) ForceDropPhysObjects (void) AlternativeSorting (bool) RequestPlayerHealth (void) Color (RGBA) SetFlashlightSlowDrain (void) SetParent (string) SetFlashlightNormalDrain (void) SetParentAttachment (string) SetPlayerHealth (int) SetParentAttachmentMaintainOffset (string) RequestAmmoState (void) ClearParent (void) LowerWeapon (void) SetDamageFilter (string) EnableCappedPhysicsDamage (void) EnableDamageForces (void) DisableCappedPhysicsDamage (void) DisableDamageForces (void) SetLocatorTargetEntity (string) DispatchEffect (string) SuppressCrosshair (void) DispatchResponse (string) CreateDouble (void) AddContext (string) DestroyDouble (void) RemoveContext (string) EnableControl (void) ClearContext (string) DisableControl (void) DisableShadow (void) GiveItemToPlayer (string) EnableShadow (void) GiveItemToDouble (string) AddOutput (string) SwitchWeapon (string) FireUser1 (string) DamagePlayer (int) FireUser2 (string) GiveWeapon (string) FireUser3 (string) RemoveWeapon (string) FireUser4 (string) RemoveAllWeapon (string) FireFSMScriptEvent (string) WeaponFire (float) SetState (string) WeaponAltFire (float) SetAttribute (string) ShootingEnable (void) ChangeAttribute (string) ShootingDisable (void) SetFSMTarget (string) ClearEventList (void) --- HolsterWeapon (void) --- UnholsterWeapon (void) --- DisableWeaponSwitching (void) --- EnableWeaponSwitching (void) --- Say (string) --- All P3 NPCs Hugo Chavez Sim Driver InteractivePowerDown (void ) SetDriversMaxSpeed (float) SetDriversMaxSpeed (float) HeadTurningOff (void) SetDriversMinSpeed (float) SetDriversMinSpeed (float) HeadTurningOn (void) StartForward (void) StartForward (void) SetHabitatID (int) Stop (void) Stop (void) EnableCollisionCheck (void) StartFiring (string) StartFiring (void) DisableCollisionCheck (void) StopFiring (void) StopFiring (void) StepOffVehiclePath (void) Show (void) GotoPathCorner (string) SetLeanGroup (string) Hide (void) EnterVehicle (string) --- GotoPathCorner (string) LeaveVehicle (void) Logic Entity Traffic Entity Enable (void) Enable (void) Disable (void) Disable (void) Toggle (void) Toggle (void) SetUpdateTime (float) SetPeriod (float) --- SetCooldown (float) Helicopter SetTrack (string) FlyToSpecificTrackViaPath (string) StartPatrol (void) StopPatrol (void) StartBreakableMovement (void) StopBreakableMovement (void) ChooseFarthestPathPoint (void) ChooseNearestPathPoint (void) InputStartLeading (int) InputStopLeading (void) StartPatrolBreakable (void) FlyToPathTrack (string) Activate (void) GunOn (void) GunOff (void) MissileOn (void) MissileOff (void) EnableRotorWash (void) DisableRotorWash (void) MoveTopSpeed (void) MoveSpecifiedSpeed (float) SetAngles (string) EnableRotorSound (void) DisableRotorSound (void) Kill (void) Enable (void) Disable (void) OmniscientOn (void) OmniscientOff (void) SetPenetrationDepth (float) BlindfireOn (void) BlindfireOff (void) SelfDestruct (void) SetDockingBBox (void) SetNormalBBox (void) EnableGroundAttack (void) DisableGroundAttack (void) DoGroundAttack (string) StartDefault (void) StartHunt (void) StartCover (void)","title":"Input Functions"},{"location":"inputfunctions/#input-functions","text":"These are all the input functions implemented which can be invoked via FireInput (only void functions) or EntFireInput . Player All Entities IgnoreFallDamage (float) SetTeam (int) IgnoreFallDamageWithoutReset (float) Kill (void) OnSquadMemberKilled (void) KillHierarchy (void) DisableFlashlight (void) Use (void) EnableFlashlight (void) Alpha (int) ForceDropPhysObjects (void) AlternativeSorting (bool) RequestPlayerHealth (void) Color (RGBA) SetFlashlightSlowDrain (void) SetParent (string) SetFlashlightNormalDrain (void) SetParentAttachment (string) SetPlayerHealth (int) SetParentAttachmentMaintainOffset (string) RequestAmmoState (void) ClearParent (void) LowerWeapon (void) SetDamageFilter (string) EnableCappedPhysicsDamage (void) EnableDamageForces (void) DisableCappedPhysicsDamage (void) DisableDamageForces (void) SetLocatorTargetEntity (string) DispatchEffect (string) SuppressCrosshair (void) DispatchResponse (string) CreateDouble (void) AddContext (string) DestroyDouble (void) RemoveContext (string) EnableControl (void) ClearContext (string) DisableControl (void) DisableShadow (void) GiveItemToPlayer (string) EnableShadow (void) GiveItemToDouble (string) AddOutput (string) SwitchWeapon (string) FireUser1 (string) DamagePlayer (int) FireUser2 (string) GiveWeapon (string) FireUser3 (string) RemoveWeapon (string) FireUser4 (string) RemoveAllWeapon (string) FireFSMScriptEvent (string) WeaponFire (float) SetState (string) WeaponAltFire (float) SetAttribute (string) ShootingEnable (void) ChangeAttribute (string) ShootingDisable (void) SetFSMTarget (string) ClearEventList (void) --- HolsterWeapon (void) --- UnholsterWeapon (void) --- DisableWeaponSwitching (void) --- EnableWeaponSwitching (void) --- Say (string) --- All P3 NPCs Hugo Chavez Sim Driver InteractivePowerDown (void ) SetDriversMaxSpeed (float) SetDriversMaxSpeed (float) HeadTurningOff (void) SetDriversMinSpeed (float) SetDriversMinSpeed (float) HeadTurningOn (void) StartForward (void) StartForward (void) SetHabitatID (int) Stop (void) Stop (void) EnableCollisionCheck (void) StartFiring (string) StartFiring (void) DisableCollisionCheck (void) StopFiring (void) StopFiring (void) StepOffVehiclePath (void) Show (void) GotoPathCorner (string) SetLeanGroup (string) Hide (void) EnterVehicle (string) --- GotoPathCorner (string) LeaveVehicle (void) Logic Entity Traffic Entity Enable (void) Enable (void) Disable (void) Disable (void) Toggle (void) Toggle (void) SetUpdateTime (float) SetPeriod (float) --- SetCooldown (float) Helicopter SetTrack (string) FlyToSpecificTrackViaPath (string) StartPatrol (void) StopPatrol (void) StartBreakableMovement (void) StopBreakableMovement (void) ChooseFarthestPathPoint (void) ChooseNearestPathPoint (void) InputStartLeading (int) InputStopLeading (void) StartPatrolBreakable (void) FlyToPathTrack (string) Activate (void) GunOn (void) GunOff (void) MissileOn (void) MissileOff (void) EnableRotorWash (void) DisableRotorWash (void) MoveTopSpeed (void) MoveSpecifiedSpeed (float) SetAngles (string) EnableRotorSound (void) DisableRotorSound (void) Kill (void) Enable (void) Disable (void) OmniscientOn (void) OmniscientOff (void) SetPenetrationDepth (float) BlindfireOn (void) BlindfireOff (void) SelfDestruct (void) SetDockingBBox (void) SetNormalBBox (void) EnableGroundAttack (void) DisableGroundAttack (void) DoGroundAttack (string) StartDefault (void) StartHunt (void) StartCover (void)","title":"Input Functions"},{"location":"randomization/","text":"Randomization \uf0c1 Randomization in Postal3Script is very straightforward. Random The : symbol always mean randomization. (There are a few exceptions, but usually it is always random when used with values) [min]:[max] or [max]:[min] is the syntax for this. There's a slight 'bias' when randomizing, for example a randomization from 4 to 9 won't be exactly 4:9, but could be also 3:10 That's why it's recommended not to check for exact value, but to check if they are higher or lower than the value. Examples \uf0c1 pt_example { actions { // Randomizes waiting (works with floats too!) Wait 0.5:9.5 // Randomizes repeat (also works with floats!) Repeat 1:4.5 SetAttr \"rnd 0\" // Randomizes attribute ChangeAttr \"rnd 0:100\" // You can also randomize an attribute this way SetAttr \"rnd 50:100\" // Randomizes timer Timer tTest,5:7,repeated // Randomizes gesture Gesture g_emote_afraid,15:3 // Randomizes looking LookAt 5:10 // Randomizes moving to the target MoveToTarget run,1.5:3.5 // Randomizes turning Turn 90:270 // Randomizes sequence's time Sequence seq.reaction_shocked,seq.reaction_shocked_2,2:5 } }","title":"Randomization"},{"location":"randomization/#randomization","text":"Randomization in Postal3Script is very straightforward. Random The : symbol always mean randomization. (There are a few exceptions, but usually it is always random when used with values) [min]:[max] or [max]:[min] is the syntax for this. There's a slight 'bias' when randomizing, for example a randomization from 4 to 9 won't be exactly 4:9, but could be also 3:10 That's why it's recommended not to check for exact value, but to check if they are higher or lower than the value.","title":"Randomization"},{"location":"randomization/#examples","text":"pt_example { actions { // Randomizes waiting (works with floats too!) Wait 0.5:9.5 // Randomizes repeat (also works with floats!) Repeat 1:4.5 SetAttr \"rnd 0\" // Randomizes attribute ChangeAttr \"rnd 0:100\" // You can also randomize an attribute this way SetAttr \"rnd 50:100\" // Randomizes timer Timer tTest,5:7,repeated // Randomizes gesture Gesture g_emote_afraid,15:3 // Randomizes looking LookAt 5:10 // Randomizes moving to the target MoveToTarget run,1.5:3.5 // Randomizes turning Turn 90:270 // Randomizes sequence's time Sequence seq.reaction_shocked,seq.reaction_shocked_2,2:5 } }","title":"Examples"},{"location":"statespatterns/","text":"States, Patterns, Execute Patterns \uf0c1 States, Patterns, and Execute Patterns are the very main core of Postal3Script, these make up 100% of all scripts, and they are essentially the \"AI\". States, Patterns, and Execution Patterns Cannot exist without a behavior, they must be attached to a behavior. Can be inherited, they can be overridden by creating the same state/pattern in the new behavior. State Group \uf0c1 States have a group, this group can be Neutral , Alert , or Combat . For non-NPCs these don't mean anything. For NPCs however, they'll belong in that status group, for example it'll control their view/hear distance, and the game will force them to be in that NPC state. This is a feature re-used from Half-Life 2/Source Engine. State Every State must have a Pattern called pt_default . Note All Entities in Postal 3 have an Init State, and Start State, these are usually always called st_init and st_start . Patterns \uf0c1 Patterns can be used in two ways, normally , or executed . When normally used, the State will enter into that pattern, and will execute code normally. When executed , the State will never enter into that pattern, but will execute the pattern's content. Execute Pattern When executing a pattern, some functions will not work. Wait , Repeat and Pattern will never work, for Pattern you should use State instead. Like here so: State st_mystate.pt_mypattern Naming Convention \uf0c1 Naming Convention TM used a naming convention for Postal3Script, while it's not a must, it is still highly recommended to follow these to avoid confusion in the future: Behaviors always start with bh_ States always start with st_ Patterns always start with pt_ Execute Patterns always start with xpt_ Inheritance \uf0c1 Postal3Script supports inheritance, states and patterns can be inherited, and they can be overridden when wanted. In Postal 3 this is heavily used to split the NPC AI in parts. Here's an example of inheritance: // Main core behavior { name bh_core States { st_corestate { Group Neutral Patterns { pt_default { actions { SetAttr \"ea_health 0\" } } } } } } // Some behavior behavior { name bh_myai // Inherit from bh_core! inherited bh_core States { // Recreate the state to override it! st_corestate { Group Neutral Patterns { pt_default { actions { SetAttr \"ea_health 100\" } } xpt_coredefault { actions { // Entering our core's state! We'll be absolutely dead. State bh_core.st_corestate } } } } } } In the example above in bh_core behavior we have a state called st_corestate , when entering it the entity will be dead, but the entity with the bh_myai behavior will not, and instead it will just reset it's health back to 100. However, you can still access the core's state by executing xpt_coredefault pattern, this will jump over the overridden state and will just use the core's state instead. Example of a Behavior with States and Patterns: \uf0c1 behavior { name bh_mybehavior States { st_init { Group Neutral Patterns { pt_default { actions { // Create a timer that fires an event every 2 seconds.. Timer tLoadCheck,2,repeated } } } } st_start { Group Neutral Patterns { pt_default { actions { SetAttr \"loaded 1\" } events { OnHit \"RemoveAttr loaded\" OnTimer_tLoadCheck \"ExecutePattern .xpt_check\" } } pt_dead { actions { // dead, not big surprise } } xpt_check { actions { // Check if this attribute exist CheckAttr \"loaded Return 1\" // Well it doesn't exist anymore.. SetAttr \"ea_health 0\" Timer tLoadCheck,0 Pattern pt_dead } } } } } }","title":"States, Patterns, Execution Patterns"},{"location":"statespatterns/#states-patterns-execute-patterns","text":"States, Patterns, and Execute Patterns are the very main core of Postal3Script, these make up 100% of all scripts, and they are essentially the \"AI\". States, Patterns, and Execution Patterns Cannot exist without a behavior, they must be attached to a behavior. Can be inherited, they can be overridden by creating the same state/pattern in the new behavior.","title":"States, Patterns, Execute Patterns"},{"location":"statespatterns/#state-group","text":"States have a group, this group can be Neutral , Alert , or Combat . For non-NPCs these don't mean anything. For NPCs however, they'll belong in that status group, for example it'll control their view/hear distance, and the game will force them to be in that NPC state. This is a feature re-used from Half-Life 2/Source Engine. State Every State must have a Pattern called pt_default . Note All Entities in Postal 3 have an Init State, and Start State, these are usually always called st_init and st_start .","title":"State Group"},{"location":"statespatterns/#patterns","text":"Patterns can be used in two ways, normally , or executed . When normally used, the State will enter into that pattern, and will execute code normally. When executed , the State will never enter into that pattern, but will execute the pattern's content. Execute Pattern When executing a pattern, some functions will not work. Wait , Repeat and Pattern will never work, for Pattern you should use State instead. Like here so: State st_mystate.pt_mypattern","title":"Patterns"},{"location":"statespatterns/#naming-convention","text":"Naming Convention TM used a naming convention for Postal3Script, while it's not a must, it is still highly recommended to follow these to avoid confusion in the future: Behaviors always start with bh_ States always start with st_ Patterns always start with pt_ Execute Patterns always start with xpt_","title":"Naming Convention"},{"location":"statespatterns/#inheritance","text":"Postal3Script supports inheritance, states and patterns can be inherited, and they can be overridden when wanted. In Postal 3 this is heavily used to split the NPC AI in parts. Here's an example of inheritance: // Main core behavior { name bh_core States { st_corestate { Group Neutral Patterns { pt_default { actions { SetAttr \"ea_health 0\" } } } } } } // Some behavior behavior { name bh_myai // Inherit from bh_core! inherited bh_core States { // Recreate the state to override it! st_corestate { Group Neutral Patterns { pt_default { actions { SetAttr \"ea_health 100\" } } xpt_coredefault { actions { // Entering our core's state! We'll be absolutely dead. State bh_core.st_corestate } } } } } } In the example above in bh_core behavior we have a state called st_corestate , when entering it the entity will be dead, but the entity with the bh_myai behavior will not, and instead it will just reset it's health back to 100. However, you can still access the core's state by executing xpt_coredefault pattern, this will jump over the overridden state and will just use the core's state instead.","title":"Inheritance"},{"location":"statespatterns/#example-of-a-behavior-with-states-and-patterns","text":"behavior { name bh_mybehavior States { st_init { Group Neutral Patterns { pt_default { actions { // Create a timer that fires an event every 2 seconds.. Timer tLoadCheck,2,repeated } } } } st_start { Group Neutral Patterns { pt_default { actions { SetAttr \"loaded 1\" } events { OnHit \"RemoveAttr loaded\" OnTimer_tLoadCheck \"ExecutePattern .xpt_check\" } } pt_dead { actions { // dead, not big surprise } } xpt_check { actions { // Check if this attribute exist CheckAttr \"loaded Return 1\" // Well it doesn't exist anymore.. SetAttr \"ea_health 0\" Timer tLoadCheck,0 Pattern pt_dead } } } } } }","title":"Example of a Behavior with States and Patterns:"},{"location":"syntaxhighlighter/","text":"Syntax Highlighters \uf0c1 We created these syntax highlighters so it's easier to look at p3s code. Notepad++ \uf0c1 Note: Bracket collapsing isn't properly working, if you wish to use collapsing we recommend using the syntax highlighter below instead Installation \uf0c1 Navigate to 'Language->User Defined Language->Open User Defined Language folder...' then drop Postal3Script.xml there, restart Notepad++ DOWNLOAD HERE ( Download as source code ) Visual Studio Code \uf0c1 Installation \uf0c1 Unpack the zip and create a new folder for it in 'C:/Users/[yourusername]/.vscode/extensions' Ideally it should look like this: 'C:/Users/[yourusername]/.vscode/extensions/postal3script.vscode' Restart vscode when it's done, and it should automatically detect .p3s files DOWNLOAD HERE ( Download as source code ) Alternative Installation \uf0c1 This syntax highlighter can be found in vscode's marketplace if you search for 'Postal3Script'","title":"Syntax Highlighter"},{"location":"syntaxhighlighter/#syntax-highlighters","text":"We created these syntax highlighters so it's easier to look at p3s code.","title":"Syntax Highlighters"},{"location":"syntaxhighlighter/#notepad","text":"Note: Bracket collapsing isn't properly working, if you wish to use collapsing we recommend using the syntax highlighter below instead","title":"Notepad++"},{"location":"syntaxhighlighter/#installation","text":"Navigate to 'Language->User Defined Language->Open User Defined Language folder...' then drop Postal3Script.xml there, restart Notepad++ DOWNLOAD HERE ( Download as source code )","title":"Installation"},{"location":"syntaxhighlighter/#visual-studio-code","text":"","title":"Visual Studio Code"},{"location":"syntaxhighlighter/#installation_1","text":"Unpack the zip and create a new folder for it in 'C:/Users/[yourusername]/.vscode/extensions' Ideally it should look like this: 'C:/Users/[yourusername]/.vscode/extensions/postal3script.vscode' Restart vscode when it's done, and it should automatically detect .p3s files DOWNLOAD HERE ( Download as source code )","title":"Installation"},{"location":"syntaxhighlighter/#alternative-installation","text":"This syntax highlighter can be found in vscode's marketplace if you search for 'Postal3Script'","title":"Alternative Installation"},{"location":"whatispostal3script/","text":"What is Postal3Script? \uf0c1 Postal3Script, or P3S, is a Finite State Machine (FSM) and a scripting language developed for Postal 3, designed to handle most of the NPC AI and mission scripting. It allows for a much easier and faster way of doing missions and AI rather than messing around in C++ and doing logic entirely through map entities in Hammer. With Postal3Script, you can easily do many things that you normally would not be able to do without the source code of the game due to the many useful functions and attributes that are interfaced. While Postal3Script is a scripting language, it is not as powerful as say, Garry's Mod 's LUA, it is heavily limited by the amount of functions available, it's also not as fast as LUA in execution speed unfortunately. P3S script files are located in Postal III/p3/scripts and use the .p3s file extension, but it can be any extension if wanted. To load and be able to use a p3s script, you must add it to a manifest, in \"ai_scripts.txt\", found in the previously mentioned folder. HERE you can download the contents of Postal 3's scripts folder, if you need it for researching purposes, or just out of curiosity. Tip Changes to p3s scripts will automatically hotload when the map changes, so you can just use the restart console command without ever having to exit and reload the game. It is highly recommended to snoop around the game files and find examples of what you're trying to accomplish to get a better idea of the language. Postal3Script Example \uf0c1 Constants { Const DONUTS_INCR,1 Const SOMEBODY_STOLE_MY_DONUTS,15 Const YES,1 Const NO,0 } behavior { name bh_evensuperioractor inherited bh_mysuperioractor States { st_mycustomstate { Group Alert Patterns { pt_default { // Only executes when on Alert } } } st_nowyallgonnapay { Group Combat Patterns { pt_default { // Only executes when in Combat SetAttr \"veryverypissedoff YES\" Pattern pt_donuts } pt_donuts { IfAttr \"veryverypissedoff == YES Pattern st_nowyallgonnapay.pt_allgood\" } pt_allgood { SetAttr \"veryverypissedoff NO\" } } } events { OnDeath \"ExecutePattern st_OnDeath.pt_default\" OnTimer_tUnstun \"Pattern pt_end\" OnUnconscious \"Pattern pt_unconscious\" OnHostaged \"Pattern pt_hostaged\" OnSprayStunned \"Timer tUnstun,SPRAY_UNSTUN_TIMER\" OnTimer_tScream \"ExecutePattern .xpt_SayScream\" OnUnstunned \"Pattern pt_end\" OnStandUpEnd \"Pattern pt_end\" } // Sets on spawn st_init { Group Neutral Patterns { pt_default { actions { Senses false } } } } // Called continously st_start { Group Neutral Patterns { pt_default { actions { // tick } } } } } } Limitations \uf0c1 Limitations Postal3Script comes with limitations. Ignoring these limitations will make your script behave oddly, and unexpectedly: In Postal3Script, Attributes can only be whole numbers/integers, attributes can't be floats, doubles, or strings. However, the Wait and Repeat functions are the only exception where you can freely use floats. An Attribute must have a value initialized before checking it's value using CheckAttr , meaning an attribute that doesn't exist will never return a valid value. (Checking if it's zero/null doesn't work). Extremely sensitive to spaces when using parameters for functions, this can lead to unexpected behavior. Errors in a script file won't show up without enabling a console command first, and most of the time it's not obvious if the code is working fine. Postal3Script function names are case-sensitive, i.e. it's not recommended to use ifattr instead of IfAttr . Very long code can (sometimes) result in the game freezing, this can be avoided by splitting up the patterns. Possibly due to a programming oversight, the language when it can't find anything sometimes will happily pass checks even though they should be invalid (false), this can be observed with functions like IfAttr , CheckAttr , ChangeAttr , Manner and Faction .. There is no else , there are no arrays, only integers can be saved.","title":"What is Postal3Script?"},{"location":"whatispostal3script/#what-is-postal3script","text":"Postal3Script, or P3S, is a Finite State Machine (FSM) and a scripting language developed for Postal 3, designed to handle most of the NPC AI and mission scripting. It allows for a much easier and faster way of doing missions and AI rather than messing around in C++ and doing logic entirely through map entities in Hammer. With Postal3Script, you can easily do many things that you normally would not be able to do without the source code of the game due to the many useful functions and attributes that are interfaced. While Postal3Script is a scripting language, it is not as powerful as say, Garry's Mod 's LUA, it is heavily limited by the amount of functions available, it's also not as fast as LUA in execution speed unfortunately. P3S script files are located in Postal III/p3/scripts and use the .p3s file extension, but it can be any extension if wanted. To load and be able to use a p3s script, you must add it to a manifest, in \"ai_scripts.txt\", found in the previously mentioned folder. HERE you can download the contents of Postal 3's scripts folder, if you need it for researching purposes, or just out of curiosity. Tip Changes to p3s scripts will automatically hotload when the map changes, so you can just use the restart console command without ever having to exit and reload the game. It is highly recommended to snoop around the game files and find examples of what you're trying to accomplish to get a better idea of the language.","title":"What is Postal3Script?"},{"location":"whatispostal3script/#postal3script-example","text":"Constants { Const DONUTS_INCR,1 Const SOMEBODY_STOLE_MY_DONUTS,15 Const YES,1 Const NO,0 } behavior { name bh_evensuperioractor inherited bh_mysuperioractor States { st_mycustomstate { Group Alert Patterns { pt_default { // Only executes when on Alert } } } st_nowyallgonnapay { Group Combat Patterns { pt_default { // Only executes when in Combat SetAttr \"veryverypissedoff YES\" Pattern pt_donuts } pt_donuts { IfAttr \"veryverypissedoff == YES Pattern st_nowyallgonnapay.pt_allgood\" } pt_allgood { SetAttr \"veryverypissedoff NO\" } } } events { OnDeath \"ExecutePattern st_OnDeath.pt_default\" OnTimer_tUnstun \"Pattern pt_end\" OnUnconscious \"Pattern pt_unconscious\" OnHostaged \"Pattern pt_hostaged\" OnSprayStunned \"Timer tUnstun,SPRAY_UNSTUN_TIMER\" OnTimer_tScream \"ExecutePattern .xpt_SayScream\" OnUnstunned \"Pattern pt_end\" OnStandUpEnd \"Pattern pt_end\" } // Sets on spawn st_init { Group Neutral Patterns { pt_default { actions { Senses false } } } } // Called continously st_start { Group Neutral Patterns { pt_default { actions { // tick } } } } } }","title":"Postal3Script Example"},{"location":"whatispostal3script/#limitations","text":"Limitations Postal3Script comes with limitations. Ignoring these limitations will make your script behave oddly, and unexpectedly: In Postal3Script, Attributes can only be whole numbers/integers, attributes can't be floats, doubles, or strings. However, the Wait and Repeat functions are the only exception where you can freely use floats. An Attribute must have a value initialized before checking it's value using CheckAttr , meaning an attribute that doesn't exist will never return a valid value. (Checking if it's zero/null doesn't work). Extremely sensitive to spaces when using parameters for functions, this can lead to unexpected behavior. Errors in a script file won't show up without enabling a console command first, and most of the time it's not obvious if the code is working fine. Postal3Script function names are case-sensitive, i.e. it's not recommended to use ifattr instead of IfAttr . Very long code can (sometimes) result in the game freezing, this can be avoided by splitting up the patterns. Possibly due to a programming oversight, the language when it can't find anything sometimes will happily pass checks even though they should be invalid (false), this can be observed with functions like IfAttr , CheckAttr , ChangeAttr , Manner and Faction .. There is no else , there are no arrays, only integers can be saved.","title":"Limitations"},{"location":"wipp3sfiles/","text":"Unused Postal3Script files \uf0c1 These files can be found in (location of P3)/p3/scripts/ Many of them contain cut and planned features for the open world gameplay, ultimately they were never ported over properly. It's a good idea to search through these files for hunting for Beta content that never made it out alive. They were used by the scripters to test and develop scripts before eventually moving them over to mission scripts. They were also used to test many P3S functions to ensure they are working properly. 'ai_badger_test.p3s' - Badger testing 'ai_cashmart.p3s' - Earlier version of Cashmart (ai_cashmart_npc.p3s is not unused) 'ai_gameplay.p3s' - Intended for Open World gameplay 'ai_patrol1_citizen_fight.p3s' - Unknown 'ai_st1_common.p3s' - Contains various old code 'ai_st2_states.p3s' - Contains various old code 'ai_st3_social.p3s' - Contains experimental old code 'ai_st4_queuie.p3s' - Queue testing 'ai_st5_temp.p3s' - Contains test code, scrapped features 'ai_st6_missions.p3s' - Test code related to missions 'ai_st7_environment.p3s' - Code related to cut environment behavior 'ai_st8_items.p3s' - Code related to cut inventory items 'ai_st9_animals.p3s' - Animals test 'ai_st10_temp.p3s' - Test script, contains code related to Traffic lights 'ai_st11_urza.p3s' - Contains scrapped features, old code 'ai_st12_urza.p3s' - Contains scrapped features, old code 'ai_st98_helicopter.p3s' - Code that is identical to the Helicopter AI that IS used 'ai_st_utilities.p3s' - Various code related to NPCs 'ai_test_babuska.p3s' - Test script 'lean_test.p3s' - Test script Warning Don't try loading them as is, they have a very outdated Postal3Script layout, and several deleted functions! Use p3_fsm_spew 1 console command to check which one of them loads properly!","title":"Development/WIP Files"},{"location":"wipp3sfiles/#unused-postal3script-files","text":"These files can be found in (location of P3)/p3/scripts/ Many of them contain cut and planned features for the open world gameplay, ultimately they were never ported over properly. It's a good idea to search through these files for hunting for Beta content that never made it out alive. They were used by the scripters to test and develop scripts before eventually moving them over to mission scripts. They were also used to test many P3S functions to ensure they are working properly. 'ai_badger_test.p3s' - Badger testing 'ai_cashmart.p3s' - Earlier version of Cashmart (ai_cashmart_npc.p3s is not unused) 'ai_gameplay.p3s' - Intended for Open World gameplay 'ai_patrol1_citizen_fight.p3s' - Unknown 'ai_st1_common.p3s' - Contains various old code 'ai_st2_states.p3s' - Contains various old code 'ai_st3_social.p3s' - Contains experimental old code 'ai_st4_queuie.p3s' - Queue testing 'ai_st5_temp.p3s' - Contains test code, scrapped features 'ai_st6_missions.p3s' - Test code related to missions 'ai_st7_environment.p3s' - Code related to cut environment behavior 'ai_st8_items.p3s' - Code related to cut inventory items 'ai_st9_animals.p3s' - Animals test 'ai_st10_temp.p3s' - Test script, contains code related to Traffic lights 'ai_st11_urza.p3s' - Contains scrapped features, old code 'ai_st12_urza.p3s' - Contains scrapped features, old code 'ai_st98_helicopter.p3s' - Code that is identical to the Helicopter AI that IS used 'ai_st_utilities.p3s' - Various code related to NPCs 'ai_test_babuska.p3s' - Test script 'lean_test.p3s' - Test script Warning Don't try loading them as is, they have a very outdated Postal3Script layout, and several deleted functions! Use p3_fsm_spew 1 console command to check which one of them loads properly!","title":"Unused Postal3Script files"},{"location":"angel/f_angelscript/","text":"AngelScript \uf0c1 Executes AngelScript calls. \ud83e\udebd Postal III Ultrapatch Angel-only feature This function will only work under Postal III Ultrapatch Angel. Syntax \uf0c1 AngelScript \"Object:<any> <as_class> <as_function>\" -- Executes AngelScript on the object. AngelScript \"Object:<any> <as_class> <as_function> <num_param>\" -- Executes AngelScript on the object, with a number as a parameter. AngelScript \"Object:<any> <as_class> <as_function> <text_param>\" -- Executes AngelScript on the object, with a text as a parameter. Global Execution \uf0c1 AngelScript \"GLOBAL <as_class> <as_function>\" -- Executes AngelScript on the object globally. AngelScript \"global <as_class> <as_function>\" AngelScript \"Global <as_class> <as_function>\" AngelScript \"Global <as_class> <as_function> <num_param>\" -- Executes AngelScript on the object globally, with a number as a parameter. AngelScript \"Global <as_class> <as_function> <text_param>\" -- Executes AngelScript on the object globally, with a text as a parameter. Note <as_class> and <as_function> must exactly be the same how they were declared in AngelScript. AngelScript is case-sensitive. Example \uf0c1 Globally executed functions will be shared between calls from any object, whereas object-executed functions will store information individually. Note If this is still confusing, there's a more detailed tutorial available on the AngelScript docs . // Rough example of an AngelScript class // (not stored in a P3S file) class MyClass : IPostal3Script { CP3SObj@ self; MyClass(CP3SObj@ obj) { // If we are attempting to use it as Global // then we must check if obj exist.. if (@obj != null) @self = obj; // Better safe than sorry... counter = 0; } int counter; void Print() { Printf(\"MyClass::Increment %d \", counter); if (@self == null) { Printf(\"(GLOBAL)\\n\"); } else { Printf(\"(%s|%s)\\n\", self.GetManner(), self.GetFaction()); } } void Increment() { // Increments (adds) it by one counter++; // Call into MyClass::Print() Print(); } void Increment_int(int param) { // Adds to counter from param counter += param; // Call into MyClass::Print() Print(); } void Increment_str(string param) { if (param == \"stinky\") { counter += 5; } else if (param == \"deadsaw\") { counter += 10; } // Call into MyClass::Print() Print(); } } // Rough example of a P3S behavior // (stored in P3S) behavior { name bh_mybehavior States { // This state is being called, or executed somewhere else st_mystate { Group Neutral Patterns { pt_default { // counter will be 1 for Object:self AngelScript \"Object:self MyClass Increment\" // counter will be 1 globally for MyClass AngelScript \"GLOBAL MyClass Increment\" // Adds to the counter by 3 for Object:self AngelScript \"Object:self MyClass Increment_int 3\" // Adds to the counter by 10 for global AngelScript \"GLOBAL MyClass Increment_str deadsaw\" } } } } } // Another behavior we are using behavior { name bh_myotherbehavior States { // This state is being called, or executed somewhere else st_mystate { Group Neutral Patterns { pt_default { // counter will be 1 for Object:self AngelScript \"Object:self MyClass Increment\" // counter will be 12 globally for MyClass // (since IN THEORY we already executed it in bh_mybehavior ONCE at some point) AngelScript \"GLOBAL MyClass Increment\" } } } } }","title":"AngelScript"},{"location":"angel/f_angelscript/#angelscript","text":"Executes AngelScript calls. \ud83e\udebd Postal III Ultrapatch Angel-only feature This function will only work under Postal III Ultrapatch Angel.","title":"AngelScript"},{"location":"angel/f_angelscript/#syntax","text":"AngelScript \"Object:<any> <as_class> <as_function>\" -- Executes AngelScript on the object. AngelScript \"Object:<any> <as_class> <as_function> <num_param>\" -- Executes AngelScript on the object, with a number as a parameter. AngelScript \"Object:<any> <as_class> <as_function> <text_param>\" -- Executes AngelScript on the object, with a text as a parameter.","title":"Syntax"},{"location":"angel/f_angelscript/#global-execution","text":"AngelScript \"GLOBAL <as_class> <as_function>\" -- Executes AngelScript on the object globally. AngelScript \"global <as_class> <as_function>\" AngelScript \"Global <as_class> <as_function>\" AngelScript \"Global <as_class> <as_function> <num_param>\" -- Executes AngelScript on the object globally, with a number as a parameter. AngelScript \"Global <as_class> <as_function> <text_param>\" -- Executes AngelScript on the object globally, with a text as a parameter. Note <as_class> and <as_function> must exactly be the same how they were declared in AngelScript. AngelScript is case-sensitive.","title":"Global Execution"},{"location":"angel/f_angelscript/#example","text":"Globally executed functions will be shared between calls from any object, whereas object-executed functions will store information individually. Note If this is still confusing, there's a more detailed tutorial available on the AngelScript docs . // Rough example of an AngelScript class // (not stored in a P3S file) class MyClass : IPostal3Script { CP3SObj@ self; MyClass(CP3SObj@ obj) { // If we are attempting to use it as Global // then we must check if obj exist.. if (@obj != null) @self = obj; // Better safe than sorry... counter = 0; } int counter; void Print() { Printf(\"MyClass::Increment %d \", counter); if (@self == null) { Printf(\"(GLOBAL)\\n\"); } else { Printf(\"(%s|%s)\\n\", self.GetManner(), self.GetFaction()); } } void Increment() { // Increments (adds) it by one counter++; // Call into MyClass::Print() Print(); } void Increment_int(int param) { // Adds to counter from param counter += param; // Call into MyClass::Print() Print(); } void Increment_str(string param) { if (param == \"stinky\") { counter += 5; } else if (param == \"deadsaw\") { counter += 10; } // Call into MyClass::Print() Print(); } } // Rough example of a P3S behavior // (stored in P3S) behavior { name bh_mybehavior States { // This state is being called, or executed somewhere else st_mystate { Group Neutral Patterns { pt_default { // counter will be 1 for Object:self AngelScript \"Object:self MyClass Increment\" // counter will be 1 globally for MyClass AngelScript \"GLOBAL MyClass Increment\" // Adds to the counter by 3 for Object:self AngelScript \"Object:self MyClass Increment_int 3\" // Adds to the counter by 10 for global AngelScript \"GLOBAL MyClass Increment_str deadsaw\" } } } } } // Another behavior we are using behavior { name bh_myotherbehavior States { // This state is being called, or executed somewhere else st_mystate { Group Neutral Patterns { pt_default { // counter will be 1 for Object:self AngelScript \"Object:self MyClass Increment\" // counter will be 12 globally for MyClass // (since IN THEORY we already executed it in bh_mybehavior ONCE at some point) AngelScript \"GLOBAL MyClass Increment\" } } } } }","title":"Example"},{"location":"angel/f_unlockhintnode/","text":"UnlockHintNode \uf0c1 Unlocks currently using hint node, then forgets about it. \ud83e\udebd Postal III Ultrapatch Angel-only feature This function will only work under Postal III Ultrapatch Angel. Syntax \uf0c1 UnlockHintNode 1 -- Unlocks currently using/locked down hint node. Example \uf0c1 Node is pointed to ev_sit P3S state, calls UnlockHintNode at pt_end (which will also be called when NPC is interrupted) ev_sit { group Neutral patterns { pt_default { actions { FreeMovement false Pattern pt_sit } } pt_sit { actions { Sequence seq.env_chair,seq.env_chair_2,seq.env_chair_3,seq.env_chair_4,9000 Wait 15:30 Pattern pt_end } } pt_end { actions { UnlockHintNode 1 ResetSequence 1 Wait 1 State st_start } } } }","title":"UnlockHintNode"},{"location":"angel/f_unlockhintnode/#unlockhintnode","text":"Unlocks currently using hint node, then forgets about it. \ud83e\udebd Postal III Ultrapatch Angel-only feature This function will only work under Postal III Ultrapatch Angel.","title":"UnlockHintNode"},{"location":"angel/f_unlockhintnode/#syntax","text":"UnlockHintNode 1 -- Unlocks currently using/locked down hint node.","title":"Syntax"},{"location":"angel/f_unlockhintnode/#example","text":"Node is pointed to ev_sit P3S state, calls UnlockHintNode at pt_end (which will also be called when NPC is interrupted) ev_sit { group Neutral patterns { pt_default { actions { FreeMovement false Pattern pt_sit } } pt_sit { actions { Sequence seq.env_chair,seq.env_chair_2,seq.env_chair_3,seq.env_chair_4,9000 Wait 15:30 Pattern pt_end } } pt_end { actions { UnlockHintNode 1 ResetSequence 1 Wait 1 State st_start } } } }","title":"Example"},{"location":"angel/what_is_angel/","text":"\ud83e\udebd What is Postal III Ultrapatch Angel? \uf0c1 Postal III Ultrapatch Angel is a mod released by WhackJob Interactive which is built on top of Ultrapatch. Angel implements the AngelScript scripting language on top of Postal III's own scripting language Postal3Script . It allows modders to create complex and fast execution code inside Postal3Script, and greatly manipulate the game using the available functions and classes. (over 500+ if also counting methods) Originally Postal III Angel was a mod that implemented the AngelScript scripting language only , but now it has it's own unique features, like Multiplayer support . Note Angel-only features on the docs are marked with the \ud83e\udebd emoji. \ud83c\udd99Ultrapatch features will work on \ud83e\udebdAngel, but not vice-versa. Not to be confused with old version of Angel (Postal 3 Angel, pre-Ultrapatch) Features/Fixes \uf0c1 Check ModDB Postal III Ultrapatch+Angel releases for a more in-depth list, or check out the AngelScript Docs . Points of interest \uf0c1 AngelScript scripting language with over 500+ functions and 20+ classes (if you are also counting the methods) Multiplayer support (Multiplayer was fixed where it could be enjoyable but it doesn't fix all the issues) Everything from Ultrapatch Custom entities to help with modding (FGD added with releases) AngelScript support for Addons","title":"\ud83e\udebd What is Postal III Ultrapatch Angel?"},{"location":"angel/what_is_angel/#what-is-postal-iii-ultrapatch-angel","text":"Postal III Ultrapatch Angel is a mod released by WhackJob Interactive which is built on top of Ultrapatch. Angel implements the AngelScript scripting language on top of Postal III's own scripting language Postal3Script . It allows modders to create complex and fast execution code inside Postal3Script, and greatly manipulate the game using the available functions and classes. (over 500+ if also counting methods) Originally Postal III Angel was a mod that implemented the AngelScript scripting language only , but now it has it's own unique features, like Multiplayer support . Note Angel-only features on the docs are marked with the \ud83e\udebd emoji. \ud83c\udd99Ultrapatch features will work on \ud83e\udebdAngel, but not vice-versa. Not to be confused with old version of Angel (Postal 3 Angel, pre-Ultrapatch)","title":"\ud83e\udebd What is Postal III Ultrapatch Angel?"},{"location":"angel/what_is_angel/#featuresfixes","text":"Check ModDB Postal III Ultrapatch+Angel releases for a more in-depth list, or check out the AngelScript Docs .","title":"Features/Fixes"},{"location":"angel/what_is_angel/#points-of-interest","text":"AngelScript scripting language with over 500+ functions and 20+ classes (if you are also counting the methods) Multiplayer support (Multiplayer was fixed where it could be enjoyable but it doesn't fix all the issues) Everything from Ultrapatch Custom entities to help with modding (FGD added with releases) AngelScript support for Addons","title":"Points of interest"},{"location":"attackfuncs/hit/","text":"Hit \uf0c1 Sets weapon proficiency and forces the NPC to attack Syntax Hit [float] -- Sets weapon proficiency, and attacks if possible // from ai_st_init.p3s Const SPREAD_BLIND,20 Const SPREAD_MAX,10 Const SPREAD_WIDE,6 Const SPREAD_NORMAL,3 Const SPREAD_ACCURACY,1 // from ai_mission_as.p3s Const SPRD_SNIPE_NERD,5 Const SPRD_NORM_NERD,10 Const SPRD_MOVE_NERD,20 Const SPRD_LEAN_NERD,40 Example // from ai_mission_jwb.p3s pt_attack { actions { ExecutePattern .xpt_SayFight // NPC is a pro at shooting Hit 1 Wait 1 State st_start } } // from ai_mission_pdb.p3s // NPC is seemingly stupid at firing, but when you get closer you'll get punished pt_attack { actions { TargetPlayer 1 ExecutePattern .xpt_say IfAttr \"slot#msGP.PlayerNear == 0 Block begin\" Hit SPREAD_BLIND Wait 1:2 Block end IfAttr \"slot#msGP.PlayerNear == 1 Block begin\" Hit SPREAD_ACCURACY FireEvent Hit ChangeAttr \"target.ea_health -15\" Wait 0.5 Block end Repeat 0 } }","title":"Hit"},{"location":"attackfuncs/hit/#hit","text":"Sets weapon proficiency and forces the NPC to attack","title":"Hit"},{"location":"attackfuncs/push/","text":"Push \uf0c1 Makes an NPC perform a shove/push melee attack. Note Victim and attacker cannot be the same. Syntax Push self,target,easy -- Plays flinching animations, but no damage Push self,target,medium -- Deals slight damage to target Push self,target,hard -- Deals heavy damage to target Example // From ai_citizen.p3s // Plays animation and deals damage at the same time pt_bump { actions { TargetCaller 1 TargetToMem msTARGET IfAttr \"ea_Manner == Manner:RedNeck and slot#msTARGET.ea_Manner == StreetBro Block begin\" Face true Sequence seq.melee_push Push self,target,medium Block end IfAttr \"ea_Manner == Manner:StreetBro and slot#msTARGET.ea_Manner == StreetBro Block begin\" Face true Sequence seq.melee_push Push self,target,medium Block end IfAttr \"ea_Manner == Manner:CuteGirl and slot#msTARGET.ea_Manner == StreetBro Block begin\" Face true Sequence seq.melee_push Push self,target,medium Block end State st_start } }","title":"Push"},{"location":"attackfuncs/push/#push","text":"Makes an NPC perform a shove/push melee attack. Note Victim and attacker cannot be the same.","title":"Push"},{"location":"attackfuncs/weapon_reload_throwgrenade/","text":"Weapon-related Functions \uf0c1 Weapon \uf0c1 Sets NPC's current weapon state. Syntax Weapon select,melee -- Selects melee weapon, if available Weapon select,ranged -- Selects ranged weapon, if available Weapon arm -- Automatically selects weapon Weapon disarm -- Holsters active weapon Weapon drop -- Drops active weapon (won't drop if it's not out) \ud83c\udd99\ud83e\udebd Postal III Ultrapatch Syntax \uf0c1 Weapon pickup -- Attempts to pick up weapon off from the ground, if the target is a weapon and is dropped. Example // From ai_mission_pdb.p3s st_OnSprayStunned { Group Alert Patterns { pt_default { actions { AreaEvent ENEMY,16 // Drops weapon Weapon drop ExecutePattern bh_base:st_OnSprayStunned.pt_default } } } } // From ai_mission_srm.p3s // This will unholster it's weapon and aim at the Player pt_attack { actions { Timer attacktimer,2:3,repeated TargetPlayer 1 MoveToTarget false FreeMovement false Weapon Arm Aim true State st_hitit } } Reload \uf0c1 Forces NPC to play reloading animation. Syntax Reload 1 -- Reloads Example // From ai_npc_military.p3s (stripped out) pt_default { actions { IfAttr \"ea_HaveAmmo == 0 Block begin\" ExecutePattern st_reload.xpt_prereload Reload 1 WaitForEnd 1 Block end State st_start } } ThrowGrenade \uf0c1 Forces NPC to throw a grenade Note Smoke and Flash grenade are never used anywhere else in the game. Flash isn't recommended to use as it'll apply a permanent sound altering effect. Syntax // Grenade types frag smoke -- Unused flash -- Unused (not recommended to use this) beenest molotov krotchy_toy ThrowGrenade 1,[grenade type],[no_ally] -- Throws grenade, optional flag Example behavior { name bh_molotovthrower inherited bh_human States { st_start { Group Neutral Patterns { pt_default { actions { // Do nothing but throw molotovs at the Player every 5 seconds SetSquadRelation player_squad:enemy:10 TargetPlayer 1 Wait 1 ThrowGrenade 1, molotov Repeat 5 } } } } } }","title":"Weapon, Reload, ThrowGrenade"},{"location":"attackfuncs/weapon_reload_throwgrenade/#weapon-related-functions","text":"","title":"Weapon-related Functions"},{"location":"attackfuncs/weapon_reload_throwgrenade/#weapon","text":"Sets NPC's current weapon state.","title":"Weapon"},{"location":"attackfuncs/weapon_reload_throwgrenade/#postal-iii-ultrapatch-syntax","text":"Weapon pickup -- Attempts to pick up weapon off from the ground, if the target is a weapon and is dropped.","title":"\ud83c\udd99\ud83e\udebd Postal III Ultrapatch Syntax"},{"location":"attackfuncs/weapon_reload_throwgrenade/#reload","text":"Forces NPC to play reloading animation.","title":"Reload"},{"location":"attackfuncs/weapon_reload_throwgrenade/#throwgrenade","text":"Forces NPC to throw a grenade Note Smoke and Flash grenade are never used anywhere else in the game. Flash isn't recommended to use as it'll apply a permanent sound altering effect.","title":"ThrowGrenade"},{"location":"attribchecking/attributes/","text":"Attributes \uf0c1 In Postal3Script you are able to set or check Attributes, and execute states according to the results. All attributes in Postal3Script are integers only. When checking against multiple attributes at once you can use the AND keyword. IfAttr \uf0c1 Checks if an Attribute or Object has met a condition. Bugs The Attribute or Object MUST be set using the SetAttr function first, or already exist. If it doesn't exist, IfAttr will NOT work properly, so keep this in mind! st_IfAttrTutorial { Group Neutral Patterns { pt_default { actions { // Check for my faction, if it's Zealots then I love animals IfAttr \"ea_faction == Faction:Zealots SetAttr LoveAnimals 1\" // My target is the player, so I will hate them IfAttr \"Object:target == Object:player SetAttr HatesPlayer 1\" // I have no ranged weapon, but I do have a melee weapon, then I'll bring up my weapon IfAttr \"HasWeapon:Ranged == 0 and HasWeapon:melee > 0 Block begin\" IfAttr \"HasWeapon:melee != 2 SetAttr WeaponChanged 1\" Weapon select,melee SetAttr \"ea_status sPUNISHER\" Block end // Player is forgiven according to the timer IfAttr \"Timer:tForgivePlayer < = 0 Pattern pt_end\" // State didn't execute from the Player, returning from this point IfAttr \"Object:caller != Object:player Return 1\" // My target loves animals?? No way! IfAttr \"target.LoveAnimals == 1 Return 1\" // My enemy of my enemy... is my enemy now! IfAttr \"target.Object:target != Object:null Block begin\" AssistTarget 1 Block end // My target is the Player, and they have their python out IfAttr \"Object:target == Object:player and target.ea_games == 1 State so_seepiss\" } } } } SetAttr \uf0c1 Creates and sets a new attribute value if it doesn't exist, or just sets it if it already exists. Third and fourth parameter is for setting a minimum and maximum value for ChangeAttr If no parameters are given , the minimum and maximum value of the attribute will always be 0 and 100 A minimum and maximum value can be set like this: SetAttr \"myattribute [initial value],[minimum],[maximum]\" Constants { Const YES,1 Const NO,0 } st_SetAttrTutorial { Group Neutral Patterns { pt_default { actions { SetAttr \"IamTheDevil 666\" // Supports constants SetAttr \"y_Yes YES\" SetAttr \"n_No NO\" SetAttr \"ea_status sNEUTRAL\" SetAttr \"reaction RE_NONE\" // Set an attribute with minimum and maximum values // this should be 0 for min, and 100 for max SetAttr \"rnd 0,0,100\" // this should be 5 for min and 75 for max SetAttr \"rndtwo 25,5,75\" // this will execute events for ChangeAttr (although it works without on_change_event) SetAttr \"myattribute 5,0,100,on_change_event\" // Sets other object's attribute SetAttr \"target.cr_demo YES\" SetAttr \"caller.cr_demo NO\" } } } } CheckAttr \uf0c1 Checks if an Attribute exists or not. Works with Ammo type. st_CheckAttrTutorial { Group Neutral Patterns { pt_default { actions { CheckAttr \"flag_static Return 1\" CheckAttr \"greet_sleazy Say SLEEZ\" CheckAttr \"AnimalNotCat Say LIKESANIMAL\" CheckAttr \"AnimalCat Say LIKESANIMAL,LIKESCAT\" SetAttr \"exists 0\" CheckAttr \"myattrib Block begin\" SetAttr \"exists 1\" Block end IfAttr \"exists == 1 Block begin\" Pattern pt_somepattern Block end SetAttr \"I_have_ammo 0\" CheckAttr \"Ammo:self SetAttr I_have_ammo 1\" } } } } ChangeAttr \uf0c1 Changes an already existing Attribute's value, increasing, decreasing, multiplying, or by halving. Warning ChangeAttr has some several flaws that must be kept in mind: It MUST have an operator, simply having a number inside the parameter without an operator will NOT touch the attribute! Will ONLY work within the attribute's minimum and maximum values. If value will exceed the attribute's maximum value, it will reset back to it's minimum value. Halving will round the value upwards ('5 / 2' would be '3'). Attribute MUST exist when you try to modify it! It has the same flaws like IfAttr. A minimum and maximum value can be set via SetAttr: SetAttr \"myattribute [initial value],[minimum],[maximum]\" Note Creates or executes the following events: OnAttrMin_[attribute] -- executes when Attribute reaches it's set minimum value OnAttrMax_[attribute] -- executes when Attribute reaches it's set maximum value OnAttrChange_[attribute] -- executes whenever Attribute's value changes st_ChangeAttrTutorial { Group Neutral Patterns { pt_default { actions { // Randomization ChangeAttr \"poo_rnd 0:100\" ChangeAttr \"combat_rnd 0:1\" ChangeAttr \"DonutsIHave +1\" ChangeAttr \"PooIGive -1\" ChangeAttr \"Multiply *5\" ChangeAttr \"Halve /5\" // Change Health on the fly ChangeAttr \"ea_health +25\" // Set this Attribute to absolute zero ChangeAttr \"MyAttribute -MyAttribute\" } } } events { OnAttrMin_PooIGive \"State st_createmorepoo\" OnAttrMax_DonutsIHave \"State st_eatdonuts\" OnAttrChange_ea_health \"EmitSound munchmunch\" } } RemoveAttr \uf0c1 Removes an already existing Attribute. Cannot be accessed and isn't set anymore. Note Creates or executes the following event: OnAttrRemove_[attribute] -- executes when Attribute was removed st_RemoveAttrTutorial { Group Neutral Patterns { pt_default { actions { RemoveAttr \"flag_PlayerFriendly\" RemoveAttr \"poo_rnd\" RemoveAttr \"IamTheDevil\" } } } events { OnAttrRemove_IamTheDevil \"EmitSound darthvader_noooooo\" } }","title":"IfAttr, SetAttr, CheckAttr, ChangeAttr, RemoveAttr"},{"location":"attribchecking/attributes/#attributes","text":"In Postal3Script you are able to set or check Attributes, and execute states according to the results. All attributes in Postal3Script are integers only. When checking against multiple attributes at once you can use the AND keyword.","title":"Attributes"},{"location":"attribchecking/attributes/#ifattr","text":"Checks if an Attribute or Object has met a condition. Bugs The Attribute or Object MUST be set using the SetAttr function first, or already exist. If it doesn't exist, IfAttr will NOT work properly, so keep this in mind! st_IfAttrTutorial { Group Neutral Patterns { pt_default { actions { // Check for my faction, if it's Zealots then I love animals IfAttr \"ea_faction == Faction:Zealots SetAttr LoveAnimals 1\" // My target is the player, so I will hate them IfAttr \"Object:target == Object:player SetAttr HatesPlayer 1\" // I have no ranged weapon, but I do have a melee weapon, then I'll bring up my weapon IfAttr \"HasWeapon:Ranged == 0 and HasWeapon:melee > 0 Block begin\" IfAttr \"HasWeapon:melee != 2 SetAttr WeaponChanged 1\" Weapon select,melee SetAttr \"ea_status sPUNISHER\" Block end // Player is forgiven according to the timer IfAttr \"Timer:tForgivePlayer < = 0 Pattern pt_end\" // State didn't execute from the Player, returning from this point IfAttr \"Object:caller != Object:player Return 1\" // My target loves animals?? No way! IfAttr \"target.LoveAnimals == 1 Return 1\" // My enemy of my enemy... is my enemy now! IfAttr \"target.Object:target != Object:null Block begin\" AssistTarget 1 Block end // My target is the Player, and they have their python out IfAttr \"Object:target == Object:player and target.ea_games == 1 State so_seepiss\" } } } }","title":"IfAttr"},{"location":"attribchecking/attributes/#setattr","text":"Creates and sets a new attribute value if it doesn't exist, or just sets it if it already exists. Third and fourth parameter is for setting a minimum and maximum value for ChangeAttr If no parameters are given , the minimum and maximum value of the attribute will always be 0 and 100 A minimum and maximum value can be set like this: SetAttr \"myattribute [initial value],[minimum],[maximum]\" Constants { Const YES,1 Const NO,0 } st_SetAttrTutorial { Group Neutral Patterns { pt_default { actions { SetAttr \"IamTheDevil 666\" // Supports constants SetAttr \"y_Yes YES\" SetAttr \"n_No NO\" SetAttr \"ea_status sNEUTRAL\" SetAttr \"reaction RE_NONE\" // Set an attribute with minimum and maximum values // this should be 0 for min, and 100 for max SetAttr \"rnd 0,0,100\" // this should be 5 for min and 75 for max SetAttr \"rndtwo 25,5,75\" // this will execute events for ChangeAttr (although it works without on_change_event) SetAttr \"myattribute 5,0,100,on_change_event\" // Sets other object's attribute SetAttr \"target.cr_demo YES\" SetAttr \"caller.cr_demo NO\" } } } }","title":"SetAttr"},{"location":"attribchecking/attributes/#checkattr","text":"Checks if an Attribute exists or not. Works with Ammo type. st_CheckAttrTutorial { Group Neutral Patterns { pt_default { actions { CheckAttr \"flag_static Return 1\" CheckAttr \"greet_sleazy Say SLEEZ\" CheckAttr \"AnimalNotCat Say LIKESANIMAL\" CheckAttr \"AnimalCat Say LIKESANIMAL,LIKESCAT\" SetAttr \"exists 0\" CheckAttr \"myattrib Block begin\" SetAttr \"exists 1\" Block end IfAttr \"exists == 1 Block begin\" Pattern pt_somepattern Block end SetAttr \"I_have_ammo 0\" CheckAttr \"Ammo:self SetAttr I_have_ammo 1\" } } } }","title":"CheckAttr"},{"location":"attribchecking/attributes/#changeattr","text":"Changes an already existing Attribute's value, increasing, decreasing, multiplying, or by halving. Warning ChangeAttr has some several flaws that must be kept in mind: It MUST have an operator, simply having a number inside the parameter without an operator will NOT touch the attribute! Will ONLY work within the attribute's minimum and maximum values. If value will exceed the attribute's maximum value, it will reset back to it's minimum value. Halving will round the value upwards ('5 / 2' would be '3'). Attribute MUST exist when you try to modify it! It has the same flaws like IfAttr. A minimum and maximum value can be set via SetAttr: SetAttr \"myattribute [initial value],[minimum],[maximum]\" Note Creates or executes the following events: OnAttrMin_[attribute] -- executes when Attribute reaches it's set minimum value OnAttrMax_[attribute] -- executes when Attribute reaches it's set maximum value OnAttrChange_[attribute] -- executes whenever Attribute's value changes st_ChangeAttrTutorial { Group Neutral Patterns { pt_default { actions { // Randomization ChangeAttr \"poo_rnd 0:100\" ChangeAttr \"combat_rnd 0:1\" ChangeAttr \"DonutsIHave +1\" ChangeAttr \"PooIGive -1\" ChangeAttr \"Multiply *5\" ChangeAttr \"Halve /5\" // Change Health on the fly ChangeAttr \"ea_health +25\" // Set this Attribute to absolute zero ChangeAttr \"MyAttribute -MyAttribute\" } } } events { OnAttrMin_PooIGive \"State st_createmorepoo\" OnAttrMax_DonutsIHave \"State st_eatdonuts\" OnAttrChange_ea_health \"EmitSound munchmunch\" } }","title":"ChangeAttr"},{"location":"attribchecking/attributes/#removeattr","text":"Removes an already existing Attribute. Cannot be accessed and isn't set anymore. Note Creates or executes the following event: OnAttrRemove_[attribute] -- executes when Attribute was removed st_RemoveAttrTutorial { Group Neutral Patterns { pt_default { actions { RemoveAttr \"flag_PlayerFriendly\" RemoveAttr \"poo_rnd\" RemoveAttr \"IamTheDevil\" } } } events { OnAttrRemove_IamTheDevil \"EmitSound darthvader_noooooo\" } }","title":"RemoveAttr"},{"location":"attribchecking/embedattributes/","text":"Embedded Attributes \uf0c1 Instead of unexposed C++ variables in the source code, there are attributes that are already \"embedded\" and read from a related Postal3Script for given entities. For example, \"ea_health\" is the health of the entity that uses the assigned p3s behaviour, or the health of a set target, and can be read, changed, and set using the various \"Attr\" statements. There are a variety of attributes and they each serve their own purposes. Note Embedded Attributes have the ea_ prefix. \ud83c\udd99\ud83e\udebd Ultrapatch Embedded Attributes \uf0c1 \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature These embedded attributes below will only work with Postal III Ultrapatch. ImAnAnimal -- Entity is an animal NPC, if it exist ImAHuman -- Entity is a Human NPC, if it exist ImACat -- Entity is a Cat NPC, if it exist ImADog -- Entity is a Dog NPC, if it exist ImAMonkey -- Entity is a Monkey NPC, if it exist ImMotorhead -- Entity is Motorhead, if it exist ImAHelicopter -- Entity is a Helicopter, if it exist ImAPigeon -- Entity is a Pigeon NPC, if it exist ImAPoliceman -- Entity is an unused Policeman-type Human NPC, if it exist ImAMilitary -- Entity is a Military-type Human NPC, if it exist ImACitizen -- Entity is a Citizen-type Human NPC, if it exist ImARhino -- Entity is a Rhino-type Animal NPC, if it exist ImASimDriver -- Entity is a Sim Driver-type Citizen NPC, if it exist ImHugoChavez -- Entity is Hugo Chavez Sim Driver NPC, if it exist ea_glow -- Entity will glow if Player looks at it, if it exist active -- (Weapon) If it's 1 they can be seen, not holstered dropped -- (Weapon) By default (on spawn) is 0 flag_boss -- NPC is a boss, used for missions and achievements, if it exist \ud83e\udebd Angel Embedded Attributes \uf0c1 \ud83e\udebd Postal III Ultrapatch Angel-only feature These embedded attributes below will only work with Postal III Ultrapatch Angel. ea_allowpickup -- (Interactable prop) Pick up is allowed, if it exist ea_propMotion -- (Interactable prop) Motion is enabled on hurt, if it exist ea_touch -- (Interactable prop) Entity is able to feel, if it exist as_restore -- Fires OnASRestore on save game load on the entity, if it exist as_transition -- Fires OnASTransition on transition load on the entity, if it exist All Embedded Attributes \uf0c1 flag_zombie -- NPC is a boss, used for missions and achievements, if it exist flag_bystander -- NPC is a bystander, used for missions and achievements, if it exist SnatchBiteDamage -- Used for overriding snatch bite damage for animals ea_lean -- Whether NPC or Player is currently covering ea_consciousness -- Gets or sets the consciousness of an NPC, setting it to zero does nothing ea_health -- Health ea_status -- Status (Killer, Victim, Corpse, etc..) ea_armed -- Stored/Active Weapon ID ea_hostage -- Whether the Player currently has a hostage ea_NumEnemy -- Number of enemies ea_NumFear -- Number of fear enemies ea_NumVisibleEnemy -- Number of visible enemies ea_NumVisibleFear -- Number of visible fear enemies ea_ammo -- Gets the Ammo of NPC's weapon (broken) ea_Faction -- Faction ea_Manner -- Manner ea_ActiveWeapon -- Gets the weapon type -1 = FLESH 0 = NONE 1 = ANIMAL 2 = GADGET 3 = NONLETHAL_MELEE 4 = NONLETHAL_RANGED 5 = MELEE 6 = RANGED 7 = BIGGUN ea_games -- Whether the Player is currently peeing (0 if they aren't) ea_takeable -- Player can interact with Cat/Human by pressing USE on them ea_distance -- UNUSED, won't do anything ea_name -- Given name by the mapper to the entity ea_crit_disabled -- Taken crit damage (is this a leftover from TF2?) ea_no_gibs -- NPC's limbs can no longer be deattached if died ea_dmg_absorb -- ALL Damage type absorption ea_flamedmg_absorb -- Flame DMG absorption (DMG_BURN) ea_bulletdmg_absorb -- Bullet DMG absorption (DMG_BULLET) ea_clubdmg_absorb -- Club DMG absorption (DMG_CLUB) ea_physdmg_absorb -- Physics DMG absorption (DMG_CRUSH) ea_fakedmg_absorb -- UNUSED (DMG_PHYSGUN), this attribute still works and functions ea_blastdmg_absorb -- Blast Explosion DMG absorption (DMG_BLAST) ea_krotchydmg_absorb -- Krotchy DMG absorption (DMG_BUCKSHOT), parallel to Blast DMG ea_blast_immune -- Blast from Explosion immunity, boltons won't fall off from the NPC ea_tased -- Whether the NPC is currently tased ea_autokill -- NPC will disappear if it's too far from the Player (1920 Hammer units) ea_gibs -- Only exists on ragdolls 1 = Full body/Lower body/Lower body with legs 3 = Single Head/Upper body with head (and arms) 4 = Single Arm/Single Leg/Upper body (with arms) Embedded Attribute Example \uf0c1 st_EmbeddedAttrTutorial { Group Neutral Patterns { pt_default { actions { SetAttr \"covering 0\" IfAttr \"ea_lean == 1 SetAttr covering 1\" SetAttr \"ea_consciousness 120\" SetAttr \"ea_health 100\" IfAttr \"target.ea_status == sCORPSE Pattern pt_eeek\" IfAttr \"ea_armed != WPN_NONE Pattern pt_gungun\" IfAttr \"ea_hostage == 1 Pattern pt_victim\" IfAttr \"ea_NumEnemy > 0 Pattern pt_seek\" IfAttr \"ea_NumFear > 0 Pattern pt_fear\" IfAttr \"ea_NumVisibleEnemy > 0 Pattern pt_destroy\" IfAttr \"ea_NumVisibleFear > 0 Pattern pt_hide\" // Note: ea_ammo is broken IfAttr \"ea_ammo == 0 Pattern pt_reload\" IfAttr \"ea_Faction == Faction:Player Pattern pt_player\" IfAttr \"ea_Manner == Manner:Police Pattern pt_police\" IfAttr \"Object:target == Object:Player AND ea_ActiveWeapon < 6 Pattern pt_meleeOnly\" IfAttr \"Object:target == Object:Player AND target.ea_games == 1 Pattern pt_yuck\" SetAttr \"ea_takeable 0\" IfAttr \"ea_name == String:pizza_vendor State st_vendor\" SetAttr \"ea_crit_disabled 1\" SetAttr \"ea_no_gibs 1\" SetAttr \"ea_dmg_absorb 50\" SetAttr \"ea_flamedmg_absorb 50\" SetAttr \"ea_clubdmg_absorb 50\" SetAttr \"ea_physdmg_absorb 50\" SetAttr \"ea_fakedmg_absorb 50\" SetAttr \"ea_blastdmg_absorb 50\" SetAttr \"ea_krotchydmg_absorb 50\" SetAttr \"ea_blast_immune 1\" CheckAttr \"ea_tased RemoveAttr ea_tased\" SetAttr \"ea_autokill 1\" } } } }","title":"Embedded Attributes"},{"location":"attribchecking/embedattributes/#embedded-attributes","text":"Instead of unexposed C++ variables in the source code, there are attributes that are already \"embedded\" and read from a related Postal3Script for given entities. For example, \"ea_health\" is the health of the entity that uses the assigned p3s behaviour, or the health of a set target, and can be read, changed, and set using the various \"Attr\" statements. There are a variety of attributes and they each serve their own purposes. Note Embedded Attributes have the ea_ prefix.","title":"Embedded Attributes"},{"location":"attribchecking/embedattributes/#ultrapatch-embedded-attributes","text":"\ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature These embedded attributes below will only work with Postal III Ultrapatch. ImAnAnimal -- Entity is an animal NPC, if it exist ImAHuman -- Entity is a Human NPC, if it exist ImACat -- Entity is a Cat NPC, if it exist ImADog -- Entity is a Dog NPC, if it exist ImAMonkey -- Entity is a Monkey NPC, if it exist ImMotorhead -- Entity is Motorhead, if it exist ImAHelicopter -- Entity is a Helicopter, if it exist ImAPigeon -- Entity is a Pigeon NPC, if it exist ImAPoliceman -- Entity is an unused Policeman-type Human NPC, if it exist ImAMilitary -- Entity is a Military-type Human NPC, if it exist ImACitizen -- Entity is a Citizen-type Human NPC, if it exist ImARhino -- Entity is a Rhino-type Animal NPC, if it exist ImASimDriver -- Entity is a Sim Driver-type Citizen NPC, if it exist ImHugoChavez -- Entity is Hugo Chavez Sim Driver NPC, if it exist ea_glow -- Entity will glow if Player looks at it, if it exist active -- (Weapon) If it's 1 they can be seen, not holstered dropped -- (Weapon) By default (on spawn) is 0 flag_boss -- NPC is a boss, used for missions and achievements, if it exist","title":"\ud83c\udd99\ud83e\udebd Ultrapatch Embedded Attributes"},{"location":"attribchecking/embedattributes/#angel-embedded-attributes","text":"\ud83e\udebd Postal III Ultrapatch Angel-only feature These embedded attributes below will only work with Postal III Ultrapatch Angel. ea_allowpickup -- (Interactable prop) Pick up is allowed, if it exist ea_propMotion -- (Interactable prop) Motion is enabled on hurt, if it exist ea_touch -- (Interactable prop) Entity is able to feel, if it exist as_restore -- Fires OnASRestore on save game load on the entity, if it exist as_transition -- Fires OnASTransition on transition load on the entity, if it exist","title":"\ud83e\udebd Angel Embedded Attributes"},{"location":"attribchecking/embedattributes/#all-embedded-attributes","text":"flag_zombie -- NPC is a boss, used for missions and achievements, if it exist flag_bystander -- NPC is a bystander, used for missions and achievements, if it exist SnatchBiteDamage -- Used for overriding snatch bite damage for animals ea_lean -- Whether NPC or Player is currently covering ea_consciousness -- Gets or sets the consciousness of an NPC, setting it to zero does nothing ea_health -- Health ea_status -- Status (Killer, Victim, Corpse, etc..) ea_armed -- Stored/Active Weapon ID ea_hostage -- Whether the Player currently has a hostage ea_NumEnemy -- Number of enemies ea_NumFear -- Number of fear enemies ea_NumVisibleEnemy -- Number of visible enemies ea_NumVisibleFear -- Number of visible fear enemies ea_ammo -- Gets the Ammo of NPC's weapon (broken) ea_Faction -- Faction ea_Manner -- Manner ea_ActiveWeapon -- Gets the weapon type -1 = FLESH 0 = NONE 1 = ANIMAL 2 = GADGET 3 = NONLETHAL_MELEE 4 = NONLETHAL_RANGED 5 = MELEE 6 = RANGED 7 = BIGGUN ea_games -- Whether the Player is currently peeing (0 if they aren't) ea_takeable -- Player can interact with Cat/Human by pressing USE on them ea_distance -- UNUSED, won't do anything ea_name -- Given name by the mapper to the entity ea_crit_disabled -- Taken crit damage (is this a leftover from TF2?) ea_no_gibs -- NPC's limbs can no longer be deattached if died ea_dmg_absorb -- ALL Damage type absorption ea_flamedmg_absorb -- Flame DMG absorption (DMG_BURN) ea_bulletdmg_absorb -- Bullet DMG absorption (DMG_BULLET) ea_clubdmg_absorb -- Club DMG absorption (DMG_CLUB) ea_physdmg_absorb -- Physics DMG absorption (DMG_CRUSH) ea_fakedmg_absorb -- UNUSED (DMG_PHYSGUN), this attribute still works and functions ea_blastdmg_absorb -- Blast Explosion DMG absorption (DMG_BLAST) ea_krotchydmg_absorb -- Krotchy DMG absorption (DMG_BUCKSHOT), parallel to Blast DMG ea_blast_immune -- Blast from Explosion immunity, boltons won't fall off from the NPC ea_tased -- Whether the NPC is currently tased ea_autokill -- NPC will disappear if it's too far from the Player (1920 Hammer units) ea_gibs -- Only exists on ragdolls 1 = Full body/Lower body/Lower body with legs 3 = Single Head/Upper body with head (and arms) 4 = Single Arm/Single Leg/Upper body (with arms)","title":"All Embedded Attributes"},{"location":"attribchecking/embedattributes/#embedded-attribute-example","text":"st_EmbeddedAttrTutorial { Group Neutral Patterns { pt_default { actions { SetAttr \"covering 0\" IfAttr \"ea_lean == 1 SetAttr covering 1\" SetAttr \"ea_consciousness 120\" SetAttr \"ea_health 100\" IfAttr \"target.ea_status == sCORPSE Pattern pt_eeek\" IfAttr \"ea_armed != WPN_NONE Pattern pt_gungun\" IfAttr \"ea_hostage == 1 Pattern pt_victim\" IfAttr \"ea_NumEnemy > 0 Pattern pt_seek\" IfAttr \"ea_NumFear > 0 Pattern pt_fear\" IfAttr \"ea_NumVisibleEnemy > 0 Pattern pt_destroy\" IfAttr \"ea_NumVisibleFear > 0 Pattern pt_hide\" // Note: ea_ammo is broken IfAttr \"ea_ammo == 0 Pattern pt_reload\" IfAttr \"ea_Faction == Faction:Player Pattern pt_player\" IfAttr \"ea_Manner == Manner:Police Pattern pt_police\" IfAttr \"Object:target == Object:Player AND ea_ActiveWeapon < 6 Pattern pt_meleeOnly\" IfAttr \"Object:target == Object:Player AND target.ea_games == 1 Pattern pt_yuck\" SetAttr \"ea_takeable 0\" IfAttr \"ea_name == String:pizza_vendor State st_vendor\" SetAttr \"ea_crit_disabled 1\" SetAttr \"ea_no_gibs 1\" SetAttr \"ea_dmg_absorb 50\" SetAttr \"ea_flamedmg_absorb 50\" SetAttr \"ea_clubdmg_absorb 50\" SetAttr \"ea_physdmg_absorb 50\" SetAttr \"ea_fakedmg_absorb 50\" SetAttr \"ea_blastdmg_absorb 50\" SetAttr \"ea_krotchydmg_absorb 50\" SetAttr \"ea_blast_immune 1\" CheckAttr \"ea_tased RemoveAttr ea_tased\" SetAttr \"ea_autokill 1\" } } } }","title":"Embedded Attribute Example"},{"location":"deletedfuncs/actbusy/","text":"ActBusy \uf0c1 Deleted Postal3Script function. Enables or Disables an NPC's act busy state. Syntax ActBusy [true/false]","title":"ActBusy"},{"location":"deletedfuncs/actbusy/#actbusy","text":"Deleted Postal3Script function. Enables or Disables an NPC's act busy state.","title":"ActBusy"},{"location":"deletedfuncs/arm/","text":"Arm \uf0c1 Deleted Postal3Script function Sets melee status for the NPC, superseded by \"Weapon\" Syntax Arm [boolean],melee -- Sets melee status, and holsters weapon if possible Example // from ai_st11_urza.p3s pt_arm_melee { actions { Block Begin,Execute Aim false Arm True,melee IfAttr \"ea_status < 1 SetAttr ea_status 1\" Block End } }","title":"Arm"},{"location":"deletedfuncs/arm/#arm","text":"Deleted Postal3Script function Sets melee status for the NPC, superseded by \"Weapon\"","title":"Arm"},{"location":"deletedfuncs/desertsquad/","text":"DesertSquad \uf0c1 Unknown/Deleted Postal3Script function No mention anywhere of it's existence in Postal3Script files Parameter for it is called \"Intent\" Does nothing as it's code is next to zero, but P3S will not emit any error logs if trying to use it","title":"DesertSquad"},{"location":"deletedfuncs/desertsquad/#desertsquad","text":"Unknown/Deleted Postal3Script function No mention anywhere of it's existence in Postal3Script files Parameter for it is called \"Intent\" Does nothing as it's code is next to zero, but P3S will not emit any error logs if trying to use it","title":"DesertSquad"},{"location":"deletedfuncs/fear/","text":"Fear \uf0c1 Unused/Deleted Postal3Script function. Turns on or off NPC's ability to fear. Warning Technically this function still exists and will execute without errors, but will NOT do anything. Syntax Fear [true/false]","title":"Fear"},{"location":"deletedfuncs/fear/#fear","text":"Unused/Deleted Postal3Script function. Turns on or off NPC's ability to fear. Warning Technically this function still exists and will execute without errors, but will NOT do anything.","title":"Fear"},{"location":"deletedfuncs/holsterweapon/","text":"HolsterWeapon \uf0c1 Deleted Postal3Script function. Holsters or Unholsters NPC's stored weapon, superseded by Weapon . Syntax HolsterWeapon [boolean] -- Holsters or Unholsters NPC's stored weapon Example // From ai_st11_urza.p3s pt_disarm { actions { HolsterWeapon true Arm false SetAttr \"ea_armed 0\" } }","title":"HolsterWeapon"},{"location":"deletedfuncs/holsterweapon/#holsterweapon","text":"Deleted Postal3Script function. Holsters or Unholsters NPC's stored weapon, superseded by Weapon .","title":"HolsterWeapon"},{"location":"miscfuncs/addfluid/","text":"AddFluid \uf0c1 Unused Postal3Script function. Spawn gasoline fluid at a specified location. Note Equivalent of the p3_fluids_addgasoline console command. Syntax AddFluid [xpos],[ypos],[zpos],[amount] -- Spawns gasoline fluid Note Default amount is '300' if no amount is provided. Example pt_default { actions { // From ai_mission_pdb.p3s Wait 0.9 EntFireInput tutor03_teleport,Teleport EntFireInput \"pcc,Command:use p3_weapon_emptyhands\" EntFireInput \"lpp,RemoveWeapon:p3_weapon_grenade\" // Spawn Gasoline trails at this location AddFluid \"171,670,100,300000\" AddFluid \"-318,931,80,300000\" AddFluid \"150,925,100,100000\" AddFluid \"-110,1030,80,200000\" // This would also spawn Gasoline trails at this location AddFluid \"300,312,100\" EntFireInput \"pcc,Command:give p3_weapon_match\" Wait 0.5 MissionLog \"add_primary,tutor04,#P3_PDB_T04_LOG\" ShowMessage #P3_PDB_T04_MSG01 } }","title":"AddFluid"},{"location":"miscfuncs/addfluid/#addfluid","text":"Unused Postal3Script function. Spawn gasoline fluid at a specified location. Note Equivalent of the p3_fluids_addgasoline console command.","title":"AddFluid"},{"location":"miscfuncs/anchor/","text":"Anchor functions \uf0c1 Anchor \uf0c1 Spawns an invisible entity, and sets the pointer to it. Syntax Anchor true,[type] -- Spawns Anchor, [type] is optional Anchor false,[type] -- Removes Anchor from the game, [type] is optional Note [type] is an object type, like target , caller , owner , ... If [type] is not specified, it will execute on the current entity the script being ran from. If [type] is specified and it's not self , it will save the script executioner's location to [type] . Example // This example shows you how to make an NPC run to it's target, and back to it's last known location. st_somestate { Group Alert Patterns { pt_default { actions { TargetCaller 1 // Save this location! Anchor true // Run to my current target! MoveToTarget run,1 Pattern pt_loop } } pt_loop { actions { IfAttr \"Object:target != Object:NULL Block begin\" // We pretty much reached our target IfAttr \"Object:target != Object:anchor Block begin\" IfAttr \"DistTo:target < = 52 Pattern pt_goback\" Block end // We are targeting our anchor! IfAttr \"Object:target == Object:anchor Block begin\" IfAttr \"DistTo:target < = 52 Block begin\" // We pretty much reached our target FreeMovement walk,reset State st_start Block end Block end Block end Repeat 0 } } pt_goback { actions { // Target our Anchor we saved earlier in pt_default! TargetAnchor 1 // Run to it! MoveToTarget run,1 Pattern pt_loop } } } } TargetAnchor \uf0c1 Sets internal target to entity's saved Anchor, if there's any. Syntax TargetAnchor 1 -- Sets internal target to Anchor Note To get an entity's Anchor other than the script executioner's, you will have to use SetTarget .","title":"Anchor, TargetAnchor"},{"location":"miscfuncs/anchor/#anchor-functions","text":"","title":"Anchor functions"},{"location":"miscfuncs/anchor/#anchor","text":"Spawns an invisible entity, and sets the pointer to it.","title":"Anchor"},{"location":"miscfuncs/anchor/#targetanchor","text":"Sets internal target to entity's saved Anchor, if there's any.","title":"TargetAnchor"},{"location":"miscfuncs/areaevent/","text":"AreaEvent \uf0c1 Fires event on nearby P3S entities, with filtering. Syntax AreaEvent [eventname],[radius],[filter1],[filter2],[filter3],... -- Fires area event Note Filtering can be Manner , Faction , and State name. [radius] is always multiplied by 32. Events will be called OnAE_ [eventname] . Multiple filters work via ANY execution, this means the function will execute the event on entities that meet ANY of the criteria! Example // This state is called when an NPC dies, let's do something else with it... st_corpse { Group Alert Patterns { pt_default:ignore_ext_events { actions { // This will only execute for the Player, // since it's Manner and Faction is always \"Player\" AreaEvent \"YouDie,2,Player\" // This however will only execute if an NPC's state is currently st_idle AreaEvent \"ScaryCorpse,3,st_idle\" // If you want to limit it to cops instead... // The event will only be fired if they are in st_idle state, and their Faction // is called Police AreaEvent \"CopScaryCorpse,3,st_idle,Police\" // Let's repeat it.. so events will get fired over and over again Wait 3 Repeat 0 } } } } // We assume this is an NPC behavior's st_idle state, pay attention to the events! // Note: don't copy this as is, as it won't work, but it's an example how it should work st_idle { Group Neutral Patterns { ... } } events { // Note: these events can be Global if you want, since AreaEvent will only get fired if // they are in st_idle state anyway! OnAE_ScaryCorpse \"State st_fear\" OnAE_CopScaryCorpse \"State st_investigate\" }","title":"AreaEvent"},{"location":"miscfuncs/areaevent/#areaevent","text":"Fires event on nearby P3S entities, with filtering.","title":"AreaEvent"},{"location":"miscfuncs/effect/","text":"Effect \uf0c1 Spawn or interact with a specified particle effect. Syntax Effect [slotnum],[effectname],[attachmentpoint],[xpos],[ypos],[zpos],[lifetime],[hitchup] -- Spawns and sets up a particle effect utilizing all parameters Effect [slotnum],[reset] -- Reset an existing particle effect Effect [slotnum],[kill] -- Kill an existing particle effect Note The slotnum parameter is used to refer to an existing particle effect if needed. The hitchup parameter makes it parented to the caller, and makes the position offset relative to the specified attachment point. The attachmentpoint parameter is any bone name of an NPC for example The names of existing particle effects correspond to their names in their related .pcf file, located in Postal III\\p3\\particles . In order to load these particle effects and to view each of the effect names, you will need to load the in-game particle editor in Half-Life 2. Launch Half-Life 2 with the -tools -nop4 launch arguments, and navigate to the particle editor and load one. Doing reset on a particle effect is basically the same thing as killing it If you managed to make Hammer++ work somehow, you can view all the particle effects in it's Particle browser. Example pt_default { actions { // Spawn a Tazer_Hit_Smoke_Fx particle effect assigned to slot 4, attached to the pelvis, // with a z position offset, infinite lifetime, and hitched up to to us... Effect 4,Tazer_Hit_Smoke_Fx,pelvis,0,0,-12,-1,true // Reset the slot 4 particle effect... // (This will make the effect disappear immediately) Effect 4,reset // Kill the slot 4 particle effect... // (This too) Effect 4,false } }","title":"Effect"},{"location":"miscfuncs/effect/#effect","text":"Spawn or interact with a specified particle effect.","title":"Effect"},{"location":"miscfuncs/fire_event_and_user_funcs/","text":"Fire And Event Functions \uf0c1 FireEvent \uf0c1 Fire an FSM script event. Syntax FireEvent [eventname] -- Fire an event with this name FireEvent [eventname],[destinationtype] -- Fire an event with this name and destination type Warning You must have the OnFire_ prefix before the actual function name of your event when you declare it! For example: OnFire_EventFireTest When firing events, you only use the name of the function, without the \"OnFire_\" prefix! The events that you fire are dependant on the targeted entity! Despite being pretty global otherwise, keep in mind that the events you fire are destination specific! Make sure to target the correct entities! Note Here's a list of all the destination types: owner, target, caller, player, point, anchor, slot, self It doesn't matter what state, pattern, or behaviour the event is declared in Note that even if you want the action block empty, in order to declare event functions, you must have an empty one anyway! This is basically the equivalent of the FireFSMScriptEvent entity output Tip You can fire events from entirely seperate entities without inheritance by doing TargetEntByName before you fire them! Example st_state1 { Group Alert Patterns { pt_default { actions { SetAttr \"Test 0\" // When firing events, you only use the name // of the function, without the \"OnFire_\" prefix! FireEvent EventFireTest } } } } st_state2 { Group Neutral Patterns { pt_default { // Note that even if you want the action block empty, in order // to declare event functions, you must have an empty one anyway! actions { } events { // Make sure you have the \"OnFire_\" prefix in your event function name! OnFire_EventFireTest \"ChangeAttr Test +1\" } } } FireEventEx \uf0c1 Unused Postal3Script function. The same as FireEvent , except it only checks for the self destination type parameter, otherwise it will default to target . Warning Only the self destination type parameter is allowed! Syntax FireEventEx [eventname]\" -- Fire an event on the targeted entity FireEventEx [eventname],self\" -- Fire an event with this name with the self destination type Example pt_default { actions { TargetEntByName scary_npc // Target the npc // If the target is close enough to us, fire the GetScared event on ourself! IfAttr \"DistTo:target < 50 FireEventEx GetScared,self\" // Otherwise if our target is far away from us, fire the // CantFindScaredyCat event on our target! IfAttr \"DistTo:target > 150 FireEventEx CantFindScaredyCat\" } } FireUser \uf0c1 Fire user entity inputs set through Hammer on the entity. Warning Activator and the Caller will be the entity itself. Syntax \uf0c1 FireUser 1 -- Fire the slot 1 input FireUser 2 -- Fire the slot 2 input FireUser 3 -- Fire the slot 3 input FireUser 4 -- Fire the slot 4 input EntFireUser \uf0c1 Fire user entity inputs set through Hammer on a named entity. Warning Activator and the Caller will be the entity itself (the one that called the function). Syntax \uf0c1 EntFireUser [ent_name],1 -- Fire the slot 1 input on the entity EntFireUser [ent_name],2 -- Fire the slot 2 input on the entity EntFireUser [ent_name],3 -- Fire the slot 3 input on the entity EntFireUser [ent_name],4 -- Fire the slot 4 input on the entity FireInput \uf0c1 Fire entity inputs on an entity. You can see here the list of all available inputs. Warning Only self and target are supported. Syntax \uf0c1 FireInput target,[input] -- Fires input on the entity's target. FireInput self,[input] -- Fires input on the entity. EntFireInput \uf0c1 Fire entity inputs on a named entity. You can see here the list of all available inputs. Radius is always checked from the executed entity. Syntax \uf0c1 EntFireInput [name],[input] -- Fires input on the named entity. EntFireInput [name],[input]:[param] -- Fires input with param (if supported) on the named entity. EntFireInput [name],[input],[radius] -- Fires input on the named entity if it's around the radius. EntFireInput [name],[input]:[param],[radius] -- Fires input with param (if supported) on the named entity if it's around the radius. OnUser (Events) \uf0c1 Fire user entity outputs set through Hammer on a specific entity. When they are invoked, they can call a Postal3Script event. Only up to 4 are supported. OnUser1 -> OnUser4","title":"FireEvent, FireEventEX, FireUser, EntFireUser, FireInput, EntFireInput, OnUser"},{"location":"miscfuncs/fire_event_and_user_funcs/#fire-and-event-functions","text":"","title":"Fire And Event Functions"},{"location":"miscfuncs/fire_event_and_user_funcs/#fireevent","text":"Fire an FSM script event.","title":"FireEvent"},{"location":"miscfuncs/fire_event_and_user_funcs/#fireeventex","text":"Unused Postal3Script function. The same as FireEvent , except it only checks for the self destination type parameter, otherwise it will default to target . Warning Only the self destination type parameter is allowed!","title":"FireEventEx"},{"location":"miscfuncs/fire_event_and_user_funcs/#fireuser","text":"Fire user entity inputs set through Hammer on the entity. Warning Activator and the Caller will be the entity itself.","title":"FireUser"},{"location":"miscfuncs/fire_event_and_user_funcs/#syntax","text":"FireUser 1 -- Fire the slot 1 input FireUser 2 -- Fire the slot 2 input FireUser 3 -- Fire the slot 3 input FireUser 4 -- Fire the slot 4 input","title":"Syntax"},{"location":"miscfuncs/fire_event_and_user_funcs/#entfireuser","text":"Fire user entity inputs set through Hammer on a named entity. Warning Activator and the Caller will be the entity itself (the one that called the function).","title":"EntFireUser"},{"location":"miscfuncs/fire_event_and_user_funcs/#syntax_1","text":"EntFireUser [ent_name],1 -- Fire the slot 1 input on the entity EntFireUser [ent_name],2 -- Fire the slot 2 input on the entity EntFireUser [ent_name],3 -- Fire the slot 3 input on the entity EntFireUser [ent_name],4 -- Fire the slot 4 input on the entity","title":"Syntax"},{"location":"miscfuncs/fire_event_and_user_funcs/#fireinput","text":"Fire entity inputs on an entity. You can see here the list of all available inputs. Warning Only self and target are supported.","title":"FireInput"},{"location":"miscfuncs/fire_event_and_user_funcs/#syntax_2","text":"FireInput target,[input] -- Fires input on the entity's target. FireInput self,[input] -- Fires input on the entity.","title":"Syntax"},{"location":"miscfuncs/fire_event_and_user_funcs/#entfireinput","text":"Fire entity inputs on a named entity. You can see here the list of all available inputs. Radius is always checked from the executed entity.","title":"EntFireInput"},{"location":"miscfuncs/fire_event_and_user_funcs/#syntax_3","text":"EntFireInput [name],[input] -- Fires input on the named entity. EntFireInput [name],[input]:[param] -- Fires input with param (if supported) on the named entity. EntFireInput [name],[input],[radius] -- Fires input on the named entity if it's around the radius. EntFireInput [name],[input]:[param],[radius] -- Fires input with param (if supported) on the named entity if it's around the radius.","title":"Syntax"},{"location":"miscfuncs/fire_event_and_user_funcs/#onuser-events","text":"Fire user entity outputs set through Hammer on a specific entity. When they are invoked, they can call a Postal3Script event. Only up to 4 are supported. OnUser1 -> OnUser4","title":"OnUser (Events)"},{"location":"miscfuncs/item_spawnitem/","text":"ItemFunctions \uf0c1 Item \uf0c1 Interact with a currently targeted or held item Syntax Item [action] -- Perform an action with the held item (kill, drop, throw, or use) Item take,[attachmentpoint] -- Take the item with a specified attachment point Item throw,[attachmentpointdirection] -- Throw the item at a specified attachmentpoint direction Item kill,[blendtime] -- Dematerialize the item in a specified amount of time then kill/destroy it Warning - \"Item\" also refers to weapon or corpse/limb pickups - NPCs aren't able to pick up weapons off the ground, or interact them in any way in P3S, this is a bug Note Here's a list of all the action types: take , kill , drop , throw , use The attachmentpointdirection parameter takes in the name of the attachment point that is related to the orientation of the NPC, the only attachment point bone direction that is actually used in the p3s scripts is forward . \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Human NPCs can use Item take to take weapons. Example pt_default { actions { // In order to take an item you need to target the entity first! TargetEntByName yummy_item // Take the targeted item entity... Item take,hand_right // In order to interact with a held item you must target it first! TargetItem 1 // Drop the held item... Item drop // Use the held item... Item use // Throw the held item forwards... Item throw,forward // Dematerialize the held item in 0.5 seconds and destroy/kill it... Item kill,0.5 } } SpawnItem \uf0c1 Cause an existing p3_item_spawner entity to spawn an item, and do stuff with the spawned item. Syntax SpawnItem [spawnername],[destinationtype],[attachmentpoint],[blendtime] -- Spawn the held item Note Here's a list of all the destination types: owner , target , caller , point The point destination type uses the default p3_item_spawner entity spawn logic The attachmentpoint parameter is any bone name of an NPC for example The blendtime parameter controls how fast the spawned item will take to fully \"materialize\" The attachmentpoint parameter does not need to be specified or nulled out if you use the point destination type Example pt_default { actions { // Tell our cellphone spawner entity to spawn a cellphone item, // make the owner us, and put it in our right hand... SpawnItem \"spawner_cellphone,owner,hand_right\" // Spawn a drocha item (pornworld jizz rag) using the // default p3_item_spawner spawning logic, and fully materialize it in 0.5 seconds SpawnItem spawn_droch,point,0.5 } }","title":"Item, SpawnItem"},{"location":"miscfuncs/item_spawnitem/#itemfunctions","text":"","title":"ItemFunctions"},{"location":"miscfuncs/item_spawnitem/#item","text":"Interact with a currently targeted or held item","title":"Item"},{"location":"miscfuncs/item_spawnitem/#spawnitem","text":"Cause an existing p3_item_spawner entity to spawn an item, and do stuff with the spawned item.","title":"SpawnItem"},{"location":"missionfuncs/attributeprogressbar/","text":"AttributeProgressBar \uf0c1 Add a panel with a progress bar on the HUD with an associated attribute for the \"progress\" value. Note Used for displaying boss/ally health bars and portraits in missions. Uses .res files located in './p3/resource/UI/Hud/' Syntax AttributeProgressBar \"[panel],show,[attribute]\" -- Show the progress bar panel with the attribute's value hidden AttributeProgressBar \"[panel],show,[attribute],show_value\" -- Show the progress bar panel with the attribute's value shown as well AttributeProgressBar \"[panel],hide\" -- Hide the progress bar Example // (From ai_cashmart_npc.p3s, Cashmart Helicopter boss) SetAttr \"flag_zombie 1\" TargetEntByName gameplay TargetToMem msGP SetAttr \"ea_dmg_absorb 95\" TargetPlayer 1 FireInput self,StartHunt // Show the Panel and assign our health attribute // (\"Postal III/p3/resource/UI/Hud/HeliHealthPanel.res\") AttributeProgressBar \"HeliHealthPanel,show,ea_health\" Timer tShout,5:2","title":"AttributeProgressBar"},{"location":"missionfuncs/attributeprogressbar/#attributeprogressbar","text":"Add a panel with a progress bar on the HUD with an associated attribute for the \"progress\" value. Note Used for displaying boss/ally health bars and portraits in missions. Uses .res files located in './p3/resource/UI/Hud/'","title":"AttributeProgressBar"},{"location":"missionfuncs/endmission/","text":"EndMission \uf0c1 Ends the level, and proceeds to the next level (if possible) Note Equivalent to p3_end_mission console command Example // from ai_mission_daveland.p3s st_end { Group Neutral Patterns { pt_default { actions { EntFireInput lpp,Say:ENDEVENTINSANE Wait 1 EntFireInput muzak.mission,FadeOut:1 MissionLog done,escape EndMission 1 // Alternative way to end a mission EntFireInput \"pcc,Command:p3_end_mission\" } } } }","title":"EndMission"},{"location":"missionfuncs/endmission/#endmission","text":"Ends the level, and proceeds to the next level (if possible) Note Equivalent to p3_end_mission console command","title":"EndMission"},{"location":"missionfuncs/missionlog_save_briefing/","text":"Objective Functions \uf0c1 MissionLog \uf0c1 Adds missions/jobs/objectives on the Player's mission log. Syntax MissionLog clear_all -- Clears all objectives from the log MissionLog add_primary,[obj],[text/string] -- Adds primary objective to the log MissionLog add_secondary,[obj],[text/string] -- Adds secondary objective to the log MissionLog done,[obj1],[obj2], .. -- Objective(s) marked as done MissionLog fail,[obj1],[obj2], .. -- Objective(s) marked as failed MissionLog removed,[obj1],[obj2], .. -- Objective(s) removed without a trace MissionLog disable -- Mission log is disabled MissionLog enable -- Mission log is enabled Example // From ai_mission_jwb.p3s st_start { group Neutral patterns { pt_default { actions { PlayerKarma hide EntFireInput \"lpp,GiveWeapon:p3_weapon_taser\" EntFireInput \"pcc,Command:use p3_weapon_taser\" ExecutePattern .xpt_show_momleft ExecutePattern st_util.xpt_ShowMissionDesc // Adds the objective to the Player's log \"Jen must survive\" MissionLog add_primary,JenSurvive,#P3_JWB_PRIMARY_JEN ExecutePattern .xpt_secondary ShowMessage #P3_JWB_START ShowMessage #P3_JWB_HELPER01 Pattern pt_loop } } // All Soccer Moms have left pt_end { actions { // Objectives marked as done MissionLog done,MomsLeft MissionLog done,JenSurvive SetAttr \"NonLethalDone 1\" IfAttr \"PoliceIsHere == 1 RemoveAttr NonLethalDone\" // Player didn't harm anyone CheckAttr \"NonLethalDone MissionLog done,NonLethal\" EntFireInput fade_in,fade Wait 1 EntFireInput \"pcc,Command:video_exitcmd jwb_3 p3_end_mission\" } } } } MissionSave \uf0c1 Unused Postal3Script function. Warning Not recommended to use. Syntax MissionSave [string] -- Saves the game Technical Details When \"MissionSave\" is called in p3s, it will do \"save P3M_[string] mission [string]\" in console, where [string] is replaced with the parameter. It was to be used or related to 'MissionLog', but it looks like it's underdeveloped. Example // This will create a p3m_b4_zombie_ambush.sav and .tga file in the SAVE folder MissionSave b4_zombie_ambush MissionBriefing \uf0c1 Unused Postal3Script function Shows a message on the screen with black background, with a \"Press ENTER to continue\" prompt. Note Equivalent to gameui_show_p3_briefdlg [string] console command. Example // This will show the very first text screen of Paradise Bridge level MissionBriefing \"#P3_PDB_T01_ONSCREEN\" // This will do the same, but after the pdb_00.bik stopped playing after execution EntFireInput \"pcc,Command:video_exitcmd pdb_00 gameui_show_p3_briefdlg #P3_PDB_T01_ONSCREEN\"","title":"MissionLog, MissionSave, MissionBriefing"},{"location":"missionfuncs/missionlog_save_briefing/#objective-functions","text":"","title":"Objective Functions"},{"location":"missionfuncs/missionlog_save_briefing/#missionlog","text":"Adds missions/jobs/objectives on the Player's mission log.","title":"MissionLog"},{"location":"missionfuncs/missionlog_save_briefing/#missionsave","text":"Unused Postal3Script function. Warning Not recommended to use.","title":"MissionSave"},{"location":"missionfuncs/missionlog_save_briefing/#missionbriefing","text":"Unused Postal3Script function Shows a message on the screen with black background, with a \"Press ENTER to continue\" prompt. Note Equivalent to gameui_show_p3_briefdlg [string] console command.","title":"MissionBriefing"},{"location":"missionfuncs/opendialog/","text":"OpenDialog \uf0c1 Opens the Yes/No dialog Unused/Unfinished Postal3Script function Technical Details Executes \"gameui_show_p3_yes_no_dialog\" console command with parameters // The console command will ignore any parameter OpenDialog 0 Events followed by Answer Depending on the answer, it will fire the event called \"OnDialogNo\" or \"OnDialogYes\" for the Actor that executed it. Normally it would mean the executed Actor would be the Player, but in this function there's no hardcoded check for the Player.","title":"OpenDialog"},{"location":"missionfuncs/opendialog/#opendialog","text":"Opens the Yes/No dialog Unused/Unfinished Postal3Script function","title":"OpenDialog"},{"location":"missionfuncs/playerkarma/","text":"PlayerKarma \uf0c1 Sets the Player karma globally. Syntax (From ai_st_init.p3s) // KARMA AMOUNTS Const KARMA_LOW,5 Const KARMA_MED,10 Const KARMA_HIGH,25 Const KARMA_HALF,50 Const KARMA_FULL,100 PlayerKarma hide -- Hides the karma icon PlayerKarma show -- Shows the karma icon PlayerKarma good -- Player is now on good path (unused) PlayerKarma evil -- Player is now on evil path (unused) PlayerKarma +-*/=[value] -- Modifies the karma's value Example // from ai_mission_sbe.p3s xpt_OnPaparazziEscaped { actions { SetAttr \"PhotoTaken 1\" MissionLog fail,photos // Player lost some good guy points CheckAttr \"PhotoTaken PlayerKarma -KARMA_HIGH\" } }","title":"PlayerKarma"},{"location":"missionfuncs/playerkarma/#playerkarma","text":"Sets the Player karma globally.","title":"PlayerKarma"},{"location":"missionfuncs/playvideo/","text":"PlayVideo \uf0c1 Plays a .bik video located in '.\\p3_english\\media' Warning Depending on which command will you use for video playing, it will become unskippable. Postal3Script is too slow to play an intro movie on the beginning of a map, causing it you to see the map for a brief second before eventually playing the movie. Syntax PlayVideo [filename],[fade_in_time],[fade_out_time],[console_command(s) to execute after video is finished playing] Technical Details * Will execute \"p3_playvideo\" or \"p3_playvideo_exitcommand\" console commands. * Syntax for \"p3_playvideo_exitcommand\" is 'filename', 'exitcommand', 'fadein', 'fadeout'. * Syntax for \"p3_playvideo\" is 'filename', 'fadein', 'fadeout'. Example // Fades in and fades out in 1.5 seconds PlayVideo placeholder, 1.5, 1.5 // Fades in and fades out in 1 second PlayVideo thebigrevenge, 1, 1 // Alternative (requires pcc entity in the level) EntFireInput \"pcc,Command:playvideo thebigrevenge\" // Another alternative // Will play music, and text after video had ended EntFireInput \"pcc,Command:playgamesound Music.IntroStinger\" EntFireInput \"pcc,Command:video_exitcmd notimportant gameui_show_p3_briefdlg #CR_MONDAY_BRIEFING\"","title":"PlayVideo"},{"location":"missionfuncs/playvideo/#playvideo","text":"Plays a .bik video located in '.\\p3_english\\media' Warning Depending on which command will you use for video playing, it will become unskippable. Postal3Script is too slow to play an intro movie on the beginning of a map, causing it you to see the map for a brief second before eventually playing the movie.","title":"PlayVideo"},{"location":"missionfuncs/showmessage_showhint/","text":"Show Functions \uf0c1 ShowMessage \uf0c1 Prints out message to the screen. Supports strings from './p3/resource/p3_english.txt' Note Equivalent to Half-Life 2's UserMessageBegin. Uses extra data from HudLayout.res , channels_manifest.txt , and HudAnimations.txt Example // This will print on the screen ShowMessage \"#P3_CM_INSANE1\" // This will print on the P3Karma channel ShowMessage \"[Ja-ja, nat\u00fcrlich!], $P3Karma\" // This will print on the P3Mission channel ShowMessage \"[Puff! Puff! Puff!], $P3Mission\" // This will print on the P3Debug channel ShowMessage \"[Meow!... I'm on Fear!!!], $P3Debug\" // You have arrested 0-3 of 3 hobos ChangeAttr \"HoboArrested 1\" ShowMessage \"[You have arrested {0:v} of 3 hobos], $P3Mission, HoboArrested\" // Slightly more complex syntax IfAttr \"caller.ea_Manner == Manner:PussyCat and mis_004 >= 0 Block begin,execute\" TargetEntByName mg_004 SetAttr \"mis_004 cat_counter\" IfAttr \"mis_004 >= target.condition SetAttr mis_004 target.condition\" ShowMessage \"[ {0:v} of {1:v} deceased cats have been obtained], $P3Mission, mis_004, target.condition\" Block end ShowHint \uf0c1 Unused Postal3Script function. Karma hinting is done automatically, so this has been left completely unused. Note Uses data from './p3/scripts/hints_manifest.txt' Example // First found in 'ai_st1_common.p3s' Line 954 ShowHint hintCat // First found in 'ai_st6_missions.p3s' Line 528 ShowHint hintKarmaDown ShowHint hintKarmaUp","title":"ShowMessage, ShowHint"},{"location":"missionfuncs/showmessage_showhint/#show-functions","text":"","title":"Show Functions"},{"location":"missionfuncs/showmessage_showhint/#showmessage","text":"Prints out message to the screen. Supports strings from './p3/resource/p3_english.txt' Note Equivalent to Half-Life 2's UserMessageBegin. Uses extra data from HudLayout.res , channels_manifest.txt , and HudAnimations.txt","title":"ShowMessage"},{"location":"missionfuncs/showmessage_showhint/#showhint","text":"Unused Postal3Script function. Karma hinting is done automatically, so this has been left completely unused. Note Uses data from './p3/scripts/hints_manifest.txt'","title":"ShowHint"},{"location":"missions/cm/","text":"Cash Mart Robbery (ai_mission_cm.p3s and ai_cashmart_npc.p3s) \uf0c1 Pre-Path Cover simulator, also the Helicopter only appears once and never again throughout the game. Cash Mart is the only mission where there are 2 files being used. Cash Mart does not have unused behaviors. All behavior names used in the level: 'bh_cashmart_logic' -- is in ai_mission_cm.p3s 'bh_cashmart_police' -- is in ai_cashmart_npc.p3s 'bh_helicopter' -- is in ai_cashmart_npc.p3s 'bh_cashmart_zealot' -- is in ai_cashmart_npc.p3s 'bh_cashmart_badger' -- is in ai_cashmart_npc.p3s 'bh_cashmart_citizen' -- is in ai_cashmart_npc.p3s Barely has any commented out lines, might be worth looking into 'ai_cashmart.p3s' instead, it's unused counterpart.","title":"CM (Cash Mart Robbery)"},{"location":"missions/cm/#cash-mart-robbery-ai_mission_cmp3s-and-ai_cashmart_npcp3s","text":"","title":"Cash Mart Robbery (ai_mission_cm.p3s and ai_cashmart_npc.p3s)"},{"location":"missions/dcr/","text":"Diseased Cat Roundup (ai_mission_dcr.p3s) \uf0c1 Pre-Path Infinite hostile NPC generator, they are also very annoying. Did I also mention how this mission is so hard because you have to catch so many cats? Below you will only see the behavior names, and a rough guessing from the code on what they were supposed to do. Unused behavior name(s) from script file: 'bh_dcr_civil_static' -- Sets static flag (flag_static) All behavior names used in the level: 'bh_dog' 'bh_cop_hub1' 'bh_cellphone' 'bh_dcr_cat' -- is in script file 'bh_cats_mission' -- is in script file 'bh_sushi' -- is in script file 'bh_shit' 'bh_dcr_civil' -- is in script file 'bh_dcr_sewer_hobo' -- is in script file 'bh_dcr_street_hobo' -- is in script file 'bh_dcr_civil_house' -- is in script file 'bh_dcr_civil_shopper' -- is in script file 'bh_dcr_civil_shopkeeper' -- is in script file 'bh_trash' // the unused behavior behavior { name bh_dcr_civil_static inherited bh_dcr_civil States { st_init { Group Neutral Patterns { pt_default { actions { SetAttr \"flag_static 1\" ExecutePattern bh_base:st_init.pt_default } } } } } }","title":"DCR (Diseased Cat Roundup)"},{"location":"missions/dcr/#diseased-cat-roundup-ai_mission_dcrp3s","text":"","title":"Diseased Cat Roundup (ai_mission_dcr.p3s)"},{"location":"missions/jwb/","text":"Jen Walcott's Bodyguard (ai_mission_jwb.p3s) \uf0c1 Pre-Path If only the Taser wasn't that bad... maybe this mission wouldn't feel frustrating. How is it that Jen can kill people with her shovel, but you cannot? JWB does not have unused behaviors. All behavior names used in the level: 'bh_mall_mom_prespawn' -- is in script file 'bh_mis_jen' -- is in script file, mission logic 'bh_shovel' -- Used by Jens shovel 'bh_jwb_civil' -- is in script file 'bh_cellphone' 'bh_jwb_civil_static' -- is in script file 'bh_jen_cop' -- is in script file, used by Cops 'bh_jwb_jen' -- is in script file, used by Jen 'bh_mall_mom' -- is in script file JWB has very subtle commented out lines that it is hard to say confidentally what things were heavily changed, or cut.","title":"JWB (Jen Walcotts Bodyguard)"},{"location":"missions/jwb/#jen-walcotts-bodyguard-ai_mission_jwbp3s","text":"","title":"Jen Walcott's Bodyguard (ai_mission_jwb.p3s)"},{"location":"missions/pdb/","text":"Paradise Bridge (ai_mission_pdb.p3s) \uf0c1 Pre-Path This is where most of the Players felt really disappointed with the game. Oh also, grenades are very happy to crash the game! Below you will only see the behavior names, and a rough guessing from the code on what they were supposed to do. Unused behavior name(s) from script file: 'bh_look_tut_point' - Checks for Player Line of Sight, executes events according if Player is looking at it All used behavior names in the level: 'bh_zombie_eater' 'bh_zombie02_eater' 'bh_zombie01' 'bh_zombie02' 'bh_zombie03' 'bh_swat01' 'bh_swat03' -- This is not an error, bh_swat02 does not exists 'bh_pdb_champ' 'bh_mission_pdb' State 'st_tutor04' from 'bh_mission_pdb' is unused It involved the game spawning gasoline trails, then giving the player a match to lit them up, before eventually going to the Zombies to roast them. st_tutor04 //\u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f, \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043d\u0430 \u0432\u0441\u044f\u043a\u0438\u0439 \u0441\u043b\u0443\u0447\u0430\u0439 { Group Neutral Patterns { pt_default { actions { //PlayVideo pdb_04,1.0,1.0 Wait 0.9 EntFireInput tutor03_teleport,Teleport EntFireInput \"pcc,Command:use p3_weapon_emptyhands\" EntFireInput \"lpp,RemoveWeapon:p3_weapon_grenade\" //EntFireInput tutor04_clip,Enable //EntFireInput tutor04_escape_tg,Enable //MissionLog remove,tutor03_01 //MissionLog remove,tutor03_02 AddFluid \"171,670,100,300000\" AddFluid \"-318,931,80,300000\" AddFluid \"150,925,100,100000\" AddFluid \"-110,1030,80,200000\" EntFireInput \"pcc,Command:give p3_weapon_match\" //EntFireInput \"pcc,Command:use p3_weapon_match\" Wait 0.5 MissionLog \"add_primary,tutor04,#P3_PDB_T04_LOG\" ShowMessage #P3_PDB_T04_MSG01 } events { OnTutor04ZombiesDead \"Pattern pt_end\" } } pt_end { actions { MissionLog done,tutor04 State st_tutor05 //EntFireInput tutor04_block,disable //EntFireInput tutor04_block_tg,disable } events { OnTutorial05Start \"State st_tutor05\" } } } }","title":"PDB (Paradise Bridge)"},{"location":"missions/pdb/#paradise-bridge-ai_mission_pdbp3s","text":"","title":"Paradise Bridge (ai_mission_pdb.p3s)"},{"location":"missions/pw/","text":"Porn World (ai_mission_pw.p3s) \uf0c1 Pre-Path You not only have to clean up someone's wank , but you also have to defend the store from being destroyed. No one pays the Postal Dude high enough for this. Porn World does not have unused behaviors in it's script file. All used behavior names in the level: 'bh_drocher' 'bh_pw_logic' 'bh_mom' 'bh_strip_girl' 'bh_ron' 'bh_punisher' -- Cop 'bh_mom_shooter' 'bh_ron' has a commented out pattern called 'pt_spawnDrocha' which would have spawned a tissue in his right hand and drop it. 'bh_drocher' has a commented out pattern called 'pt_sayHereEmployed!' // from 'bh_ron' pt_spawnDrocha { SpawnItem drocha_spwn,owner,hand_right Item drop } // from 'bh_drocher' pt_sayHereEmployed! { actions { TargetCaller 1 IfAttr \"checkCount < 4 and DistTo:target < 5 and Visible:target == 1 Block begin\" ChangeAttr \"checkCount 1\" Pattern pt_default Block end Face true Sequence \"seq.confusion_active\" WaitForEnd 1 Face false Timer \"sayBusy,0\" SetHintGroup wish_fun_idle Pattern pt_end } }","title":"PW (Porn World)"},{"location":"missions/pw/#porn-world-ai_mission_pwp3s","text":"","title":"Porn World (ai_mission_pw.p3s)"},{"location":"movementfuncs/freemovement/","text":"Freedom of Movement Functions \uf0c1 FreeMovement \uf0c1 Sets or resets NPC's freedom of movement. Note [reset] will reset FreeMovementParams's parameters. Syntax FreeMovement [walk/run],[reset] -- NPC will walk or run, [reset] is optional FreeMovement [true/false],[reset] -- NPC can move or not, [reset] is optional FreeMovement random,[reset] -- Chooses between walk or run, [reset] is optional Example // (From ai_cashmart_npc.p3s) // This will reset the NPC's movement to be able to move everywhere xpt_invalidroute { actions { Face false Crouch false Aim false FreeMovementParams area_all,-1,-1,area_group,once FreeMovement run,reset } } FreeMovementParams \uf0c1 Restricts NPC's movement with parameters // (From ai_st_init.p3s) Const ED_VERY_CLOSE,32 Const ED_CLOSE,160 Const ED_MIDDLE,320 Const ED_FAR,768 Const ED_FURTHER,1280 Const ED_VERY_FAR,2048 // Flags current hint_all hint_hidden hint_visible area_all area_hidden area_visible cover backaway // Goal flags safe hint_group from_target hint_face use_node nearest move_from_target random once area_group Syntax FreeMovementParams [flag],[distance min],[distance max],[goalflag1],[goalflag2],[goalflag3], .. Example // This will allow the NPC to move everywhere in it's area group FreeMovementParams area_all,-1,-1,area_group // This will restrict the NPC to move inside hint groups only FreeMovementParams hint_all,-1,-1,hint_group // This will make the NPC move to a hint group or node, only once FreeMovementParams hint_all,ED_MIDDLE,ED_VERY_FAR,hint_group,hint_face,use_node,once // This will force the NPC to be really close to it's target FreeMovementParams area_all,0,ED_VERY_CLOSE,from_target // This however will make the NPC go away from it's target as far as possible FreeMovementParams area_all,ED_VERY_FAR,ED_VERY_FAR,move_from_target","title":"FreeMovement, FreeMovementParams"},{"location":"movementfuncs/freemovement/#freedom-of-movement-functions","text":"","title":"Freedom of Movement Functions"},{"location":"movementfuncs/freemovement/#freemovement","text":"Sets or resets NPC's freedom of movement. Note [reset] will reset FreeMovementParams's parameters.","title":"FreeMovement"},{"location":"movementfuncs/freemovement/#freemovementparams","text":"Restricts NPC's movement with parameters // (From ai_st_init.p3s) Const ED_VERY_CLOSE,32 Const ED_CLOSE,160 Const ED_MIDDLE,320 Const ED_FAR,768 Const ED_FURTHER,1280 Const ED_VERY_FAR,2048 // Flags current hint_all hint_hidden hint_visible area_all area_hidden area_visible cover backaway // Goal flags safe hint_group from_target hint_face use_node nearest move_from_target random once area_group","title":"FreeMovementParams"},{"location":"movementfuncs/movement_funcs/","text":"Movement Functions \uf0c1 Move \uf0c1 Sets the NPC's movement Syntax Move run -- NPC will now run Move walk -- NPC will now walk Move true -- NPC is able to move Move false -- NPC is no longer able to move Move [walk/run],[angle],[timing],[face_dir/update_dir] -- todo MoveToLean \uf0c1 Moves the NPC to a lean spot, used for combat Syntax // ENEMY DISTANCE (from ai_st_init.p3s) Const ED_VERY_CLOSE,32 Const ED_CLOSE,160 Const ED_MIDDLE,320 Const ED_FAR,768 Const ED_FURTHER,1280 Const ED_VERY_FAR,2048 // Flags nearest nearest_to_target in_viewcone visible notvisible_totarget far check_dotproduct check_onmoving not_behind_target safe area_group MoveToLean run,[distance_min],[distance_max],[flag1],[flag2],[flag3], .. Example // from ai_cashmart.p3s st_combat_hide { Group Combat Patterns { pt_hide_param { actions { ExecutePattern st_combat_logic.xpt_setAreaGroup MoveToLean run,ED_CLOSE,ED_FAR,notvisible_totarget Pattern pt_hide_loop } } } } MoveToTarget \uf0c1 Forces the NPC to move to it's target Syntax // Flags none to_target from_target target_dir TODO The syntax below is not really correct, It's not clear what each argument does just by looking at p3s scripts, it's a rough estimation MoveToTarget [run/walk/true],[distance_min],[distance_max],[flag] MoveToTarget [run/walk/true],[distance],[flag] MoveToTarget [false] // from ai_mission_sbe.p3s pt_chase { actions { TargetEntByName npc_slave MoveToTarget run,1 CheckTarget 1 Repeat 1 } events { OnTimer_tChaseSlave \"Pattern pt_stop_chase\" } } MoveToTargetLKP \uf0c1 Forces the NPC to move to it's target's Last Known Position from the NPC's memory. Syntax MoveToTargetLKP [run/walk/true]","title":"Move, MoveToLean, MoveToTarget, MoveToTargetLKP"},{"location":"movementfuncs/movement_funcs/#movement-functions","text":"","title":"Movement Functions"},{"location":"movementfuncs/movement_funcs/#move","text":"Sets the NPC's movement","title":"Move"},{"location":"movementfuncs/movement_funcs/#movetolean","text":"Moves the NPC to a lean spot, used for combat","title":"MoveToLean"},{"location":"movementfuncs/movement_funcs/#movetotarget","text":"Forces the NPC to move to it's target","title":"MoveToTarget"},{"location":"movementfuncs/movement_funcs/#movetotargetlkp","text":"Forces the NPC to move to it's target's Last Known Position from the NPC's memory.","title":"MoveToTargetLKP"},{"location":"movementfuncs/setactpack/","text":"SetActPack \uf0c1 Sets NPC's animation style for activity Note Uses information from 'p3/scripts/ai_activities.p3s' for [animation] Syntax SetActPack ACT_[IDLE/WALK/RUN],[animation],[Alert/Wound] -- Sets animation for activity, [Alert/Wound] is optional Example // If Health is lower than 55, play \"run_wounded\" anim when running IfAttr \"ea_health < 55 SetActPack ACT_RUN,run_wounded\" // Resets animation for ACT_IDLE SetActPack ACT_IDLE,ACT_IDLE // Only plays \"run_panic\" anim when on Alert SetActPack ACT_RUN,run_panic,Alert // Forcefully sets \"walk_zombie\" anim when wounded SetActPack ACT_WALK,walk_zombie,Wound","title":"SetActPack"},{"location":"movementfuncs/setactpack/#setactpack","text":"Sets NPC's animation style for activity Note Uses information from 'p3/scripts/ai_activities.p3s' for [animation]","title":"SetActPack"},{"location":"movementfuncs/sethint_area_leangroup_avoidarea/","text":"Hint Group Functions \uf0c1 SetHintGroup \uf0c1 Sets NPC's hint group Syntax SetHintGroup [hint group1],[hint group2],[hint group3], .. -- Sets hint groups for NPC Example // from ai_mission_pw.p3s xpt_SetHintGroup { actions { SetAttr \"rand 0\" ChangeAttr \"rand 0:3\" IfAttr \"rand == 0 SetHintGroup wish_fun_droch\" IfAttr \"rand == 1 SetHintGroup wish_fun_drink\" IfAttr \"rand == 2 SetHintGroup wish_fun_watch\" IfAttr \"rand == 3 SetHintGroup wish_fun_strip\" RemoveAttr rand } } SetAreaGroup \uf0c1 Sets NPC's area group(s) Syntax SetAreaGroup [Group1]:[walkable],[Group2]:[walkable],[Group3]:[walkable], .. -- Sets area groups for NPC :[walkable] is optional SetAreaGroup AG_DEFAULT -- Resets NPC's area group SetLeanGroup \uf0c1 Sets NPC's lean group(s) Tip Decompile dcr.bsp to analyze how a Lean group works. Syntax SetLeanGroup [Group1],[Group2],[Group3], .. -- Sets lean groups for NPC AvoidProhibitedArea \uf0c1 Sets NPC to avoid prohibited areas Syntax AvoidProhibitedArea [boolean] // (From ai_freeroaming.p3s) // this AI will refuse to walk out from it's set area group behavior { name bh_mexico_roam_police inherited bh_police States { st_init { Group Neutral Patterns { pt_default { actions { ExecutePattern bh_base:st_init.pt_default SetAreaGroup AG_DEFAULT,AG_border AvoidProhibitedArea true } } } } } }","title":"SetHintGroup, SetAreaGroup, SetLeanGroup, AvoidProhibitedArea"},{"location":"movementfuncs/sethint_area_leangroup_avoidarea/#hint-group-functions","text":"","title":"Hint Group Functions"},{"location":"movementfuncs/sethint_area_leangroup_avoidarea/#sethintgroup","text":"Sets NPC's hint group","title":"SetHintGroup"},{"location":"movementfuncs/sethint_area_leangroup_avoidarea/#setareagroup","text":"Sets NPC's area group(s)","title":"SetAreaGroup"},{"location":"movementfuncs/sethint_area_leangroup_avoidarea/#setleangroup","text":"Sets NPC's lean group(s) Tip Decompile dcr.bsp to analyze how a Lean group works.","title":"SetLeanGroup"},{"location":"movementfuncs/sethint_area_leangroup_avoidarea/#avoidprohibitedarea","text":"Sets NPC to avoid prohibited areas","title":"AvoidProhibitedArea"},{"location":"movementfuncs/travelbypathtrack/","text":"TravelByPathTrack \uf0c1 Forces an NPC's movement to be limited by Path tracks Syntax TravelByPathTrack [name of path track in hammer] -- Limit movement to this Pathtrack Example // from ai_mission_gri.p3s st_moveout { group Neutral patterns { pt_default { actions { // This is our target TargetEntByName target_rhino // Move according to \"pt_rhino1\" named Path track TravelByPathTrack pt_rhino1 // Do this until we reached our target // Then exit from this state IfAttr \"DistTo:target < ED_CLOSE State st_start\" Repeat 1 } } } events { OnRunOut \"State st_start\" OnUser1 \"Pattern st_start.pt_goberserk\" } } st_start { group Neutral patterns { pt_default { actions { IfAttr \"Crazy == 1 State st_berserk\" // Reset our movement so we are no longer bounded by Path track SetAreaGroup AG_DEFAULT:walkable,AG_rhino FreeMovementParams area_all,-1,-1,area_group FreeMovement run ExecutePattern pt_gallop } } } }","title":"TravelByPathTrack"},{"location":"movementfuncs/travelbypathtrack/#travelbypathtrack","text":"Forces an NPC's movement to be limited by Path tracks","title":"TravelByPathTrack"},{"location":"movementfuncs/turn_turnspeed/","text":"Turning Functions \uf0c1 Turn \uf0c1 Changes the NPC's angle (from -360 to 360) Syntax Turn [integer] -- Increases angle Turn -[integer] -- Decreases angle Turn [integer]:[integer] -- Randomizes angle Example // from ai_mission_sbe.p3s pt_turn_left { actions { Move false SetAttr \"CornerType CORNER_RIGHT\" Turn -90 Wait 1 Pattern pt_move } } pt_turn_right { actions { Move false SetAttr \"CornerType CORNER_LEFT\" Turn 90 Wait 1 Pattern pt_move } } TurnSpeed \uf0c1 Sets the NPC's turning speed Note The default turning speed is 90 Syntax TurnSpeed idle,[integer] -- Sets idle speed TurnSpeed turn,[integer] -- Sets turn speed TurnSpeed walk,[integer] -- Sets walk speed TurnSpeed run,[integer] -- Sets run speed TurnSpeed attack,[integer] -- Sets attack speed TurnSpeed default,[integer] -- Sets default speed Example // from ai_st1_common.p3s TurnSpeed turn,15 TurnSpeed idle,15 TurnSpeed run,15 TurnSpeed walk,15 TurnSpeed attack,15 TurnSpeed default,15","title":"Turn, TurnSpeed"},{"location":"movementfuncs/turn_turnspeed/#turning-functions","text":"","title":"Turning Functions"},{"location":"movementfuncs/turn_turnspeed/#turn","text":"Changes the NPC's angle (from -360 to 360)","title":"Turn"},{"location":"movementfuncs/turn_turnspeed/#turnspeed","text":"Sets the NPC's turning speed Note The default turning speed is 90","title":"TurnSpeed"},{"location":"npcbehaviorfuncs/aim_face/","text":"Facing Functions \uf0c1 Aim \uf0c1 Forces NPC to aim at target object Syntax Aim [true/false] Face \uf0c1 Forces NPC to face it's target object Syntax Face [true/false],[mobility(float)]","title":"Aim, Face"},{"location":"npcbehaviorfuncs/aim_face/#facing-functions","text":"","title":"Facing Functions"},{"location":"npcbehaviorfuncs/aim_face/#aim","text":"Forces NPC to aim at target object","title":"Aim"},{"location":"npcbehaviorfuncs/aim_face/#face","text":"Forces NPC to face it's target object","title":"Face"},{"location":"npcbehaviorfuncs/busy_hate/","text":"Emotion Functions \uf0c1 Busy \uf0c1 Forces NPC to be Busy. Equivalent to SetAttr \"busy [1/0]\" , so it's somewhat unused. Syntax Busy [true/false] Hate \uf0c1 Forces Hate towards a target object. Note NPC's Squad members will forget or hate the same target object. Syntax Hate [true/false],[normal/guard/assault/retreat/roundup]:[param] -- Tactical variant and param only works with Military NPCs Example // Will only work with Military NPCs pt_hateGuard { actions { Hate true,guard:1500 } } // Will work with normal NPCs and including Military ones too pt_hateThem { actions { Hate true } }","title":"Busy, Hate"},{"location":"npcbehaviorfuncs/busy_hate/#emotion-functions","text":"","title":"Emotion Functions"},{"location":"npcbehaviorfuncs/busy_hate/#busy","text":"Forces NPC to be Busy. Equivalent to SetAttr \"busy [1/0]\" , so it's somewhat unused.","title":"Busy"},{"location":"npcbehaviorfuncs/busy_hate/#hate","text":"Forces Hate towards a target object. Note NPC's Squad members will forget or hate the same target object.","title":"Hate"},{"location":"npcbehaviorfuncs/catdervish/","text":"CatDervish \uf0c1 Forces NPC to enter into Dervish mode Note NPC must be a Cat Syntax CatDervish [true/false],[time] -- Sets Dervish mode, and optionally a timer Example // (from ai_npc_animal.p3s) st_deactivate { Group Alert Patterns { pt_default { actions { CatDervish false SetAttr \"ea_takeable 0\" ExecutePattern bh_base:st_deactivate.pt_default } } } }","title":"CatDervish"},{"location":"npcbehaviorfuncs/catdervish/#catdervish","text":"Forces NPC to enter into Dervish mode Note NPC must be a Cat","title":"CatDervish"},{"location":"npcbehaviorfuncs/crouch_lean/","text":"Covering Functions \uf0c1 Crouch \uf0c1 Forces NPC to crouch Syntax Crouch [true/false] Lean \uf0c1 Forces NPC to lean out from a Lean spot if possible Note Only works when near a Lean spot Use it with MoveToLean Syntax Lean [true/false]","title":"Crouch, Lean"},{"location":"npcbehaviorfuncs/crouch_lean/#covering-functions","text":"","title":"Covering Functions"},{"location":"npcbehaviorfuncs/crouch_lean/#crouch","text":"Forces NPC to crouch","title":"Crouch"},{"location":"npcbehaviorfuncs/crouch_lean/#lean","text":"Forces NPC to lean out from a Lean spot if possible Note Only works when near a Lean spot Use it with MoveToLean","title":"Lean"},{"location":"npcbehaviorfuncs/enablegibs/","text":"EnableGibs \uf0c1 Unused Postal3Script function Enables or Disables gibbing of an NPC Syntax EnableGibs true -- Enables gibbing (default) EnableGibs false -- Disables gibbing Example // from ai_st6_missions.p3s // This will force Uwe Boll to never gib on death/or when injured when he's spawned into the game st_init { Group Neutral patterns { pt_default { actions { EnableGibs false SetAttr \"UweTask UWE_WAITFORMISSION\" SetAttr \"ea_dmg_absorb 60\" Pattern bh_human:st_init.pt_default } } } }","title":"EnableGibs"},{"location":"npcbehaviorfuncs/enablegibs/#enablegibs","text":"Unused Postal3Script function Enables or Disables gibbing of an NPC","title":"EnableGibs"},{"location":"npcbehaviorfuncs/entervehicle/","text":"EnterVehicle \uf0c1 Forces NPC to enter into a vehicle if it's near to it Note NPC must be a Driver Must be used in combination with TargetVehicle Syntax EnterVehicle 1 -- NPC enters into vehicle Example // (from ai_mission_mc.p3s) st_return_to_vehicle { group Neutral patterns { pt_default:ignore_ext_events { actions { SetAttr \"OnSegway 0\" TargetVehicle vehicle_driver_exit MoveToTarget true,0.5 Repeat 3 } events { // Target reached, so try entering into vehicle OnTargetReach \"EnterVehicle 1\" OnEnteredVehicle \"Pattern pt_vehicle\" } } } }","title":"EnterVehicle"},{"location":"npcbehaviorfuncs/entervehicle/#entervehicle","text":"Forces NPC to enter into a vehicle if it's near to it Note NPC must be a Driver Must be used in combination with TargetVehicle","title":"EnterVehicle"},{"location":"npcbehaviorfuncs/follow_playerfriendly/","text":"Follow and PlayerFriendly \uf0c1 Follow \uf0c1 Forces NPC to follow it's target object Broken Feature This function can only be enabled or disabled, walk or run will not do anything . If you want to make an NPC follow something by walking, set it's act pack instead. Syntax Follow [true/false] Follow [walk/run],[distance] Example // (from ai_st11_urza.p3s) pt_default { actions { Sequence arrest_me,2 WaitForEnd 1 RemoveAttr \"ArrestWait\" TargetToMem 5 FreeMovement false Follow walk,3 Pattern pt_loop } } PlayerFriendly \uf0c1 Unused Postal3Script function Sets NPC to never hit the Player with bullets, aka. Friendly Fire Syntax PlayerFriendly [true/false]","title":"Follow, PlayerFriendly"},{"location":"npcbehaviorfuncs/follow_playerfriendly/#follow-and-playerfriendly","text":"","title":"Follow and PlayerFriendly"},{"location":"npcbehaviorfuncs/follow_playerfriendly/#follow","text":"Forces NPC to follow it's target object Broken Feature This function can only be enabled or disabled, walk or run will not do anything . If you want to make an NPC follow something by walking, set it's act pack instead.","title":"Follow"},{"location":"npcbehaviorfuncs/follow_playerfriendly/#playerfriendly","text":"Unused Postal3Script function Sets NPC to never hit the Player with bullets, aka. Friendly Fire","title":"PlayerFriendly"},{"location":"npcbehaviorfuncs/senses_lookat_lookout/","text":"Looking Functions \uf0c1 Senses \uf0c1 Turns on or off NPC's ability to see and hear. Syntax Senses [true/false] LookAt \uf0c1 Forces NPC to look at NPCs. Note Must have a target object. Syntax LookAt [true/false] LookAt [time to look],[bias] LookOut \uf0c1 Forces NPC to look out from a lean spot. Note Must have a valid Lean spot. Syntax LookOut 1","title":"Senses, LookAt, LookOut"},{"location":"npcbehaviorfuncs/senses_lookat_lookout/#looking-functions","text":"","title":"Looking Functions"},{"location":"npcbehaviorfuncs/senses_lookat_lookout/#senses","text":"Turns on or off NPC's ability to see and hear.","title":"Senses"},{"location":"npcbehaviorfuncs/senses_lookat_lookout/#lookat","text":"Forces NPC to look at NPCs. Note Must have a target object.","title":"LookAt"},{"location":"npcbehaviorfuncs/senses_lookat_lookout/#lookout","text":"Forces NPC to look out from a lean spot. Note Must have a valid Lean spot.","title":"LookOut"},{"location":"npcbehaviorfuncs/snatch_unsnatch/","text":"Snatching Functions \uf0c1 Snatch \uf0c1 Snatches onto an NPC Note Can only be used by Animals Must have a target object Syntax Snatch [true/false],[attachment] // Attachments // Where to snatch fucking_monkey = head snatch0 = left foot snatch1 = right foot snatch2 = left hand snatch3 = right hand Example // from ai_mission_mli.p3s pt_attack { actions { Snatch true,fucking_monkey Wait 5:2 Snatch false State st_start } } Unsnatch \uf0c1 Unused Postal3Script function Unsnatches from an NPC Note Must have a target object Syntax Unsnatch 1","title":"Snatch, Unsnatch"},{"location":"npcbehaviorfuncs/snatch_unsnatch/#snatching-functions","text":"","title":"Snatching Functions"},{"location":"npcbehaviorfuncs/snatch_unsnatch/#snatch","text":"Snatches onto an NPC Note Can only be used by Animals Must have a target object","title":"Snatch"},{"location":"npcbehaviorfuncs/snatch_unsnatch/#unsnatch","text":"Unused Postal3Script function Unsnatches from an NPC Note Must have a target object","title":"Unsnatch"},{"location":"npcbehaviorfuncs/stunout/","text":"StunOut \uf0c1 Unused Postal3Script function Stuns an NPC, as if they were shot by a Taser, and causes them to collapse on the ground. Note Uses an unused animation, after execution the NPC will no longer stand up or react to it's surroundings. Syntax StunOut 1 -- Stuns NPC Example // From ai_st1_common.p3s (Line 1124) // (Old Taser code) pt_stunout:ignore_ext_events { actions { Effect 4,Tazer_Hit_Smoke_Fx,pelvis,0,0,-12,-1,true RemoveAttr on_tased Timer tTASED,0 IfAttr \"MissionCharacter > 0 ExecutePattern ut_set_mis.pt_stunout\" // Stun the NPC StunOut 1 Wait 3:6 Effect 4,reset Pattern pt_fakedeath } events { OnDeath \"ExecutePattern .xpt_death\" } } The function in action","title":"StunOut"},{"location":"npcbehaviorfuncs/stunout/#stunout","text":"Unused Postal3Script function Stuns an NPC, as if they were shot by a Taser, and causes them to collapse on the ground. Note Uses an unused animation, after execution the NPC will no longer stand up or react to it's surroundings.","title":"StunOut"},{"location":"npcfuncs/NPC/","text":"NPC \uf0c1 Removes current NPC executed from script Note Despite the poor naming choice, NPC kill does not actually kill the NPC, but removes it instantly from the game. Syntax NPC kill,[fade out time] -- Kills NPC with time waiting for fading out Example // This will remove the NPC after 1 second after execution xpt_KillMyself { actions { Wait 1 NPC kill } } // This will make the NPC fade out in 2.5 seconds xpt_Disappear { actions { NPC kill,2.5 } }","title":"NPC"},{"location":"npcfuncs/NPC/#npc","text":"Removes current NPC executed from script Note Despite the poor naming choice, NPC kill does not actually kill the NPC, but removes it instantly from the game.","title":"NPC"},{"location":"npcfuncs/emitsound/","text":"EmitSound \uf0c1 Plays a sound from an NPC Note Uses names from ai_activities.p3s Plays on the Voice channel \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Works with any entity that have Postal3Script scripting. Syntax EmitSound [name] Example // (from Catharsis Reborn) pt_sit { actions { // Do a purring sound EmitSound cat_purr Sequence seq.idle_sit,9000 Wait 10:30 ResetSequence 1 State st_start } }","title":"EmitSound"},{"location":"npcfuncs/emitsound/#emitsound","text":"Plays a sound from an NPC Note Uses names from ai_activities.p3s Plays on the Voice channel \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Works with any entity that have Postal3Script scripting.","title":"EmitSound"},{"location":"npcfuncs/gesture_resetgesture_resetsequence/","text":"Gesture/Sequence Functions \uf0c1 Gesture \uf0c1 Make an NPC perform a gesture Syntax Gesture [gesture_name] -- Play gesture by name Gesture [gesture_name,duration] -- Play gesture with duration Gesture [gesture_name,duration:bias] -- Play gesture with optional duration and bias Note bias is the max amount of time that is randomly generated and tacked onto the gesture duration! Example Gesture g_onfire // Do on fire gesture forever, until reset Gesture g_emote_afraid,2:2 // Do afraid gesture with duration of 2 seconds and a bias of 2 Gesture g_onfire,3 // Do on fire gesture for 3 seconds ResetGesture \uf0c1 Reset an NPC's gesture(s) Syntax ResetGesture [gesture_name] -- Reset specific gesture by name ResetGesture 1 -- Reset current gesture ResetGesture all -- Reset ALL gestures ResetGesture * -- Reset ALL gestures ResetGesture g_onfire // Reset specific gesture by name ResetGesture 1 // Reset current gesture ResetGesture all // Reset ALL gestures ResetGesture * // Reset ALL gestures Sequence \uf0c1 Sets the NPC's sequence Syntax Sequence [sequence_name] -- Set sequence by name from ai_activities.p3s Sequence seq.[sequence_name] -- Set sequence by name from entity model Sequence [sequence_name,duration] -- Set sequence with duration Sequence [sequence_name,duration:bias] -- Set sequence with optional duration and bias Note bias is the max amount of time that is randomly generated and tacked onto the gesture duration! Example Sequence emote_yo // from ai_activities.p3s Sequence seq.env_crouch_inspect // from the entity's model ResetSequence \uf0c1 Reset an NPC's sequence Syntax ResetGesture 1 -- Reset current sequence ResetGesture 1 // Reset current sequence","title":"Gesture, ResetGesture, Sequence, ResetSequence"},{"location":"npcfuncs/gesture_resetgesture_resetsequence/#gesturesequence-functions","text":"","title":"Gesture/Sequence Functions"},{"location":"npcfuncs/gesture_resetgesture_resetsequence/#gesture","text":"Make an NPC perform a gesture","title":"Gesture"},{"location":"npcfuncs/gesture_resetgesture_resetsequence/#resetgesture","text":"Reset an NPC's gesture(s)","title":"ResetGesture"},{"location":"npcfuncs/gesture_resetgesture_resetsequence/#sequence","text":"Sets the NPC's sequence","title":"Sequence"},{"location":"npcfuncs/gesture_resetgesture_resetsequence/#resetsequence","text":"Reset an NPC's sequence","title":"ResetSequence"},{"location":"npcfuncs/headblob/","text":"Headblob \uf0c1 Spawns an effect above an NPC's head Note Headblobs are defined in p3/scripts/p3_headblobs.txt , and uses particle effects. Pre-defined Headblobs: Stars Zzzz HappyCat Attention Arrest Syntax Headblob [integer],[name] Warning The numbers don't do anything, it is however still needed because Headblob only accepts 2 parameters. Example // Example pt_eat { actions { Sequence an_idle_eat Wait 2 Wait 0:2 Headblob 1,HappyCat Pattern pt_end } }","title":"Headblob"},{"location":"npcfuncs/headblob/#headblob","text":"Spawns an effect above an NPC's head Note Headblobs are defined in p3/scripts/p3_headblobs.txt , and uses particle effects. Pre-defined Headblobs: Stars Zzzz HappyCat Attention Arrest","title":"Headblob"},{"location":"npcfuncs/say/","text":"Say \uf0c1 Make an NPC say a specified \"sentence\" type voice line. Uses the name of the sentence in the related NPC's sentence script located in '.\\Postal III\\p3\\scripts\\Sentences' Syntax Say [sentence_name] Say [sentence_name,sentence_name,sentence_name] -- Say a random sentence out of these (You can specify as many sentence parameters as you want) Say [sentence_name,priority,wait] -- Say sentence with priority, and wait until the end TODO Need to make sure that the fourth parameter is even actually the sentence priority! Need to make sure what the wait parameter actually does specifically! Note You can specify as many sentences parameters as you want! The voice prefix is not required, GAY_ONFIRE can lose the GAY_ part and instead just be ONFIRE for example... Warning If you want the PLAYER to say something you must EntFireInput logic_playerproxy to do a generic say instead, like so: EntFireInput proxy,Say:SENTENCENAME Example // Say a voice line... Say ZOMB_MOAN // Pick and say one of these voice lines randomly... Say ZOMB_MOAN,ZOMB_CURSE,ZOMB_HIT // Pick and say one of these voice lines randomly, // and specify the optional sentence priority parameter Say ZOMB_MOAN,ZOMB_CURSE,ZOMB_HIT,0 // Pick and say one of these voice lines randomly, // specify the optional sentence priority parameter, // and wait for the end of the sentence Say ZOMB_MOAN,ZOMB_CURSE,ZOMB_HIT,0,wait","title":"Say"},{"location":"npcfuncs/say/#say","text":"Make an NPC say a specified \"sentence\" type voice line. Uses the name of the sentence in the related NPC's sentence script located in '.\\Postal III\\p3\\scripts\\Sentences'","title":"Say"},{"location":"objects/ammo/","text":"Ammo \uf0c1 Unused Postal3Script Object Checks an NPC's primary ammo value. Broken Feature Postal 3 doesn't have proper ammo handling or check for NPCs, it's a broken or underdeveloped feature. It's advised to come up with your own Ammo system in p3s. Example // (Possible example) xpt_CheckAmmo { actions { IfAttr \"ea_ammo > 0 SetAttr HaveAmmo 1\" IfAttr \"ea_ammo < = 0 SetAttr NoAmmo 1\" IfAttr \"Ammo:self > 0 SetAttr HaveAmmo 1\" IfAttr \"Ammo:self < = 0 SetAttr NoAmmo 1\" } }","title":"Ammo"},{"location":"objects/ammo/#ammo","text":"Unused Postal3Script Object Checks an NPC's primary ammo value. Broken Feature Postal 3 doesn't have proper ammo handling or check for NPCs, it's a broken or underdeveloped feature. It's advised to come up with your own Ammo system in p3s.","title":"Ammo"},{"location":"objects/angleto/","text":"AngleTo \uf0c1 Get the angle difference between us and another object on the vertical axis (Yaw). Syntax AngleTo:[object] -- Returns the angle difference to the specified object // If the angle to our target is less than 30, then we'll to try and attack them! IfAttr \"AngleTo:target < 30 Pattern pt_attack\"","title":"AngleTo"},{"location":"objects/angleto/#angleto","text":"Get the angle difference between us and another object on the vertical axis (Yaw).","title":"AngleTo"},{"location":"objects/distto/","text":"DistTo \uf0c1 Check the distance between one object to another. Syntax DistTo:[object] -- Returns the distance to the specified object // \"GLOBAL\" ENEMY DISTANCE CONSTANTS // Const ED_VERY_CLOSE,32 // Const ED_CLOSE,160 // Const ED_MIDDLE,320 // Const ED_FAR,768 // Const ED_FURTHER,1280 // Const ED_VERY_FAR,2048 // Turn to face the target if we're SUPER close to them // You may use any integer or one of the above specified constants instead... IfAttr \"DistTo:target < 16 Pattern pt_face\" // Caller is pretty far, so bombard them IfAttr \"DistTo:caller > ED_FAR Pattern pt_bombard\"","title":"DistTo"},{"location":"objects/distto/#distto","text":"Check the distance between one object to another.","title":"DistTo"},{"location":"objects/faction/","text":"Faction \uf0c1 Each NPC, and even some generic entities, are set to belong to a specific Faction . This is used for various things, such as checking for how NPC's should act towards whole groups of specific NPC's, and what dispositions they should have against them. Note Here's a list of all the faction types: Police , Zealots , Citizens , Hobos , Animals , Player , LaserDot , Effects , Items , Venezuela , ZombieBoss The ZombieBoss faction is used for all boss NPC's, this is a quick hack so they won't invalidate the PERSONAL JESUS achievement since zombies don't invalidate it Bug There is an identification mismatch between source code and the Faction list, a dummy Faction should be added at the very top (first on the list) to avoid issues. When checking for Faction, the Faction MUST exist in the list of Factions, otherwise Postal3Script will pass checks for that entity unknowingly. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature The '0 index' bug is fixed st_FactionTutorial { Group Neutral Patterns { pt_default { actions { // If our target is an animal, say we hate all animals! IfAttr \"target.ea_faction == Faction:Animals pt_SayHateAllAnimals\" } } } }","title":"Faction"},{"location":"objects/faction/#faction","text":"Each NPC, and even some generic entities, are set to belong to a specific Faction . This is used for various things, such as checking for how NPC's should act towards whole groups of specific NPC's, and what dispositions they should have against them. Note Here's a list of all the faction types: Police , Zealots , Citizens , Hobos , Animals , Player , LaserDot , Effects , Items , Venezuela , ZombieBoss The ZombieBoss faction is used for all boss NPC's, this is a quick hack so they won't invalidate the PERSONAL JESUS achievement since zombies don't invalidate it Bug There is an identification mismatch between source code and the Faction list, a dummy Faction should be added at the very top (first on the list) to avoid issues. When checking for Faction, the Faction MUST exist in the list of Factions, otherwise Postal3Script will pass checks for that entity unknowingly. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature The '0 index' bug is fixed st_FactionTutorial { Group Neutral Patterns { pt_default { actions { // If our target is an animal, say we hate all animals! IfAttr \"target.ea_faction == Faction:Animals pt_SayHateAllAnimals\" } } } }","title":"Faction"},{"location":"objects/hasweapon/","text":"HasWeapon \uf0c1 Checks if an NPC has a melee/ranged weapon, holstered, or equipped. Syntax HasWeapon:Ranged -- Ranged weapon object HasWeapon:Melee -- Melee weapon object Example // (from ai_badger_test.p3s) IfAttr \"HasWeapon:ranged == 2 SetAttr equipped 1\" // NPC has ranged weapon equipped IfAttr \"HasWeapon:ranged == 1 SetAttr has 1\" // NPC has ranged weapon holstered IfAttr \"HasWeapon:ranged == 0 SetAttr doesnt_has 1\" // NPC doesn't have a ranged weapon","title":"HasWeapon"},{"location":"objects/hasweapon/#hasweapon","text":"Checks if an NPC has a melee/ranged weapon, holstered, or equipped.","title":"HasWeapon"},{"location":"objects/ignore/","text":"Ignore \uf0c1 Unused Postal3Script Object Checks if an object is ignored. Note Can only be used with IgnoreTarget beforehand. Bug Using against corpses doesn't work, even though IgnoreTarget has proper coding for it. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Bug fixed with not being able to use it with corpses. Syntax Ignore:[object type] -- Checks if the type is already ignored or not Example st_somestate { group Neutral patterns { pt_default { actions { // Target was already being ignored! IfAttr \"Ignore:target == 1 Block begin\" ResetTarget 1 Pattern pt_end Block end // Not ignored! IfAttr \"Ignore:target == 0 Block begin\" IgnoreTarget 20 ResetTarget 1 Pattern pt_ignored Block end } } } }","title":"Ignore"},{"location":"objects/ignore/#ignore","text":"Unused Postal3Script Object Checks if an object is ignored. Note Can only be used with IgnoreTarget beforehand. Bug Using against corpses doesn't work, even though IgnoreTarget has proper coding for it. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Bug fixed with not being able to use it with corpses.","title":"Ignore"},{"location":"objects/itemtype/","text":"ItemType \uf0c1 The type of an item object. You can find all the item types in a list located in './Postal III/p3/scripts/ai_matrix.txt' Syntax ItemType:[item type] -- Returns the item type specified Here's the list of all ItemTypes: item_types { 1 TestItem 2 itmXXX 3 itmFood 4 itmToy 5 itmTrash 6 itmDrink 7 itmItem 8 itmShit 9 itmCatnip 10 itmWeapon 11 itmNasty 12 Flame 13 itmSeed 14 fxTaserBeam 15 Catnip 16 Acid 90 Anchor } Example st_start { group Neutral patterns { pt_default { actions { // If we got a visible entity in our memory slot and it's manner is of ItemType itmShit... // Our stupid monkey brain is interested in it, and we want to throw it! IfAttr \"slot#S_VISIBLE_ENTITY.ea_Manner == ItemType:itmShit SetAttr want_throw_shit 1\" } } } }","title":"ItemType"},{"location":"objects/itemtype/#itemtype","text":"The type of an item object. You can find all the item types in a list located in './Postal III/p3/scripts/ai_matrix.txt'","title":"ItemType"},{"location":"objects/karma/","text":"Karma \uf0c1 Unused Postal3Script Object Sets or gets the Player's karma. Warning It's recommended to use PlayerKarma instead. Example // (from ai_st6_missions.p3s) SetAttr \"karma_delta player.karma\" ChangeAttr \"karma_delta -karma_cur\" SetAttr \"karma_cur player.karma\"","title":"Karma"},{"location":"objects/karma/#karma","text":"Unused Postal3Script Object Sets or gets the Player's karma. Warning It's recommended to use PlayerKarma instead.","title":"Karma"},{"location":"objects/manner/","text":"Manner \uf0c1 Each NPC and even some generic entities, have a specific Manner assigned to them. This is essentially the same thing as Faction but on a more individual level. This is used for various things, such as setting and checking how a specific NPC belonging to a Faction actually BEHAVES to then make another NPC act accordingly towards them. For example, preventing us from punching someone we dislike, and instead just shoving them because our Manner is set as GayGuy . Note Here's a list of all the manner types: Player , StreetBro , JusticeMan , StGranny , LameWanker , SoccerMom , CuteGirl , Vendor , RedNeck , SushiNinja , Girl , MedicDoc , StrayDog , MonkeyApe , PussyCat , JihadBeard , RhinoCow , LaserDot , Mission , Pigeon , GayGuy , NerdyNerd , Bystander Bug There is an identification mismatch between source code and the Manner list, a dummy Manner should be added at the very top (first on the list) to avoid issues. When checking for Manner, the Manner MUST exist in the list of Manners, otherwise Postal3Script will pass checks for that entity unknowingly. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature The '0 index' bug is fixed st_MannerTutorial { Group Neutral Patterns { pt_default { actions { // Don't continue if we're not a StreetBro... IfAttr \"ea_manner != Manner:StreetBro Return 1\" // If the target's manner is lame wanker, bully the poor guy! IfAttr \"target.ea_manner == Manner:LameWanker Pattern pt_Bully\" } } } }","title":"Manner"},{"location":"objects/manner/#manner","text":"Each NPC and even some generic entities, have a specific Manner assigned to them. This is essentially the same thing as Faction but on a more individual level. This is used for various things, such as setting and checking how a specific NPC belonging to a Faction actually BEHAVES to then make another NPC act accordingly towards them. For example, preventing us from punching someone we dislike, and instead just shoving them because our Manner is set as GayGuy . Note Here's a list of all the manner types: Player , StreetBro , JusticeMan , StGranny , LameWanker , SoccerMom , CuteGirl , Vendor , RedNeck , SushiNinja , Girl , MedicDoc , StrayDog , MonkeyApe , PussyCat , JihadBeard , RhinoCow , LaserDot , Mission , Pigeon , GayGuy , NerdyNerd , Bystander Bug There is an identification mismatch between source code and the Manner list, a dummy Manner should be added at the very top (first on the list) to avoid issues. When checking for Manner, the Manner MUST exist in the list of Manners, otherwise Postal3Script will pass checks for that entity unknowingly. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature The '0 index' bug is fixed st_MannerTutorial { Group Neutral Patterns { pt_default { actions { // Don't continue if we're not a StreetBro... IfAttr \"ea_manner != Manner:StreetBro Return 1\" // If the target's manner is lame wanker, bully the poor guy! IfAttr \"target.ea_manner == Manner:LameWanker Pattern pt_Bully\" } } } }","title":"Manner"},{"location":"objects/name/","text":"Name \uf0c1 The name of a specified object, set via Hammer Note It is case-insensitive Syntax Name:[object] -- Returns the name of a specified object // If the name of our targeted object is \"npc_jen\" IfAttr \"Name:target == String:npc_jen Block begin\" // Set jen's health to zero SetAttr \"target.ea_health 0\" Block end","title":"Name"},{"location":"objects/name/#name","text":"The name of a specified object, set via Hammer Note It is case-insensitive","title":"Name"},{"location":"objects/object/","text":"Object Entities \uf0c1 Object \uf0c1 An object, such as an NPC, Player or a prop. In Postal3Script you have access to certain objects such as target or the behavior's host, and you can either manipulate or read from them. You don't always have access to the caller , as it's heavily dependent on the Event that caused the Object to enter the pattern. Typically, the caller means something or someone that forced the Object to enter a pattern. Note All the objects in Postal3Script: Object:Caller ; Object:Target ; Object:Player Object:slot#0 ; Object:null ; Object:self Object:item ; Object:anchor ; Object:destination \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Object:item on Players behaves the same like with NPCs. Object:item can be used to get the active weapon, including dismembered bodyparts and throwable objects on Players and NPCs. Syntax Object:[object] -- Returns the Object specified Example // Check if our caller exists (null == zero) IfAttr \"Object:caller != Object:null Block Begin\" // Was it the Player who forced us into this state? IfAttr \"Object:caller == Object:player Block Begin\" // Well then we are going to run to them endlessly TargetPlayer 1 // or TargetCaller 1 MoveToTarget run,1,0 Block End Block End // Check if our target isn't the Player IfAttr \"Object:target != Object:null and Object:target != Object:Player Block Begin\" // Bad day for our enemy, though, because they are going to die instantly ChangeAttr \"target.ea_health -target.ea_health\" Block End // Object:self and Object:item are barely used, the latter is used by Motorhead // It's a pointer to the NPC's held item // Check out ai_motorhead.p3s, ai_st1_common.p3s, ai_st2_states.p3s // and ai_st7_environment.p3s Saving Objects To Memory \uf0c1 You are capable of saving an object to memory, with up to 10 slots. This feature is typically used for keeping track of progress on tasks and related to mission logic. Note The '6' and '7' memory slot was never used. Cannot be higher than 10 or lower than 0. Example // (from ai_st_init.p3s) // Const msTEMP,0 // Const msOWNER,1 // Const msTARGET,2 // Const msENEMY,3 // Const msSUSPECTED,4 // Const msLEADER,5 // Const msDRIVEN,6 // Const msINTEREST,7 // Const msKILLER,8 // Const msGP,9 // Get entity named 'gameplay' and set it as target TargetEntByName gameplay // Save the target to memory TargetToMem msGP // Set the MathLogic's attribute ChangeAttr \"slot#msGP.MoneyGiven +5\" // Reset the target ResetTarget 1","title":"Object"},{"location":"objects/object/#object-entities","text":"","title":"Object Entities"},{"location":"objects/object/#object","text":"An object, such as an NPC, Player or a prop. In Postal3Script you have access to certain objects such as target or the behavior's host, and you can either manipulate or read from them. You don't always have access to the caller , as it's heavily dependent on the Event that caused the Object to enter the pattern. Typically, the caller means something or someone that forced the Object to enter a pattern. Note All the objects in Postal3Script: Object:Caller ; Object:Target ; Object:Player Object:slot#0 ; Object:null ; Object:self Object:item ; Object:anchor ; Object:destination \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Object:item on Players behaves the same like with NPCs. Object:item can be used to get the active weapon, including dismembered bodyparts and throwable objects on Players and NPCs.","title":"Object"},{"location":"objects/object/#saving-objects-to-memory","text":"You are capable of saving an object to memory, with up to 10 slots. This feature is typically used for keeping track of progress on tasks and related to mission logic. Note The '6' and '7' memory slot was never used. Cannot be higher than 10 or lower than 0.","title":"Saving Objects To Memory"},{"location":"objects/relation/","text":"Relation \uf0c1 The relation of an NPC. Syntax Relation:[relation type] -- Returns the relation type specified All Relation Types Relation:neutral ; Relation:enemy ; Relation:fear Example // If the relation to our caller is of enemy, target them! IfAttr \"RelationTo:caller == Relation:enemy Block begin\" TargetCaller 1 Block end","title":"Relation"},{"location":"objects/relation/#relation","text":"The relation of an NPC.","title":"Relation"},{"location":"objects/relationto/","text":"RelationTo \uf0c1 Check the relation of a specified object. Syntax RelationTo:[object] -- Returns the \"Relation\" towards this object, see Relation page for more information Example // If the relation to our caller is of enemy, target them! IfAttr \"RelationTo:caller == Relation:enemy Block begin\" TargetCaller 1 Block end","title":"RelationTo"},{"location":"objects/relationto/#relationto","text":"Check the relation of a specified object.","title":"RelationTo"},{"location":"objects/string/","text":"String \uf0c1 A special object for checking for text in different objects. Check out Name and VoicePrefix for possible String object checks. Example // Checking for an NPC's name (this is set in Hammer) IfAttr \"Name:self == String:npc_ninja2 TargetEntByName npc_ninja1\" // or IfAttr \"ea_name == String:npc_ninja2 TargetEntByName npc_ninja1\" // Checking for NPC's voice prefix IfAttr \"VoicePrefix:self == String:PF Say WF_SCREAM,2\"","title":"String"},{"location":"objects/string/#string","text":"A special object for checking for text in different objects. Check out Name and VoicePrefix for possible String object checks.","title":"String"},{"location":"objects/timer/","text":"Timer \uf0c1 Creates a timer to wait before executing an event. Syntax Timer [string],[float] -- Creates a Timer, will execute OnTimer_[string] event after [float] seconds. Timer [string],[float],repeated -- Creates a Timer, will execute OnTimer_[string] event after every [float] seconds. Timer [string],0 -- Disables a Timer completely. Timer:[string] -- Get a Timer object's timer/value. Warning Checking for a non-existent Timer is not possible. You must pre-create all the timers you will use with Timer [string],0 to ensure IfAttr will properly return zero value. The example below shows a piece of code that will always fail if tCantHeal doesn't exists, and instead of returning from it, it will continue to execute all the actions below it. \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Timers can have longer names Example // This state was entered from somewhere else... st_medic { Group Neutral Patterns { pt_default { actions { // We assume that 'tCantHeal' is a global timer set somewhere else... // (Note: if 'tCantHeal' does not exist, this check will fail and will continue // to create 'tHealMe' timer) IfAttr \"Timer:tCantHeal > 0 Block begin\" State st_canthealmyself Return 0 Block end // If we somehow want to limit this NPC to only fully regenerate once... IfAttr \"fullyregenerated == 1 Block begin\" State st_canthealmyself Return 0 Block end Timer tHealMe,3,repeatable } events { // Will execute after every 3 seconds // (only pt_default will be able to see this event) OnTimer_tHealMe \"Pattern pt_healcheck\" } } pt_healcheck { actions { // If our health is equal to or greater than 100 don't bother healing ourselves IfAttr \"ea_health >= 100 Block begin\" // Disable the timer Timer tHealMe,0 State st_start // enter into another state... SetAttr \"fullyregenerated 1\" Return 0 Block end ChangeAttr \"ea_health +5\" Pattern pt_default } } } } // // Alternative version, which instantly heals an NPC after a few seconds... // st_godmode { Group Neutral Patterns { pt_default { actions { Timer tGod,7 } events { // Will execute after 7 seconds // (only pt_default will be able to see this event) OnTimer_tGod \"Pattern pt_miracle\" } } pt_miracle { actions { SetAttr \"ea_health 100\" State st_start } } } }","title":"Timer"},{"location":"objects/timer/#timer","text":"Creates a timer to wait before executing an event.","title":"Timer"},{"location":"objects/visible/","text":"Visible \uf0c1 Check if a specified object is visible, and if the entity is currently facing it Note This function does not rely on Senses function. Syntax Visible:[object] -- Returns if the specified object is visible and currently facing towards it, or not // Make sure we are able to see Senses true // If we can fire our weapon and we can see the targeted object... IfAttr \"Timer:tCanFire == 0 and Visible:target == 1 Block begin\" // Try to shoot at the target, say we're shooting, and reset our fire timer ExecutePattern st_combat_logic.xpt_TryShoot ExecutePattern .xpt_SayShoot ExecutePattern .xpt_SetFireTimer Block end","title":"Visible"},{"location":"objects/visible/#visible","text":"Check if a specified object is visible, and if the entity is currently facing it Note This function does not rely on Senses function.","title":"Visible"},{"location":"objects/voiceprefix/","text":"VoicePrefix \uf0c1 The prefix of an NPC's voice. The voice prefix can be found in the related NPC's sentence data script entry located in .\\Postal III\\p3\\scripts\\sentences_data.txt Note Everything before the underscore is considered the voice prefix. Syntax VoicePrefix:[object] -- Returns the voice prefix of the specified object // If we don't use the \"whore\" npc voice prefix // say a \"sentence\" type voice line about a cop going crazy // (whore npc's don't have any lines recorded for this scenario) IfAttr \"VoicePrefix:self != String:WHR Say MADCOP\"","title":"VoicePrefix"},{"location":"objects/voiceprefix/#voiceprefix","text":"The prefix of an NPC's voice. The voice prefix can be found in the related NPC's sentence data script entry located in .\\Postal III\\p3\\scripts\\sentences_data.txt Note Everything before the underscore is considered the voice prefix.","title":"VoicePrefix"},{"location":"squadfuncs/rallysquad/","text":"RallySquad \uf0c1 Unused Postal3Script function. Technical Details * Searches for nearest NPC with a squad, If both squads exist, removes the first member of NPC's squad, and adds it to nearest NPC's squad * If NPC's squad exists, nearest NPC will be added to NPC's squad, If NPC's squad doesn't exist, the opposite will happen * If both NPCs don't have any squads, a squad will be automatically created with both NPCs being the members of it Syntax RallySquad [distance],[squad size]","title":"RallySquad"},{"location":"squadfuncs/rallysquad/#rallysquad","text":"Unused Postal3Script function.","title":"RallySquad"},{"location":"squadfuncs/setsquad_relation/","text":"Squad Functions \uf0c1 Note One squad can only hold 32 NPCs in one map. SetSquad \uf0c1 Sets an NPC's squad. Syntax SetSquad [string] - Sets squad SetSquad null - Clears out squad Example // (From ai_mission_pwac) st_init { Group Neutral Patterns { pt_default { actions { ExecutePattern bh_base:st_init.pt_default SetAttr \"GrenadeType GRND_TYPE_FRAG\" SetAttr \"flag_ThrowSafe 1\" // Set our squad as Cops_squad SetSquad Cops_squad SetSquadRelation Prison_squad:enemy:2,Player_squad:enemy:4 } } } } SetSquadRelation \uf0c1 Sets an NPC's squad's relation towards another squad. Syntax SetSquadRelation [squad name]:[neutral/enemy/fear]:[priority] -- use commas (,) to set more relations Example // (from ai_mission_jwb) pt_default { actions { ExecutePattern bh_base:st_init.pt_default TargetEntByName \"mission_logic\" TargetToMem msGP FireEvent CopSpawned SetSquad cop_squad // Hates Player, and Soccer Moms, but hates the latter more SetSquadRelation Player_squad:enemy:3,SoccerMom:enemy:1 SetAttr \"IdleTask 0\" SetAreaGroup AG_DEFAULT,AG_BATTLE,AG_SHOP } } RemoveSquadRelation \uf0c1 Unused Postal3Script function. Removes an NPC's squad's relation towards another squad. Syntax RemoveSquadRelation [squad name],[squad name] RemoveSquadRelation clear_all -- Clears every squad relation from current squad","title":"SetSquad, SetSquadRelation, RemoveSquadRelation"},{"location":"squadfuncs/setsquad_relation/#squad-functions","text":"Note One squad can only hold 32 NPCs in one map.","title":"Squad Functions"},{"location":"squadfuncs/setsquad_relation/#setsquad","text":"Sets an NPC's squad.","title":"SetSquad"},{"location":"squadfuncs/setsquad_relation/#setsquadrelation","text":"Sets an NPC's squad's relation towards another squad.","title":"SetSquadRelation"},{"location":"squadfuncs/setsquad_relation/#removesquadrelation","text":"Unused Postal3Script function. Removes an NPC's squad's relation towards another squad.","title":"RemoveSquadRelation"},{"location":"statefuncs/activitypattern_funcs/","text":"Deprecated Pattern Functions \uf0c1 Warning It's not recommended to use these functions. They are only here for documenting purposes. Use functions from THIS page instead. StoreActivityPattern \uf0c1 Unused Postal3Script function Stores an Activity Pattern Syntax StoreActivityPattern [string] -- Stores a pattern from current state Example st_mycustomstate { group Neutral patterns { pt_default { actions { // This will store pt_ketchup from the current state StoreActivityPattern pt_ketchup } } pt_ketchup { actions { ChangeAttr \"Ketchup +1\" } } } } ExecuteActivityPattern \uf0c1 Unused Postal3Script function Executes Activity Pattern Syntax ExecuteActivityPattern true -- Executes currently stored pattern ClearActivityPattern \uf0c1 Unused Postal3Script function Clears Activity Pattern Syntax ClearActivityPattern true -- Clears currently stored pattern","title":"StoreActivityPattern, ExecuteActivityPattern, ClearActivityPattern"},{"location":"statefuncs/activitypattern_funcs/#deprecated-pattern-functions","text":"Warning It's not recommended to use these functions. They are only here for documenting purposes. Use functions from THIS page instead.","title":"Deprecated Pattern Functions"},{"location":"statefuncs/activitypattern_funcs/#storeactivitypattern","text":"Unused Postal3Script function Stores an Activity Pattern","title":"StoreActivityPattern"},{"location":"statefuncs/activitypattern_funcs/#executeactivitypattern","text":"Unused Postal3Script function Executes Activity Pattern","title":"ExecuteActivityPattern"},{"location":"statefuncs/activitypattern_funcs/#clearactivitypattern","text":"Unused Postal3Script function Clears Activity Pattern","title":"ClearActivityPattern"},{"location":"statefuncs/callstate_callpattern/","text":"Deprecated State Functions \uf0c1 Warning It's not recommended to use these functions. They are only here for documenting purposes. Use functions from THIS page instead. CallState \uf0c1 Unused Postal3Script function. Note Superseded by State Syntax CallState [state name] -- Exits out from current state, and enters new state CallPattern \uf0c1 Unused Postal3Script function. Note Superseded by Pattern Syntax CallPattern [pattern name] -- Exits out from current pattern, and enters a new pattern in current state Call \uf0c1 Unused Postal3Script function. Note Superseded by ExecutePattern Syntax Call [state name].[pattern name] -- Externally executes a pattern from a state","title":"CallState, CallPattern, Call"},{"location":"statefuncs/callstate_callpattern/#deprecated-state-functions","text":"Warning It's not recommended to use these functions. They are only here for documenting purposes. Use functions from THIS page instead.","title":"Deprecated State Functions"},{"location":"statefuncs/callstate_callpattern/#callstate","text":"Unused Postal3Script function. Note Superseded by State","title":"CallState"},{"location":"statefuncs/callstate_callpattern/#callpattern","text":"Unused Postal3Script function. Note Superseded by Pattern","title":"CallPattern"},{"location":"statefuncs/callstate_callpattern/#call","text":"Unused Postal3Script function. Note Superseded by ExecutePattern","title":"Call"},{"location":"statefuncs/func_state_pattern_executepattern/","text":"Basic State Functions \uf0c1 State \uf0c1 Exits from current state, and enters a new state Syntax State [behavior name]:[state name].[pattern name] -- Sets the new state, Behavior and Pattern is OPTIONAL, Behavior will only work for inherited ones! Example // On start after 5 seconds it will exit from st_start and enter st_new_start, and back forth st_start { Group Neutral Patterns { pt_default { actions { Wait 5 State st_new_start } } } } st_new_start { Group Neutral Patterns { pt_default { actions { Wait 5 ChangeAttr \"TimeTicking +1\" State st_start } } } } st_start_pattern { Group Neutral Patterns { pt_default { actions { Wait 5 ChangeAttr \"TimeTicking +1\" State st_start.pt_mypattern // Skips pt_default! } } } } Pattern \uf0c1 Exits from current pattern from current state, and enters a new pattern in the current state Syntax pattern [pattern name] -- Sets the new pattern Example // State initially enters \"pt_default\" pattern, but will move to \"pt_follow\" and will be there endlessly // from ai_cashmart.p3s st_idle { Group Neutral Patterns { pt_default { actions { TargetPlayer 1 Face true LookAt 1 Pattern pt_follow } } pt_follow { actions { MoveToTarget true,2 Wait 10 Pattern pt_follow } events { OnTargetReach \"Pattern pt_wait\" } } pt_wait { actions { IfAttr \"DistTo:target > 150 Pattern pt_follow\" Repeat 0.5 } } } } ExecutePattern \uf0c1 Executes a pattern outside of current state Syntax ExecutePattern [actor name]:[state name].[pattern name] -- Executes this pattern Example // This will execute bh_base's st_init's pt_default pattern ExecutePattern bh_base:st_init.pt_default // This will execute the state and pattern called \"st_onDeath.pt_default\" found from the caller's actor ExecutePattern st_OnDeath.pt_default // This will execute a pattern that exists in the state the script is currently running from ExecutePattern .xpt_shout","title":"State, Pattern, ExecutePattern"},{"location":"statefuncs/func_state_pattern_executepattern/#basic-state-functions","text":"","title":"Basic State Functions"},{"location":"statefuncs/func_state_pattern_executepattern/#state","text":"Exits from current state, and enters a new state","title":"State"},{"location":"statefuncs/func_state_pattern_executepattern/#pattern","text":"Exits from current pattern from current state, and enters a new pattern in the current state","title":"Pattern"},{"location":"statefuncs/func_state_pattern_executepattern/#executepattern","text":"Executes a pattern outside of current state","title":"ExecutePattern"},{"location":"statefuncs/sendstate_sendpattern/","text":"Send State/Pattern Functions \uf0c1 Note SendState and SendPattern will randomize which state or pattern to send to target, if there are more than 1 defined. Only works with target. SendState \uf0c1 Unused Postal3Script function. Syntax SendState [state1],[state2],[state3],... -- Sends states to target SendPattern \uf0c1 Unused Postal3Script function. Syntax SendPattern [state1].[pattern1],[state2].[pattern2],[state3].[pattern3],... -- Sends patterns to target","title":"SendState, SendPattern"},{"location":"statefuncs/sendstate_sendpattern/#send-statepattern-functions","text":"Note SendState and SendPattern will randomize which state or pattern to send to target, if there are more than 1 defined. Only works with target.","title":"Send State/Pattern Functions"},{"location":"statefuncs/sendstate_sendpattern/#sendstate","text":"Unused Postal3Script function.","title":"SendState"},{"location":"statefuncs/sendstate_sendpattern/#sendpattern","text":"Unused Postal3Script function.","title":"SendPattern"},{"location":"statefuncs/statematrix/","text":"StateMatrix \uf0c1 Matrix to check through manners, factions, and act accordingly to that Note To better understand what both matrix do, check out ai_matrix.p3s Heavily used in ai_mission_pw.p3s Function uses target Syntax StateMatrix faction -- Goes through Faction matrix, and calls states StateMatrix social -- Goes through Social matrix, and calls states Faction Matrix (ai_matrix.p3s) Social Matrix (ai_matrix.p3s)","title":"StateMatrix"},{"location":"statefuncs/statematrix/#statematrix","text":"Matrix to check through manners, factions, and act accordingly to that Note To better understand what both matrix do, check out ai_matrix.p3s Heavily used in ai_mission_pw.p3s Function uses target","title":"StateMatrix"},{"location":"statefuncs/wait_waitforend_repeat/","text":"Basic Wait Logic Functions \uf0c1 Wait \uf0c1 A Timer to wait before execution Note Can use floats. Syntax Wait [float] -- Wait before executing Wait [float]:[float] -- Randomized waiting time Example // from ai_mission_aa.p3s st_tank { Group Neutral Patterns { pt_default { actions { PlayVideo aa_2,1,1 // Wait this much to not spawn the Boss immediately Wait 1.2 MissionLog add_primary,tank,#P3_AA_LOG3 EntFireInput muzak.battle,FadeIn:1 EntFireInput hugo_spawner,Enable EntFireInput spawner_invaders,Enable ShowMessage #P3_AA_MSG3 } } } } WaitForEnd \uf0c1 Wait for an ongoing activity before execution Mostly used for sequences Warning Must be used for an activity that has animation, otherwise the function will fail to execute properly. Highly recommended to check out Postal3Script files and analyze the function to understand it better. Syntax WaitForEnd 1 -- Wait for ending before execution Example // from ai_mission_cw.p3s st_opencage_02 { Group Alert Patterns { pt_default { actions { Weapon disarm Sequence seq.env_checking // Wait for \"env_checking\" animation to end WaitForEnd 1 Weapon arm EntFireInput \"door_dogs_02,OpenAwayFrom:!activator\" State st_start } } } } Repeat \uf0c1 Repeats a pattern every defined second Note Can use floats. Syntax Repeat [float] -- Repeat every [float] seconds Example // This will create a loop in pt_loop endlessly, unless we exit from out it st_start { Group Neutral Patterns { pt_default { actions { PlayerKarma hide MissionLog disable Pattern pt_loop } } pt_loop { actions { Repeat 2 } } } } Return \uf0c1 Stops lines being executed from below Syntax Return 1 -- Stop execution from below Example st_somestate { Group Neutral Patterns { pt_default { actions { // Return if health is more than 50! IfAttr \"ea_health > 50 Return 1\" // This will never execute if health is above 50! SetAttr \"ea_health 100\" Return 1 // And this will never, ever execute SetAttr \"ea_health 99999\" } } } }","title":"Wait, WaitForEnd, Repeat, Return"},{"location":"statefuncs/wait_waitforend_repeat/#basic-wait-logic-functions","text":"","title":"Basic Wait Logic Functions"},{"location":"statefuncs/wait_waitforend_repeat/#wait","text":"A Timer to wait before execution Note Can use floats.","title":"Wait"},{"location":"statefuncs/wait_waitforend_repeat/#waitforend","text":"Wait for an ongoing activity before execution Mostly used for sequences Warning Must be used for an activity that has animation, otherwise the function will fail to execute properly. Highly recommended to check out Postal3Script files and analyze the function to understand it better.","title":"WaitForEnd"},{"location":"statefuncs/wait_waitforend_repeat/#repeat","text":"Repeats a pattern every defined second Note Can use floats.","title":"Repeat"},{"location":"statefuncs/wait_waitforend_repeat/#return","text":"Stops lines being executed from below","title":"Return"},{"location":"targetingfuncs/assisttarget_enemy/","text":"Various Targeting Functions \uf0c1 AssistTarget \uf0c1 Sets current target/enemy as target object internally for script. Syntax AssistTarget 1 -- Sets current target/enemy as target object internally Example pt_npcdead { actions { IfAttr \"ea_Manner == Manner:JusticeMan Block begin\" TargetCaller 1 Weapon select,ranged AssistTarget 1 Relationship target,enemy State st_start Block end } } AssistEnemy \uf0c1 Unused Postal3Script function Sets current target's enemy as target Syntax AssistEnemy 1 -- Sets current target's enemy as target ArrestTarget \uf0c1 Unused Postal3Script function Arrests the target. Note Target object must be the Player Only works for p3_npc_cop NPCs This is an old function that's not guranteed to properly work. Syntax ArrestTarget true -- Target is arrested ArrestTarget false -- Target is no longer arrested Example // from ai_st5_temp.p3s st_test_arrest { group Neutral patterns { pt_arrest { actions { FreeMovement false TargetPlayer 1 ArrestTarget true Wait 30 ArrestTarget false State st_start } } } } BusyTarget \uf0c1 Unused Postal3Script function Sets target's busy state internally Note Can target self Syntax BusyTarget true -- Target is busy BusyTarget false -- Target is no longer busy Example // from ai_st11_urza.p3s st_p3_buy_cash { group Neutral patterns { pt_default { actions { BusyTarget true // SELLER IS BUSY targetToMem 2 // mem2 is seller targetFromMem 1 // target is thing FreeMovement false Sequence itm_discard WaitForEnd 1 targetFromMem 2 //target is seller FireEvent NeedBuy } } } }","title":"AssistTarget, AssistEnemy, ArrestTarget, BusyTarget"},{"location":"targetingfuncs/assisttarget_enemy/#various-targeting-functions","text":"","title":"Various Targeting Functions"},{"location":"targetingfuncs/assisttarget_enemy/#assisttarget","text":"Sets current target/enemy as target object internally for script.","title":"AssistTarget"},{"location":"targetingfuncs/assisttarget_enemy/#assistenemy","text":"Unused Postal3Script function Sets current target's enemy as target","title":"AssistEnemy"},{"location":"targetingfuncs/assisttarget_enemy/#arresttarget","text":"Unused Postal3Script function Arrests the target. Note Target object must be the Player Only works for p3_npc_cop NPCs This is an old function that's not guranteed to properly work.","title":"ArrestTarget"},{"location":"targetingfuncs/assisttarget_enemy/#busytarget","text":"Unused Postal3Script function Sets target's busy state internally Note Can target self","title":"BusyTarget"},{"location":"targetingfuncs/checktarget_checklos/","text":"Checking Functions \uf0c1 CheckTarget \uf0c1 Checks various aspects of the target, and executes events according to it. Syntax CheckTarget 1 -- Target is checked Technical Details If target is busy and exists, an event called \"OnTargetReset\" will be fired with the target being the caller, and the NPC that called CheckTarget will get their target nulled out. If that check fails, NPC will forget their target, look for potential targets, and fire \"OnVisible\" event with the target being the caller If even that fails, the event \"OnTargetReset\" will be fired on the NPC. Example // from ai_mission_pdb.p3s pt_move { actions { MoveToTarget walk,0 Wait 2:5 Say ZOMB_MOAN,ZOMB_CURSE,0 CheckTarget 1 Repeat 1 } events { OnVisible \"Pattern pt_barf\" } } CheckLOS \uf0c1 Checks if target is able to see the caller Syntax CheckLOS 1 -- Checks target's line of sight Technical Details Fires event OnLOS if target is able to see the caller Example // from ai_mission_pm2.p3s pt_loop { actions { // Target can't see us, perfect, kill ourselves IfAttr \"Timer:tKill < = 0 Npc kill\" CheckLOS 1 Repeat 1 } events { // The timer's counter will be reset to 3 everytime the target is able to see OnLOS \"Timer tKill,3\" } }","title":"CheckTarget, CheckLOS"},{"location":"targetingfuncs/checktarget_checklos/#checking-functions","text":"","title":"Checking Functions"},{"location":"targetingfuncs/checktarget_checklos/#checktarget","text":"Checks various aspects of the target, and executes events according to it.","title":"CheckTarget"},{"location":"targetingfuncs/checktarget_checklos/#checklos","text":"Checks if target is able to see the caller","title":"CheckLOS"},{"location":"targetingfuncs/relationship/","text":"Relationship \uf0c1 Sets NPC's friendliness towards objects Syntax What is Priority? Relative importance of the set relationship (higher numbers mean more important) Relationship target,[neutral/enemy/fear],[priority] Relationship caller,[neutral/enemy/fear],[priority] Relationship all_enemy,[neutral/enemy/fear],[priority] Relationship all_fear,[neutral/enemy/fear],[priority] Relationship all_neutral,[neutral/enemy/fear],[priority] Example // (from ai_mission_bdk.p3s) // You think you can take Krotchy down?! xpt_firstrun { actions { TargetEntByName \"npc_krotchy\" TargetToMem msLEADER TargetPlayer 1 Relationship target,enemy,1 SetSquad krotchy_squad ResetTarget 1 RemoveAttr FirstRun State st_start } }","title":"Relationship"},{"location":"targetingfuncs/relationship/#relationship","text":"Sets NPC's friendliness towards objects","title":"Relationship"},{"location":"targetingfuncs/reset_ignore_settarget/","text":"Various Target functions \uf0c1 ResetTarget \uf0c1 Resets target object. Syntax ResetTarget 1 -- Resets target object Example // This will set the Player, and an object from memory as enemy xpt_IHateEveryone { actions { TargetFromMem 6 Relationship target, enemy, 1 ResetTarget 1 TargetPlayer 1 Relationship target, enemy, 2 ResetTarget 1 } } IgnoreTarget \uf0c1 Ignores a target object for a specified time. Syntax IgnoreTarget [integer] -- NPC will not know this object exists for 5 seconds IgnoreTarget [integer]:[integer] -- NPC will not know this object exists for a randomized time Example pt_end { actions { IgnoreTarget 20 ResetTarget 1 State st_start } } SetTarget \uf0c1 Sets target objects for an object Syntax SetTarget \"[object].Object:target Object:[object]\" -- Sets the object's target object from the caller's object SetTarget \"Object:self target.Object:slot#[memory slot]\" -- Sets our target from a target's memory slot Example // This will set our target's target object ourself SetTarget \"target.Object:target Object:self\" // This will set our target's target object our caller SetTarget \"target.Object:target Object:caller\" // This will set the caller's target object ourself SetTarget \"caller.Object:target Object:self\" // This will set our target object from our current target's memory slot SetTarget \"Object:self target.Object:slot#6\"","title":"ResetTarget, IgnoreTarget, SetTarget"},{"location":"targetingfuncs/reset_ignore_settarget/#various-target-functions","text":"","title":"Various Target functions"},{"location":"targetingfuncs/reset_ignore_settarget/#resettarget","text":"Resets target object.","title":"ResetTarget"},{"location":"targetingfuncs/reset_ignore_settarget/#ignoretarget","text":"Ignores a target object for a specified time.","title":"IgnoreTarget"},{"location":"targetingfuncs/reset_ignore_settarget/#settarget","text":"Sets target objects for an object","title":"SetTarget"},{"location":"targetingfuncs/sendtarget2caller_sendcaller/","text":"Send Caller or Target functions \uf0c1 SendTarget2Caller \uf0c1 Unused Postal3Script function. Sets caller's target object as target object. Note Target and caller object cannot be the same Syntax SendTarget2Caller 1 -- Sends target object to caller object SendCaller \uf0c1 Unused Postal3Script function. Sets caller as target object's target/enemy. Note Target and caller object cannot be the same Syntax SendCaller 1","title":"SendTarget2Caller, SendCaller"},{"location":"targetingfuncs/sendtarget2caller_sendcaller/#send-caller-or-target-functions","text":"","title":"Send Caller or Target functions"},{"location":"targetingfuncs/sendtarget2caller_sendcaller/#sendtarget2caller","text":"Unused Postal3Script function. Sets caller's target object as target object. Note Target and caller object cannot be the same","title":"SendTarget2Caller"},{"location":"targetingfuncs/sendtarget2caller_sendcaller/#sendcaller","text":"Unused Postal3Script function. Sets caller as target object's target/enemy. Note Target and caller object cannot be the same","title":"SendCaller"},{"location":"targetingfuncs/targetentbyname/","text":"TargetEntByName \uf0c1 Searches the map for an entity by name, and sets it as the target object if successful. Syntax TargetEntByName [string] Example // (From ai_mission_cw.p3s) IfAttr \"cage_num == 4 Block begin\" IfAttr \"slot#msGP.Cage_04_opened == 0 Repeat 0\" IfAttr \"slot#msGP.Cage_04_opened == 1 Block begin\" // Search for an entity named \"npc_dog_04\" from the map TargetEntByName npc_dog_04 IfAttr \"Object:target == Object:Null Repeat 0\" IfAttr \"Name:target != String:npc_dog_04 Repeat 0\" IfAttr \"target.Taken == 1 Repeat 0\" State st_take Block end Block end // (From \"Name\" page's Example) TargetEntByName npc_jen IfAttr \"Name:target == String:npc_jen Block begin\" // Set jen's health to zero SetAttr \"target.ea_health 0\" Block end","title":"TargetEntByName"},{"location":"targetingfuncs/targetentbyname/#targetentbyname","text":"Searches the map for an entity by name, and sets it as the target object if successful.","title":"TargetEntByName"},{"location":"targetingfuncs/targetfunctions/","text":"Target Functions \uf0c1 TargetEnemy \uf0c1 Sets NPC's enemy as target object Syntax TargetEnemy 1 -- Sets NPC's enemy as target object TargetPlayer \uf0c1 Sets Player as target object Syntax TargetPlayer 1 -- Sets Player as target object TargetCaller \uf0c1 Sets Event's caller as target object Syntax TargetCaller 1 -- Sets Event's caller as target object TargetItem \uf0c1 Sets item in NPC's hand as target object \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Works with Players Can be used to get the active weapon Syntax TargetItem 1 -- Sets item in NPC's hand as target object TargetVehicle \uf0c1 Sets named Vehicle as target object Note Caller must be a Driver NPC Syntax TargetVehicle [entity name] -- Sets named Vehicle as target object TargetVehicle null -- Resets Driver's entry point Example // (from ai_mission_mc.p3s) st_return_to_vehicle { group Neutral patterns { pt_default:ignore_ext_events { actions { SetAttr \"OnSegway 0\" TargetVehicle vehicle_driver_exit MoveToTarget true,0.5 Repeat 3 } events { OnTargetReach \"EnterVehicle 1\" OnEnteredVehicle \"Pattern pt_vehicle\" } } } } TargetHostage \uf0c1 Unused Postal3Script function. Sets Hostage as target object. Note Caller must be the Player Player must have active Hostage Syntax TargetHostage 1 -- Sets Hostage as target object TargetCrosshair \uf0c1 Unused Postal3Script function (Leftover from Dog School). Sets Laserpen's dot as target object. Warning Will fail if Player isn't using Laserpen. Syntax TargetCrosshair 1 -- Sets Laserpen's dot as target object","title":"TargetEnemy, TargetPlayer, TargetCaller, TargetItem, TargetVehicle, TargetHostage, TargetCrosshair"},{"location":"targetingfuncs/targetfunctions/#target-functions","text":"","title":"Target Functions"},{"location":"targetingfuncs/targetfunctions/#targetenemy","text":"Sets NPC's enemy as target object","title":"TargetEnemy"},{"location":"targetingfuncs/targetfunctions/#targetplayer","text":"Sets Player as target object","title":"TargetPlayer"},{"location":"targetingfuncs/targetfunctions/#targetcaller","text":"Sets Event's caller as target object","title":"TargetCaller"},{"location":"targetingfuncs/targetfunctions/#targetitem","text":"Sets item in NPC's hand as target object \ud83c\udd99\ud83e\udebd Postal III Ultrapatch-only feature Works with Players Can be used to get the active weapon","title":"TargetItem"},{"location":"targetingfuncs/targetfunctions/#targetvehicle","text":"Sets named Vehicle as target object Note Caller must be a Driver NPC","title":"TargetVehicle"},{"location":"targetingfuncs/targetfunctions/#targethostage","text":"Unused Postal3Script function. Sets Hostage as target object. Note Caller must be the Player Player must have active Hostage","title":"TargetHostage"},{"location":"targetingfuncs/targetfunctions/#targetcrosshair","text":"Unused Postal3Script function (Leftover from Dog School). Sets Laserpen's dot as target object. Warning Will fail if Player isn't using Laserpen.","title":"TargetCrosshair"},{"location":"targetingfuncs/targetmemory/","text":"Memory Functions \uf0c1 TargetToMem \uf0c1 Takes target object, and puts it into a memory slot Syntax TargetToMem [slot] -- Places target object to [slot] slot Example // (Code taken from ai_cashmart_npc.p3s and edited it) // This will save this entity to the third memory slot, and resets it's target TargetEntByName target_1floor_zealots TargetToMem 3 ResetTarget 1 TargetFromMem \uf0c1 Takes an object from a memory slot, and sets it as target Syntax TargetFromMem [slot] -- Takes object from [slot] slot Example // (Continuing from TargetToMem's Example) // This forces the target to be an enemy after taking it out from memory TargetFromMem 3 Relationship target, enemy, 1 ResetTarget 1 CallerToMem \uf0c1 Takes caller object, and places it into a memory slot (an Event was fired and had a valid caller object) Syntax CallerToMem [slot] -- Places caller object to [slot] slot ClearMem \uf0c1 Clears a memory slot Syntax ClearMem [slot] -- Clears an object from [slot] slot","title":"TargetToMem, TargetFromMem, CallerToMem, ClearMem"},{"location":"targetingfuncs/targetmemory/#memory-functions","text":"","title":"Memory Functions"},{"location":"targetingfuncs/targetmemory/#targettomem","text":"Takes target object, and puts it into a memory slot","title":"TargetToMem"},{"location":"targetingfuncs/targetmemory/#targetfrommem","text":"Takes an object from a memory slot, and sets it as target","title":"TargetFromMem"},{"location":"targetingfuncs/targetmemory/#callertomem","text":"Takes caller object, and places it into a memory slot (an Event was fired and had a valid caller object)","title":"CallerToMem"},{"location":"targetingfuncs/targetmemory/#clearmem","text":"Clears a memory slot","title":"ClearMem"},{"location":"ultrapatch/what_is_ultrapatch/","text":"\ud83c\udd99 What is Postal III Ultrapatch? \uf0c1 Postal III Ultrapatch is a mod/patch released by WhackJob Interactive for Postal III. This patch addresses a significant number of bugs and crashes that were present in Postal III, and also includes additional improvements, changes, and restored cut content. The modifications are faithful to the current design of the game and were born out of the efforts of the Catharsis Reborn total conversion modding team. While some of the changes were initially intended for Catharsis Reborn , the team decided to adapt them to the vanilla version of Postal III and further enhance the experience. Tip \ud83c\udd99Ultrapatch-only features on the docs are marked with the \ud83c\udd99 emoji. \ud83e\udebdAngel-only features will not work on \ud83c\udd99Ultrapatch. Features marked with \ud83c\udd99\ud83e\udebd means it will work both on \ud83c\udd99Ultrapatch and \ud83e\udebdAngel Features marked with \ud83e\udebd will not work on \ud83c\udd99Ultrapatch Features/Fixes \uf0c1 Check ModDB Postal III Ultrapatch releases for a more in-depth list. Points of interest \uf0c1 Most common crashes are fixed Restored jumping Improved melee hit detection Added Player ragdoll Restored Segway animations Addon support with Postal3Script and VPK support (similar to ZOOM's) ... and much more under the hood changes","title":"\ud83c\udd99 What is Postal III Ultrapatch?"},{"location":"ultrapatch/what_is_ultrapatch/#what-is-postal-iii-ultrapatch","text":"Postal III Ultrapatch is a mod/patch released by WhackJob Interactive for Postal III. This patch addresses a significant number of bugs and crashes that were present in Postal III, and also includes additional improvements, changes, and restored cut content. The modifications are faithful to the current design of the game and were born out of the efforts of the Catharsis Reborn total conversion modding team. While some of the changes were initially intended for Catharsis Reborn , the team decided to adapt them to the vanilla version of Postal III and further enhance the experience. Tip \ud83c\udd99Ultrapatch-only features on the docs are marked with the \ud83c\udd99 emoji. \ud83e\udebdAngel-only features will not work on \ud83c\udd99Ultrapatch. Features marked with \ud83c\udd99\ud83e\udebd means it will work both on \ud83c\udd99Ultrapatch and \ud83e\udebdAngel Features marked with \ud83e\udebd will not work on \ud83c\udd99Ultrapatch","title":"\ud83c\udd99 What is Postal III Ultrapatch?"},{"location":"ultrapatch/what_is_ultrapatch/#featuresfixes","text":"Check ModDB Postal III Ultrapatch releases for a more in-depth list.","title":"Features/Fixes"},{"location":"ultrapatch/what_is_ultrapatch/#points-of-interest","text":"Most common crashes are fixed Restored jumping Improved melee hit detection Added Player ragdoll Restored Segway animations Addon support with Postal3Script and VPK support (similar to ZOOM's) ... and much more under the hood changes","title":"Points of interest"}]}